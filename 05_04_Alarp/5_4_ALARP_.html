<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 5.4: ALARP & Human Factors in Design | The Nuclear House</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        /* ========================================
           CSS VARIABLES - Nuclear House Branding
           ======================================== */
        :root {
            /* Primary Backgrounds - Dark Theme */
            --bg-primary: #1f2937;
            --bg-secondary: #364451;
            --bg-card: #4a5d6b;
            --bg-elevated: #2d3a47;
            --bg-darker: #171f28;
            
            /* Text Colours */
            --text-primary: #f7f8fa;
            --text-secondary: #9babc2;
            --text-muted: #6b7d8f;
            --text-heading: #ffffff;
            
            /* Brand Accents */
            --accent-green: #92d050;
            --accent-blue: #00b0f0;
            --accent-orange: #cc5500;
            --accent-orange-light: #e86a10;
            
            /* Semantic Colours */
            --color-success: #92d050;
            --color-warning: #f0a500;
            --color-danger: #e54545;
            --color-info: #00b0f0;
            
            /* Glows & Effects */
            --glow-green: rgba(146, 208, 80, 0.3);
            --glow-blue: rgba(0, 176, 240, 0.3);
            --glow-orange: rgba(204, 85, 0, 0.4);
            --glow-danger: rgba(229, 69, 69, 0.3);
            
            /* UI Elements */
            --border-subtle: rgba(155, 171, 194, 0.15);
            --border-medium: rgba(155, 171, 194, 0.25);
            --overlay-dark: rgba(23, 31, 40, 0.9);
            
            /* Spacing */
            --space-xs: 0.25rem;
            --space-sm: 0.5rem;
            --space-md: 1rem;
            --space-lg: 1.5rem;
            --space-xl: 2rem;
            --space-2xl: 3rem;
            --space-3xl: 4rem;
            
            /* Border Radius */
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;
            
            /* Transitions */
            --transition-fast: 0.15s ease;
            --transition-base: 0.3s ease;
            --transition-slow: 0.5s ease;
        }

        /* ========================================
           RESET & BASE STYLES
           ======================================== */
        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.7;
            font-weight: 400;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
            line-height: 1.2;
            color: var(--text-heading);
            letter-spacing: 0.01em;
        }

        h1 { font-size: clamp(2rem, 5vw, 3.5rem); }
        h2 { font-size: clamp(1.75rem, 4vw, 2.5rem); }
        h3 { font-size: clamp(1.25rem, 3vw, 1.75rem); }
        h4 { font-size: clamp(1.1rem, 2vw, 1.25rem); }

        p {
            margin-bottom: 1rem;
        }

        a {
            color: var(--accent-blue);
            text-decoration: none;
            transition: color var(--transition-fast);
        }

        a:hover {
            color: var(--accent-green);
        }

        .mono {
            font-family: 'JetBrains Mono', monospace;
        }

        /* ========================================
           FIXED HEADER
           ======================================== */
        .fixed-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 64px;
            background: rgba(31, 41, 55, 0.95);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 var(--space-lg);
            z-index: 1000;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .header-logo {
            height: 36px;
            opacity: 0.95;
            transition: opacity var(--transition-fast);
        }

        .header-logo:hover {
            opacity: 1;
        }

        .header-divider {
            width: 1px;
            height: 28px;
            background: var(--border-medium);
        }

        .header-title {
            font-family: 'Rajdhani', sans-serif;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-secondary);
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .header-title span {
            color: var(--accent-orange);
        }

        /* Progress Indicator */
        .header-progress {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .progress-track {
            width: 140px;
            height: 4px;
            background: var(--bg-card);
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-orange), var(--accent-green));
            width: 0%;
            transition: width var(--transition-slow);
            border-radius: 2px;
        }

        .progress-text {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--text-muted);
            min-width: 36px;
        }

        /* Menu Toggle */
        .menu-toggle {
            background: none;
            border: none;
            color: var(--text-primary);
            cursor: pointer;
            padding: var(--space-sm);
            display: flex;
            flex-direction: column;
            gap: 5px;
            transition: transform var(--transition-fast);
        }

        .menu-toggle:hover {
            transform: scale(1.05);
        }

        .menu-toggle span {
            display: block;
            width: 24px;
            height: 2px;
            background: var(--text-primary);
            border-radius: 1px;
            transition: all var(--transition-base);
            transform-origin: center;
        }

        .menu-toggle.active span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }

        .menu-toggle.active span:nth-child(2) {
            opacity: 0;
            transform: scaleX(0);
        }

        .menu-toggle.active span:nth-child(3) {
            transform: rotate(-45deg) translate(5px, -5px);
        }

        /* ========================================
           NAVIGATION MENU
           ======================================== */
        .nav-menu {
            position: fixed;
            top: 64px;
            right: 0;
            bottom: 0;
            width: 320px;
            max-width: 85vw;
            background: var(--bg-secondary);
            border-left: 1px solid var(--border-subtle);
            transform: translateX(100%);
            transition: transform var(--transition-base);
            z-index: 999;
            overflow-y: auto;
            padding: var(--space-lg);
        }

        .nav-menu.open {
            transform: translateX(0);
        }

        .nav-menu-header {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            font-weight: 600;
            color: var(--text-muted);
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-bottom: var(--space-md);
            padding: 0 var(--space-sm);
        }

        .nav-menu a {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-md);
            color: var(--text-secondary);
            border-radius: var(--radius-md);
            font-size: 0.9rem;
            transition: all var(--transition-fast);
            margin-bottom: var(--space-xs);
            border: 1px solid transparent;
        }

        .nav-menu a:hover {
            background: rgba(0, 176, 240, 0.1);
            color: var(--accent-blue);
            border-color: rgba(0, 176, 240, 0.2);
        }

        .nav-menu a.active {
            background: var(--accent-orange);
            color: var(--bg-primary);
            font-weight: 500;
        }

        .nav-menu a.completed {
            color: var(--accent-green);
        }

        .nav-menu a.completed::after {
            content: 'âœ“';
            margin-left: auto;
            font-size: 0.8rem;
        }

        .nav-icon {
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-card);
            border-radius: var(--radius-sm);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            font-weight: 600;
            flex-shrink: 0;
        }

        .nav-menu a.active .nav-icon {
            background: rgba(0, 0, 0, 0.2);
        }

        .nav-section {
            margin-top: var(--space-xl);
            padding-top: var(--space-lg);
            border-top: 1px solid var(--border-subtle);
        }

        /* ========================================
           PAGE CONTAINER
           ======================================== */
        .page {
            display: none;
            min-height: 100vh;
            padding-top: 64px;
        }

        .page.active {
            display: block;
        }

        /* ========================================
           SECTION STYLES
           ======================================== */
        .section {
            padding: var(--space-3xl) var(--space-xl);
            position: relative;
        }

        .section-container {
            max-width: 1140px;
            margin: 0 auto;
        }

        .section-narrow {
            max-width: 800px;
            margin: 0 auto;
        }

        /* Section Tag */
        .section-tag {
            display: inline-flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-sm) var(--space-md);
            background: rgba(204, 85, 0, 0.15);
            border-left: 3px solid var(--accent-orange);
            color: var(--accent-orange);
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
            font-size: 0.8rem;
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-bottom: var(--space-md);
        }

        .section-title {
            margin-bottom: var(--space-md);
        }

        .section-intro {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: var(--space-xl);
            max-width: 700px;
            line-height: 1.8;
        }

        /* ========================================
           BUTTONS
           ======================================== */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            padding: var(--space-md) var(--space-xl);
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            letter-spacing: 1px;
            text-transform: uppercase;
            border: none;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all var(--transition-base);
            text-decoration: none;
        }

        .btn-primary {
            background: var(--accent-orange);
            color: var(--text-heading);
            box-shadow: 0 4px 15px var(--glow-orange);
        }

        .btn-primary:hover {
            background: var(--accent-orange-light);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px var(--glow-orange);
            color: var(--text-heading);
        }

        .btn-secondary {
            background: transparent;
            color: var(--accent-blue);
            border: 2px solid var(--accent-blue);
        }

        .btn-secondary:hover {
            background: var(--accent-blue);
            color: var(--bg-primary);
        }

        .btn-ghost {
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-secondary);
            border: 1px solid var(--border-subtle);
        }

        .btn-ghost:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            border-color: var(--border-medium);
        }

        .btn-icon {
            font-size: 1.2rem;
        }

        /* ========================================
           CARDS
           ======================================== */
        .card {
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            transition: all var(--transition-base);
        }

        .card:hover {
            border-color: var(--border-medium);
            transform: translateY(-2px);
        }

        .card-accent-orange {
            border-left: 4px solid var(--accent-orange);
        }

        .card-accent-blue {
            border-left: 4px solid var(--accent-blue);
        }

        .card-accent-green {
            border-left: 4px solid var(--accent-green);
        }

        /* ========================================
           REGULATORY CALLOUTS
           ======================================== */
        .regulatory-callout {
            background: linear-gradient(135deg, rgba(204, 85, 0, 0.1), rgba(204, 85, 0, 0.05));
            border: 1px solid rgba(204, 85, 0, 0.25);
            border-left: 4px solid var(--accent-orange);
            border-radius: var(--radius-md);
            padding: var(--space-lg);
            margin: var(--space-xl) 0;
            display: flex;
            gap: var(--space-md);
            align-items: flex-start;
        }

        .regulatory-callout .reg-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(204, 85, 0, 0.15);
            border-radius: var(--radius-sm);
        }

        .regulatory-callout .reg-content h4 {
            font-family: 'Rajdhani', sans-serif;
            font-size: 1rem;
            color: var(--accent-orange);
            margin-bottom: var(--space-sm);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .regulatory-callout .reg-content p {
            font-size: 0.95rem;
            color: var(--text-primary);
            margin-bottom: var(--space-sm);
            line-height: 1.7;
        }

        .regulatory-callout .reg-content p:last-child {
            margin-bottom: 0;
        }

        .reg-reference {
            display: inline-block;
            background: rgba(204, 85, 0, 0.15);
            color: var(--accent-orange);
            padding: 0.15rem 0.5rem;
            border-radius: var(--radius-sm);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            font-weight: 500;
        }

        /* ========================================
           QUOTE BOX
           ======================================== */
        .quote-box {
            background: var(--bg-card);
            border-left: 4px solid var(--accent-blue);
            padding: var(--space-xl);
            margin: var(--space-xl) 0;
            border-radius: 0 var(--radius-md) var(--radius-md) 0;
            position: relative;
        }

        .quote-box::before {
            content: '"';
            position: absolute;
            top: -10px;
            left: 20px;
            font-size: 4rem;
            color: var(--accent-blue);
            opacity: 0.3;
            font-family: Georgia, serif;
            line-height: 1;
        }

        .quote-box p {
            font-size: 1.15rem;
            color: var(--text-primary);
            font-style: italic;
            margin: 0;
            position: relative;
            z-index: 1;
        }

        .quote-box .attribution {
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-style: normal;
            margin-top: var(--space-md);
        }

        /* ========================================
           UTILITY CLASSES
           ======================================== */
        .text-center { text-align: center; }
        .text-left { text-align: left; }
        .text-right { text-align: right; }

        .text-orange { color: var(--accent-orange); }
        .text-blue { color: var(--accent-blue); }
        .text-green { color: var(--accent-green); }
        .text-danger { color: var(--color-danger); }
        .text-muted { color: var(--text-muted); }

        .mt-0 { margin-top: 0; }
        .mt-1 { margin-top: var(--space-md); }
        .mt-2 { margin-top: var(--space-xl); }
        .mt-3 { margin-top: var(--space-2xl); }

        .mb-0 { margin-bottom: 0; }
        .mb-1 { margin-bottom: var(--space-md); }
        .mb-2 { margin-bottom: var(--space-xl); }
        .mb-3 { margin-bottom: var(--space-2xl); }

        .hidden { display: none !important; }
        .visible { display: block; }

        /* ========================================
           ANIMATIONS
           ======================================== */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 20px var(--glow-orange); }
            50% { box-shadow: 0 0 40px var(--glow-orange), 0 0 60px var(--glow-orange); }
        }

        .animate-fade-in {
            animation: fadeIn 0.6s ease forwards;
        }

        .animate-fade-in-up {
            animation: fadeInUp 0.6s ease forwards;
        }

        .animate-scale-in {
            animation: scaleIn 0.5s ease forwards;
        }

        /* Stagger animations */
        .stagger-1 { animation-delay: 0.1s; }
        .stagger-2 { animation-delay: 0.2s; }
        .stagger-3 { animation-delay: 0.3s; }
        .stagger-4 { animation-delay: 0.4s; }
        .stagger-5 { animation-delay: 0.5s; }
        .stagger-6 { animation-delay: 0.6s; }

        /* ========================================
           RESPONSIVE BREAKPOINTS
           ======================================== */
        @media (max-width: 1024px) {
            .section {
                padding: var(--space-2xl) var(--space-lg);
            }
        }

        @media (max-width: 768px) {
            .fixed-header {
                padding: 0 var(--space-md);
            }

            .header-title {
                display: none;
            }

            .header-divider {
                display: none;
            }

            .progress-track {
                width: 100px;
            }

            .section {
                padding: var(--space-xl) var(--space-md);
            }

            .btn {
                padding: var(--space-md) var(--space-lg);
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            html {
                font-size: 15px;
            }

            .progress-track {
                width: 80px;
            }

            .progress-text {
                display: none;
            }

            .nav-menu {
                width: 100%;
                max-width: 100%;
            }
        }

        /* ========================================
           PLACEHOLDER CONTENT STYLES
           (Will be expanded in subsequent steps)
           ======================================== */
        .page-placeholder {
            min-height: calc(100vh - 64px);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: var(--space-xl);
        }

        .page-placeholder h2 {
            color: var(--text-muted);
            margin-bottom: var(--space-md);
        }

        .page-placeholder p {
            color: var(--text-muted);
            opacity: 0.7;
        }

        .page-number {
            font-family: 'JetBrains Mono', monospace;
            font-size: 4rem;
            font-weight: 700;
            color: var(--bg-card);
            margin-bottom: var(--space-lg);
        }

        /* ========================================
           SCREEN 1: OPENING HOOK
           ======================================== */
        .hook-screen {
            min-height: calc(100vh - 64px);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: var(--space-xl);
            position: relative;
            overflow: hidden;
        }

        .hook-bg {
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, var(--bg-darker) 0%, var(--bg-primary) 50%, var(--bg-secondary) 100%);
            z-index: 0;
        }

        .hook-grid {
            position: absolute;
            inset: 0;
            background-image: 
                linear-gradient(rgba(155, 171, 194, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(155, 171, 194, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            mask-image: radial-gradient(ellipse at center, black 0%, transparent 70%);
            -webkit-mask-image: radial-gradient(ellipse at center, black 0%, transparent 70%);
        }

        .hook-glow {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.4;
        }

        .hook-glow-1 {
            width: 400px;
            height: 400px;
            background: var(--accent-orange);
            top: 10%;
            left: 10%;
            animation: float 8s ease-in-out infinite;
        }

        .hook-glow-2 {
            width: 300px;
            height: 300px;
            background: var(--color-danger);
            bottom: 20%;
            right: 15%;
            animation: float 10s ease-in-out infinite reverse;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(30px, -30px); }
        }

        .hook-content {
            position: relative;
            z-index: 1;
            max-width: 900px;
            width: 100%;
            text-align: center;
        }

        /* Hook Tag */
        .hook-tag {
            display: inline-flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-sm) var(--space-lg);
            background: rgba(229, 69, 69, 0.15);
            border: 1px solid rgba(229, 69, 69, 0.3);
            border-radius: var(--radius-xl);
            color: var(--color-danger);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            font-weight: 600;
            letter-spacing: 2px;
            margin-bottom: var(--space-lg);
        }

        .hook-tag-icon {
            font-size: 1rem;
            animation: pulse 2s ease-in-out infinite;
        }

        /* Hook Headline */
        .hook-headline {
            font-size: clamp(1.75rem, 4.5vw, 3rem);
            font-weight: 600;
            line-height: 1.3;
            margin-bottom: var(--space-2xl);
            color: var(--text-primary);
        }

        .hook-highlight {
            display: inline-block;
            color: var(--color-danger);
            position: relative;
        }

        .hook-highlight::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--color-danger);
            border-radius: 2px;
        }

        /* Case Study Cards */
        .hook-cases {
            display: flex;
            align-items: stretch;
            gap: var(--space-lg);
            margin-bottom: var(--space-2xl);
        }

        .case-card {
            flex: 1;
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            text-align: left;
            position: relative;
            overflow: hidden;
        }

        .case-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--color-danger);
        }

        .case-year {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--text-muted);
            letter-spacing: 1px;
            margin-bottom: var(--space-xs);
        }

        .case-name {
            font-family: 'Rajdhani', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-heading);
            margin-bottom: var(--space-md);
        }

        .case-detail {
            display: flex;
            align-items: flex-start;
            gap: var(--space-sm);
            font-size: 0.95rem;
            color: var(--text-secondary);
            margin-bottom: var(--space-md);
            line-height: 1.5;
        }

        .case-icon {
            flex-shrink: 0;
            font-size: 1.1rem;
        }

        .case-fact {
            font-size: 0.85rem;
            color: var(--text-muted);
            padding: var(--space-md);
            background: rgba(0, 0, 0, 0.2);
            border-radius: var(--radius-md);
            border-left: 3px solid var(--color-danger);
            line-height: 1.6;
        }

        .case-fact em {
            color: var(--color-danger);
            font-style: normal;
            font-weight: 500;
        }

        /* Case Divider */
        .case-divider {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: var(--space-md);
        }

        .divider-line {
            width: 2px;
            height: 40px;
            background: linear-gradient(to bottom, transparent, var(--border-medium), transparent);
        }

        .divider-icon {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-card);
            border-radius: 50%;
            color: var(--text-muted);
            font-weight: 600;
            margin: var(--space-sm) 0;
        }

        /* The Reveal */
        .hook-reveal {
            margin-bottom: var(--space-2xl);
        }

        .reveal-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--text-muted);
            letter-spacing: 3px;
            text-transform: uppercase;
            margin-bottom: var(--space-sm);
        }

        .reveal-text {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: var(--space-sm);
        }

        .reveal-word {
            font-family: 'Rajdhani', sans-serif;
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            font-weight: 700;
            color: var(--text-heading);
            padding: var(--space-xs) var(--space-md);
            background: var(--bg-card);
            border-radius: var(--radius-sm);
        }

        .reveal-word.reveal-highlight {
            background: var(--color-danger);
            color: white;
        }

        /* Hook Message */
        .hook-message {
            max-width: 600px;
            margin: 0 auto var(--space-2xl);
        }

        .hook-message p {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: var(--space-sm);
        }

        .hook-message strong {
            color: var(--text-heading);
        }

        /* Challenge Box */
        .hook-challenge {
            margin-bottom: var(--space-2xl);
        }

        .challenge-box {
            display: inline-flex;
            align-items: center;
            gap: var(--space-lg);
            padding: var(--space-lg) var(--space-xl);
            background: linear-gradient(135deg, rgba(204, 85, 0, 0.15), rgba(204, 85, 0, 0.05));
            border: 1px solid rgba(204, 85, 0, 0.3);
            border-radius: var(--radius-lg);
        }

        .challenge-icon {
            font-size: 2rem;
        }

        .challenge-text {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0 var(--space-md);
            border-right: 1px solid var(--border-subtle);
        }

        .challenge-number {
            font-family: 'JetBrains Mono', monospace;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--accent-orange);
            line-height: 1;
        }

        .challenge-label {
            font-size: 0.8rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .challenge-message {
            font-size: 0.95rem;
            color: var(--text-secondary);
            max-width: 300px;
            text-align: left;
            padding-left: var(--space-md);
        }

        /* Philosophy Quote */
        .hook-philosophy {
            max-width: 700px;
            margin: 0 auto var(--space-2xl);
            padding: var(--space-xl);
            background: var(--bg-elevated);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-subtle);
        }

        .philosophy-quote {
            font-size: 1.15rem;
            color: var(--text-primary);
            font-style: italic;
            line-height: 1.7;
            margin: 0 0 var(--space-lg);
            padding-left: var(--space-lg);
            border-left: 3px solid var(--accent-blue);
        }

        .philosophy-mission {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin: 0;
        }

        /* Hook Action */
        .hook-action {
            margin-top: var(--space-lg);
        }

        .btn-lg {
            padding: var(--space-lg) var(--space-2xl);
            font-size: 1.1rem;
        }

        /* Animation on load */
        .animate-on-load {
            opacity: 0;
            transform: translateY(20px);
        }

        .animate-on-load.animated {
            animation: fadeInUp 0.8s ease forwards;
        }

        /* ========================================
           SCREEN 2: REGULATORY FRAMEWORK
           ======================================== */
        .section-header {
            text-align: center;
            margin-bottom: var(--space-3xl);
        }

        /* Three Pillars Grid */
        .reg-pillars {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-xl);
            margin-bottom: var(--space-3xl);
        }

        .reg-pillar {
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .pillar-header {
            padding: var(--space-xl);
            background: var(--bg-card);
            text-align: center;
            border-bottom: 1px solid var(--border-subtle);
        }

        .pillar-icon {
            font-size: 2rem;
            margin-bottom: var(--space-sm);
        }

        .pillar-header h3 {
            font-size: 1.1rem;
            margin-bottom: var(--space-sm);
        }

        .pillar-badge {
            display: inline-block;
            padding: var(--space-xs) var(--space-md);
            background: rgba(146, 208, 80, 0.15);
            color: var(--accent-green);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            font-weight: 600;
            border-radius: var(--radius-sm);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .pillar-badge-orange {
            background: rgba(204, 85, 0, 0.15);
            color: var(--accent-orange);
        }

        .pillar-badge-blue {
            background: rgba(0, 176, 240, 0.15);
            color: var(--accent-blue);
        }

        .pillar-content {
            padding: var(--space-xl);
            flex: 1;
        }

        .pillar-item {
            display: flex;
            gap: var(--space-md);
            margin-bottom: var(--space-lg);
            padding: var(--space-md);
            background: rgba(0, 0, 0, 0.15);
            border-radius: var(--radius-md);
        }

        .pillar-item-highlight {
            background: rgba(229, 69, 69, 0.1);
            border: 1px solid rgba(229, 69, 69, 0.2);
        }

        .item-code {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--accent-blue);
            background: rgba(0, 176, 240, 0.15);
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius-sm);
            flex-shrink: 0;
            height: fit-content;
        }

        .item-icon {
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .item-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .pillar-principle {
            display: flex;
            gap: var(--space-md);
            padding: var(--space-md);
            background: linear-gradient(135deg, rgba(0, 176, 240, 0.1), rgba(0, 176, 240, 0.05));
            border: 1px solid rgba(0, 176, 240, 0.2);
            border-radius: var(--radius-md);
            margin-top: auto;
        }

        .principle-icon {
            font-size: 1.2rem;
        }

        .principle-text {
            font-size: 0.85rem;
            color: var(--text-primary);
            line-height: 1.6;
        }

        .pillar-definition {
            text-align: center;
            margin-bottom: var(--space-lg);
            padding-bottom: var(--space-lg);
            border-bottom: 1px solid var(--border-subtle);
        }

        .def-term {
            font-family: 'Rajdhani', sans-serif;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: var(--space-sm);
        }

        .def-meaning {
            font-size: 0.95rem;
            color: var(--text-primary);
            line-height: 1.6;
        }

        .pillar-test {
            text-align: center;
            padding: var(--space-lg);
            background: rgba(204, 85, 0, 0.1);
            border: 1px solid rgba(204, 85, 0, 0.2);
            border-radius: var(--radius-md);
            margin-top: auto;
        }

        .test-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: var(--space-sm);
        }

        .test-question {
            font-family: 'Rajdhani', sans-serif;
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-heading);
            margin-bottom: var(--space-xs);
        }

        .test-not {
            font-size: 0.85rem;
            color: var(--text-muted);
            font-style: italic;
        }

        .pillar-req {
            text-align: center;
            margin-bottom: var(--space-lg);
        }

        .req-number {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: var(--accent-blue);
            letter-spacing: 1px;
        }

        .req-title {
            font-family: 'Rajdhani', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-heading);
        }

        .pillar-quote {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-style: italic;
            line-height: 1.7;
            padding: var(--space-md);
            background: rgba(0, 0, 0, 0.2);
            border-left: 3px solid var(--accent-blue);
            border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
            margin: 0 0 var(--space-lg);
        }

        .pillar-footer {
            padding: var(--space-md) var(--space-xl);
            background: rgba(0, 0, 0, 0.2);
            display: flex;
            gap: var(--space-sm);
            flex-wrap: wrap;
        }

        /* Summary Section */
        .reg-summary {
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            margin-bottom: var(--space-2xl);
        }

        .summary-title {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: 1.1rem;
            margin-bottom: var(--space-lg);
        }

        .summary-icon {
            font-size: 1.3rem;
        }

        .summary-table {
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-md);
            overflow: hidden;
        }

        .summary-row {
            display: grid;
            grid-template-columns: 180px 1fr;
            border-bottom: 1px solid var(--border-subtle);
        }

        .summary-row:last-child {
            border-bottom: none;
        }

        .summary-row.summary-header {
            background: var(--bg-card);
        }

        .summary-row.summary-header .summary-cell {
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
            color: var(--text-heading);
            font-size: 0.9rem;
        }

        .summary-cell {
            padding: var(--space-md) var(--space-lg);
            font-size: 0.9rem;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
        }

        .summary-cell:first-child {
            border-right: 1px solid var(--border-subtle);
            background: rgba(0, 0, 0, 0.1);
        }

        /* TAGs Reference */
        .reg-tags {
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            margin-bottom: var(--space-2xl);
        }

        .tags-header {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-family: 'Rajdhani', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-heading);
            margin-bottom: var(--space-lg);
        }

        .tags-icon {
            font-size: 1.2rem;
        }

        .tags-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-md);
        }

        .tag-item {
            display: flex;
            flex-direction: column;
            gap: var(--space-xs);
            padding: var(--space-md);
            background: rgba(0, 0, 0, 0.2);
            border-radius: var(--radius-md);
            border-left: 3px solid var(--accent-blue);
        }

        .tag-ref {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--accent-blue);
        }

        .tag-title {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* Section Navigation */
        .section-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: var(--space-xl);
            border-top: 1px solid var(--border-subtle);
        }

        /* Animation on scroll */
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s ease;
        }

        .animate-on-scroll.animated {
            opacity: 1;
            transform: translateY(0);
        }

        /* ========================================
           RESPONSIVE: SCREENS 1 & 2
           ======================================== */
        @media (max-width: 1024px) {
            .reg-pillars {
                grid-template-columns: 1fr;
                gap: var(--space-lg);
            }
        }

        @media (max-width: 768px) {
            .hook-cases {
                flex-direction: column;
            }

            .case-divider {
                flex-direction: row;
                padding: var(--space-sm);
            }

            .divider-line {
                width: 40px;
                height: 2px;
            }

            .challenge-box {
                flex-direction: column;
                text-align: center;
            }

            .challenge-text {
                border-right: none;
                border-bottom: 1px solid var(--border-subtle);
                padding-bottom: var(--space-md);
            }

            .challenge-message {
                padding-left: 0;
                text-align: center;
                max-width: none;
            }

            .summary-row {
                grid-template-columns: 1fr;
            }

            .summary-cell:first-child {
                border-right: none;
                border-bottom: 1px solid var(--border-subtle);
            }

            .section-nav {
                flex-direction: column;
                gap: var(--space-md);
            }

            .section-nav .btn {
                width: 100%;
            }
        }

        /* ========================================
           SCREEN 3: ALARP TRIANGLE
           ======================================== */
        .alarp-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-2xl);
            align-items: start;
            margin-bottom: var(--space-3xl);
        }

        .alarp-triangle-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .alarp-triangle {
            width: 100%;
            max-width: 400px;
            height: auto;
        }

        .alarp-zone {
            cursor: pointer;
            transition: all 0.3s ease;
            filter: brightness(1);
        }

        .alarp-zone:hover {
            filter: brightness(1.15);
            transform-origin: center;
        }

        .alarp-zone.active {
            filter: brightness(1.2) drop-shadow(0 0 15px currentColor);
        }

        .zone-label {
            font-family: 'Rajdhani', sans-serif;
            font-size: 14px;
            font-weight: 700;
            fill: white;
            pointer-events: none;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }

        .zone-label-dark {
            fill: rgba(0, 0, 0, 0.8);
            text-shadow: none;
        }

        .zone-sublabel {
            font-family: 'Inter', sans-serif;
            font-size: 11px;
            fill: rgba(0, 0, 0, 0.6);
            pointer-events: none;
        }

        .axis-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 10px;
            fill: rgba(255, 255, 255, 0.5);
            letter-spacing: 1px;
        }

        .triangle-instruction {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            margin-top: var(--space-lg);
            padding: var(--space-sm) var(--space-md);
            background: var(--bg-card);
            border-radius: var(--radius-md);
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .instruction-icon {
            font-size: 1.1rem;
        }

        /* Zone Detail Panels */
        .alarp-details {
            position: relative;
        }

        .zone-detail {
            display: none;
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            animation: fadeIn 0.3s ease;
        }

        .zone-detail.active {
            display: block;
        }

        .zone-detail-default {
            text-align: center;
            color: var(--text-muted);
        }

        .zone-detail-default .detail-icon {
            font-size: 3rem;
            margin-bottom: var(--space-md);
            opacity: 0.3;
        }

        .detail-header {
            margin-bottom: var(--space-lg);
        }

        .detail-badge {
            display: inline-block;
            padding: var(--space-sm) var(--space-lg);
            font-family: 'Rajdhani', sans-serif;
            font-weight: 700;
            font-size: 0.9rem;
            letter-spacing: 1px;
            border-radius: var(--radius-sm);
        }

        .badge-danger {
            background: var(--color-danger);
            color: white;
        }

        .badge-warning {
            background: var(--color-warning);
            color: var(--bg-primary);
        }

        .badge-success {
            background: var(--color-success);
            color: var(--bg-primary);
        }

        .detail-main {
            font-size: 1.1rem;
            color: var(--text-primary);
            margin-bottom: var(--space-lg);
            line-height: 1.7;
        }

        .detail-box {
            display: flex;
            gap: var(--space-md);
            padding: var(--space-lg);
            background: rgba(0, 0, 0, 0.2);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-lg);
        }

        .box-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .box-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .detail-example {
            padding: var(--space-md);
            background: rgba(229, 69, 69, 0.1);
            border-left: 3px solid var(--color-danger);
            border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
        }

        .example-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--color-danger);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: var(--space-xs);
        }

        .detail-example p {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin: 0;
            line-height: 1.6;
        }

        .detail-checklist {
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
        }

        .check-item {
            display: flex;
            align-items: flex-start;
            gap: var(--space-sm);
            padding: var(--space-sm) var(--space-md);
            background: rgba(240, 165, 0, 0.1);
            border-radius: var(--radius-sm);
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .check-icon {
            color: var(--color-warning);
            font-weight: 600;
        }

        .detail-note {
            display: flex;
            gap: var(--space-sm);
            padding: var(--space-md);
            background: rgba(146, 208, 80, 0.1);
            border-radius: var(--radius-md);
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .note-icon {
            flex-shrink: 0;
        }

        /* Gross Disproportion */
        .gross-disproportion {
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            margin-bottom: var(--space-2xl);
        }

        .gd-header {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            margin-bottom: var(--space-lg);
        }

        .gd-icon {
            font-size: 1.5rem;
        }

        .gd-header h3 {
            font-size: 1.25rem;
            margin: 0;
        }

        .gd-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-xl);
            align-items: center;
        }

        .gd-main {
            font-size: 1rem;
            color: var(--text-secondary);
            line-height: 1.7;
        }

        .gd-scale {
            text-align: center;
        }

        .scale-label {
            font-family: 'Rajdhani', sans-serif;
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: var(--space-sm);
        }

        .scale-bar {
            display: flex;
            border-radius: var(--radius-md);
            overflow: hidden;
            margin-bottom: var(--space-sm);
        }

        .scale-segment {
            flex: 1;
            padding: var(--space-md);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-xs);
        }

        .scale-low {
            background: var(--color-success);
            color: var(--bg-primary);
        }

        .scale-medium {
            background: var(--color-warning);
            color: var(--bg-primary);
        }

        .scale-high {
            background: var(--color-danger);
            color: white;
        }

        .segment-label {
            font-size: 0.75rem;
            font-weight: 500;
        }

        .segment-ratio {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1rem;
            font-weight: 700;
        }

        .scale-note {
            font-size: 0.85rem;
            color: var(--text-muted);
            font-style: italic;
        }

        /* ALARP Flowchart */
        .alarp-flowchart {
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            margin-bottom: var(--space-2xl);
        }

        .flowchart-title {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: 1.1rem;
            margin-bottom: var(--space-xl);
        }

        .flowchart-icon {
            font-size: 1.2rem;
        }

        .flowchart-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-sm);
        }

        .flow-step {
            display: flex;
            align-items: center;
            gap: var(--space-lg);
            width: 100%;
            max-width: 500px;
            padding: var(--space-md) var(--space-lg);
            background: var(--bg-card);
            border-radius: var(--radius-md);
            border: 1px solid var(--border-subtle);
        }

        .flow-step-final {
            background: linear-gradient(135deg, rgba(146, 208, 80, 0.15), rgba(0, 176, 240, 0.15));
            border-color: var(--accent-green);
        }

        .step-number {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--accent-blue);
            color: var(--bg-primary);
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
        }

        .step-question {
            font-family: 'Rajdhani', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-heading);
            margin-bottom: var(--space-xs);
        }

        .step-action {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .step-branch {
            display: flex;
            gap: var(--space-md);
            font-size: 0.85rem;
        }

        .branch-yes {
            color: var(--accent-green);
        }

        .branch-no {
            color: var(--text-muted);
        }

        .step-outcome {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
        }

        .outcome-implement {
            padding: var(--space-xs) var(--space-md);
            background: var(--accent-green);
            color: var(--bg-primary);
            border-radius: var(--radius-sm);
        }

        .outcome-or {
            color: var(--text-muted);
            font-weight: 400;
        }

        .outcome-justify {
            padding: var(--space-xs) var(--space-md);
            background: var(--accent-orange);
            color: white;
            border-radius: var(--radius-sm);
        }

        .flow-arrow {
            font-size: 1.5rem;
            color: var(--text-muted);
            line-height: 1;
        }

        /* ========================================
           SCREEN 4: DESIGN VS OPERATIONAL HF
           ======================================== */
        .hf-comparison {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: var(--space-lg);
            margin-bottom: var(--space-3xl);
        }

        .hf-column {
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .hf-column-header {
            padding: var(--space-xl);
            background: var(--bg-card);
            text-align: center;
            border-bottom: 1px solid var(--border-subtle);
        }

        .hf-header-design {
            background: linear-gradient(135deg, rgba(204, 85, 0, 0.2), rgba(204, 85, 0, 0.1));
            border-bottom-color: var(--accent-orange);
        }

        .hf-icon {
            font-size: 2.5rem;
            margin-bottom: var(--space-sm);
        }

        .hf-column-header h3 {
            font-size: 1.2rem;
            margin-bottom: var(--space-xs);
        }

        .hf-subtitle {
            font-size: 0.9rem;
            color: var(--text-muted);
            font-style: italic;
        }

        .hf-badge {
            display: inline-block;
            margin-top: var(--space-sm);
            padding: var(--space-xs) var(--space-md);
            background: var(--accent-orange);
            color: white;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            font-weight: 600;
            letter-spacing: 1px;
            border-radius: var(--radius-sm);
        }

        .hf-column-content {
            padding: var(--space-xl);
            flex: 1;
        }

        .hf-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
            margin-bottom: var(--space-xl);
        }

        .hf-list li {
            display: flex;
            align-items: flex-start;
            gap: var(--space-md);
            padding: var(--space-md);
            background: rgba(0, 0, 0, 0.15);
            border-radius: var(--radius-md);
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .list-icon {
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .hf-relevance {
            padding-top: var(--space-lg);
            border-top: 1px solid var(--border-subtle);
        }

        .relevance-label {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: var(--space-sm);
        }

        .relevance-tags {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-sm);
        }

        .relevance-tag {
            padding: var(--space-xs) var(--space-md);
            background: var(--bg-card);
            border-radius: var(--radius-sm);
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .relevance-tag.tag-highlight {
            background: rgba(204, 85, 0, 0.2);
            color: var(--accent-orange);
            border: 1px solid rgba(204, 85, 0, 0.3);
        }

        .hf-column-footer {
            padding: var(--space-md) var(--space-lg);
            background: rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .hf-footer-design {
            background: rgba(229, 69, 69, 0.15);
            color: var(--color-danger);
        }

        .footer-icon {
            font-size: 1rem;
        }

        /* VS Divider */
        .hf-divider {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: var(--space-xl) 0;
        }

        .divider-line-v {
            width: 2px;
            height: 60px;
            background: linear-gradient(to bottom, transparent, var(--border-medium), transparent);
        }

        .divider-vs {
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-card);
            border: 2px solid var(--border-medium);
            border-radius: 50%;
            font-family: 'Rajdhani', sans-serif;
            font-weight: 700;
            color: var(--text-muted);
            margin: var(--space-md) 0;
        }

        /* Central Message */
        .hf-central-message {
            margin-bottom: var(--space-3xl);
        }

        .message-container {
            background: linear-gradient(135deg, var(--bg-elevated), var(--bg-card));
            border: 2px solid var(--accent-blue);
            border-radius: var(--radius-xl);
            padding: var(--space-2xl) var(--space-3xl);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .message-container::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(ellipse at center, rgba(0, 176, 240, 0.1), transparent 70%);
            pointer-events: none;
        }

        .message-quote {
            font-family: 'Rajdhani', sans-serif;
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            font-weight: 700;
            color: var(--text-heading);
            margin-bottom: var(--space-lg);
            position: relative;
        }

        .quote-mark {
            color: var(--accent-blue);
            opacity: 0.5;
        }

        .message-example {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: var(--space-xl);
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }

        .message-mission {
            font-size: 1.2rem;
            color: var(--text-primary);
        }

        .highlight-green {
            color: var(--accent-green);
            font-weight: 600;
        }

        /* Error Prevention Hierarchy */
        .hf-hierarchy {
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            margin-bottom: var(--space-2xl);
        }

        .hierarchy-title {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: 1.1rem;
            margin-bottom: var(--space-xl);
        }

        .hierarchy-icon {
            font-size: 1.2rem;
        }

        .hierarchy-container {
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
        }

        .hierarchy-level {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-md) var(--space-lg);
            border-radius: var(--radius-md);
            border-left: 4px solid;
        }

        .level-best {
            background: rgba(146, 208, 80, 0.15);
            border-color: var(--accent-green);
        }

        .level-good {
            background: rgba(146, 208, 80, 0.1);
            border-color: rgba(146, 208, 80, 0.7);
        }

        .level-okay {
            background: rgba(240, 165, 0, 0.1);
            border-color: var(--color-warning);
        }

        .level-weak {
            background: rgba(229, 69, 69, 0.08);
            border-color: rgba(229, 69, 69, 0.5);
        }

        .level-worst {
            background: rgba(229, 69, 69, 0.15);
            border-color: var(--color-danger);
        }

        .level-rank {
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
            font-size: 0.85rem;
            color: var(--text-primary);
            flex-shrink: 0;
        }

        .level-content {
            flex: 1;
        }

        .level-name {
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
            color: var(--text-heading);
            font-size: 0.95rem;
        }

        .level-desc {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .level-type {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--text-muted);
            padding: var(--space-xs) var(--space-sm);
            background: rgba(0, 0, 0, 0.2);
            border-radius: var(--radius-sm);
        }

        .hierarchy-note {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            margin-top: var(--space-lg);
            padding: var(--space-md);
            background: rgba(0, 176, 240, 0.1);
            border-radius: var(--radius-md);
            font-size: 0.9rem;
            color: var(--accent-blue);
        }

        .reg-implication {
            font-size: 0.9rem;
            color: var(--text-muted);
            font-style: italic;
            margin-top: var(--space-md);
            padding-top: var(--space-md);
            border-top: 1px solid var(--border-subtle);
        }

        /* ========================================
           RESPONSIVE: SCREENS 3 & 4
           ======================================== */
        @media (max-width: 1024px) {
            .alarp-container {
                grid-template-columns: 1fr;
            }

            .alarp-triangle-wrapper {
                order: 1;
            }

            .alarp-details {
                order: 2;
            }

            .gd-content {
                grid-template-columns: 1fr;
            }

            .hf-comparison {
                grid-template-columns: 1fr;
            }

            .hf-divider {
                flex-direction: row;
                padding: var(--space-md) 0;
            }

            .divider-line-v {
                width: 60px;
                height: 2px;
            }
        }

        @media (max-width: 768px) {
            .flow-step {
                flex-direction: column;
                text-align: center;
                gap: var(--space-sm);
            }

            .step-branch {
                justify-content: center;
            }

            .message-container {
                padding: var(--space-xl);
            }

            .hierarchy-level {
                flex-wrap: wrap;
            }

            .level-type {
                width: 100%;
                text-align: center;
                margin-top: var(--space-sm);
            }
        }

        /* ========================================
           SCREEN 5: PHYSICAL ERGONOMICS
           ======================================== */
        .ergo-container {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: var(--space-2xl);
            align-items: start;
            margin-bottom: var(--space-3xl);
        }

        .body-diagram-wrapper {
            display: flex;
            gap: var(--space-lg);
        }

        .body-diagram {
            position: relative;
            width: 200px;
            flex-shrink: 0;
        }

        .body-svg {
            width: 100%;
            height: auto;
        }

        .body-part {
            transition: fill 0.3s ease;
        }

        .hotspot {
            cursor: pointer;
            stroke: var(--accent-blue);
            stroke-width: 2;
            stroke-dasharray: 5,3;
            opacity: 0.6;
            transition: all 0.3s ease;
        }

        .hotspot:hover {
            opacity: 1;
            stroke-width: 3;
            fill: rgba(0, 176, 240, 0.2);
        }

        .hotspot.active {
            opacity: 1;
            stroke: var(--accent-green);
            fill: rgba(146, 208, 80, 0.2);
        }

        .hotspot-indicator {
            position: absolute;
            transform: translate(-50%, -50%);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            cursor: pointer;
            z-index: 10;
        }

        .indicator-dot {
            width: 12px;
            height: 12px;
            background: var(--accent-blue);
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
            box-shadow: 0 0 10px var(--glow-blue);
        }

        .indicator-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            white-space: nowrap;
            background: var(--bg-elevated);
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius-sm);
            opacity: 0;
            transform: translateX(-10px);
            transition: all 0.3s ease;
        }

        .hotspot-indicator:hover .indicator-label {
            opacity: 1;
            transform: translateX(0);
        }

        .hotspot-indicator:hover .indicator-dot {
            background: var(--accent-green);
            box-shadow: 0 0 15px var(--glow-green);
        }

        /* Height Reference */
        .height-reference {
            position: relative;
            width: 80px;
            height: 320px;
        }

        .height-bar {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(to bottom, var(--text-muted), var(--border-subtle));
            border-radius: 2px;
        }

        .height-mark {
            position: absolute;
            left: 10px;
            display: flex;
            flex-direction: column;
            padding-left: var(--space-sm);
            border-left: 2px solid var(--accent-blue);
        }

        .mark-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--accent-blue);
        }

        .mark-label {
            font-size: 0.65rem;
            color: var(--text-muted);
        }

        /* Body Details Panel */
        .body-details {
            min-height: auto;
        }

        .body-detail {
            display: none;
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            animation: fadeIn 0.3s ease;
        }

        .body-detail.active {
            display: block;
        }

        .body-detail-default {
            text-align: center;
            padding: var(--space-md);
            background: rgba(0, 176, 240, 0.1);
            border: 1px dashed var(--accent-blue);
        }

        .body-detail-default .detail-icon {
            font-size: 1.5rem;
            margin-right: var(--space-sm);
            display: inline;
        }

        .body-detail-default h4 {
            display: inline;
            font-size: 1rem;
            margin: 0;
        }

        .body-detail-default p {
            color: var(--text-muted);
            margin: var(--space-sm) 0 0 0;
            font-size: 0.85rem;
        }

        .body-detail-default .detail-tip {
            display: none;
        }

        .detail-tip {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-md);
            background: rgba(0, 176, 240, 0.1);
            border-radius: var(--radius-md);
            font-size: 0.85rem;
            color: var(--accent-blue);
        }

        .detail-header {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            margin-bottom: var(--space-lg);
        }

        .detail-emoji {
            font-size: 2rem;
        }

        .detail-header h4 {
            margin: 0;
            font-size: 1.25rem;
        }

        .detail-specs {
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
            margin-bottom: var(--space-lg);
        }

        .spec-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-md);
            background: rgba(0, 0, 0, 0.2);
            border-radius: var(--radius-md);
        }

        .spec-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .spec-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: var(--accent-blue);
            font-weight: 500;
        }

        .detail-rules {
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
        }

        .rule-item {
            display: flex;
            align-items: flex-start;
            gap: var(--space-sm);
            padding: var(--space-sm) var(--space-md);
            border-radius: var(--radius-sm);
            font-size: 0.9rem;
        }

        .rule-do {
            background: rgba(146, 208, 80, 0.1);
            color: var(--text-secondary);
        }

        .rule-do .rule-icon {
            color: var(--accent-green);
        }

        .rule-dont {
            background: rgba(229, 69, 69, 0.1);
            color: var(--text-secondary);
        }

        .rule-dont .rule-icon {
            color: var(--color-danger);
        }

        /* Reach Zones */
        .reach-zones {
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            margin-bottom: var(--space-2xl);
        }

        .reach-title {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: 1.1rem;
            margin-bottom: var(--space-xl);
        }

        .reach-icon {
            font-size: 1.2rem;
        }

        .reach-diagram {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: var(--space-2xl);
            align-items: center;
        }

        .reach-visual {
            position: relative;
            width: 280px;
            height: 280px;
            margin: 0 auto;
        }

        .reach-zone {
            position: absolute;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s ease;
        }

        .reach-zone:hover {
            transform: scale(1.02);
        }

        .zone-max {
            width: 100%;
            height: 100%;
            background: rgba(229, 69, 69, 0.2);
            border: 2px dashed var(--color-danger);
            top: 0;
            left: 0;
        }

        .zone-extended {
            width: 75%;
            height: 75%;
            background: rgba(240, 165, 0, 0.2);
            border: 2px solid var(--color-warning);
            top: 12.5%;
            left: 12.5%;
        }

        .zone-secondary {
            width: 50%;
            height: 50%;
            background: rgba(0, 176, 240, 0.2);
            border: 2px solid var(--accent-blue);
            top: 25%;
            left: 25%;
        }

        .zone-primary {
            width: 30%;
            height: 30%;
            background: rgba(146, 208, 80, 0.3);
            border: 2px solid var(--accent-green);
            top: 35%;
            left: 35%;
        }

        .zone-distance {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--text-primary);
            background: var(--bg-elevated);
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius-sm);
        }

        .reach-person {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2rem;
            z-index: 5;
        }

        .reach-legend {
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
        }

        .legend-item {
            display: flex;
            align-items: flex-start;
            gap: var(--space-md);
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .legend-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        /* Ergo Rules */
        .ergo-rules {
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            margin-bottom: var(--space-2xl);
        }

        .rules-title {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: 1.1rem;
            margin-bottom: var(--space-lg);
        }

        .rules-icon {
            font-size: 1.2rem;
        }

        .rules-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-md);
        }

        .rule-card {
            display: flex;
            gap: var(--space-md);
            padding: var(--space-lg);
            background: var(--bg-card);
            border-radius: var(--radius-md);
            border-left: 4px solid var(--accent-blue);
        }

        .rule-number {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--accent-blue);
            color: var(--bg-primary);
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .rule-headline {
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
            color: var(--text-heading);
            margin-bottom: var(--space-xs);
        }

        .rule-detail {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        /* ========================================
           SCREEN 6: COGNITIVE ERGONOMICS
           ======================================== */
        .cognitive-tabs {
            margin-bottom: var(--space-2xl);
        }

        .tabs-header {
            display: flex;
            gap: var(--space-sm);
            margin-bottom: var(--space-xl);
            border-bottom: 2px solid var(--border-subtle);
            padding-bottom: var(--space-md);
        }

        .tab-btn {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-md) var(--space-lg);
            background: transparent;
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-md) var(--radius-md) 0 0;
            color: var(--text-secondary);
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .tab-btn:hover {
            background: rgba(0, 176, 240, 0.1);
            color: var(--accent-blue);
            border-color: var(--accent-blue);
        }

        .tab-btn.active {
            background: var(--accent-orange);
            color: white;
            border-color: var(--accent-orange);
        }

        .tab-icon {
            font-size: 1.1rem;
        }

        .tabs-content {
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
        }

        .tab-panel {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .tab-panel.active {
            display: block;
        }

        /* Display Comparison */
        .display-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-xl);
            margin-bottom: var(--space-xl);
        }

        .display-example {
            border-radius: var(--radius-md);
            overflow: hidden;
        }

        .display-bad {
            border: 1px solid rgba(229, 69, 69, 0.3);
        }

        .display-good {
            border: 1px solid rgba(146, 208, 80, 0.3);
        }

        .example-header {
            padding: var(--space-md);
            background: var(--bg-card);
        }

        .example-badge {
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
            font-size: 0.85rem;
            padding: var(--space-xs) var(--space-md);
            border-radius: var(--radius-sm);
        }

        .badge-bad {
            background: rgba(229, 69, 69, 0.2);
            color: var(--color-danger);
        }

        .badge-good {
            background: rgba(146, 208, 80, 0.2);
            color: var(--accent-green);
        }

        .example-visual {
            padding: var(--space-lg);
            background: var(--bg-darker);
        }

        .mock-display {
            padding: var(--space-md);
            border-radius: var(--radius-sm);
        }

        .mock-bad {
            background: #1a1a1a;
        }

        .mock-good {
            background: #0a1520;
        }

        .mock-row {
            display: flex;
            gap: var(--space-sm);
            margin-bottom: var(--space-sm);
            flex-wrap: wrap;
        }

        .mock-indicator {
            padding: var(--space-xs) var(--space-sm);
            border-radius: 3px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.65rem;
            color: white;
        }

        .mock-small {
            width: 20px;
            height: 20px;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .mock-section {
            margin-bottom: var(--space-md);
        }

        .mock-section-title {
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-bottom: var(--space-sm);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .mock-item {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .status-green {
            background: var(--accent-green);
            box-shadow: 0 0 6px var(--glow-green);
        }

        .status-amber {
            background: var(--color-warning);
        }

        .example-issues, .example-benefits {
            list-style: none;
            padding: var(--space-md);
        }

        .example-issues li, .example-benefits li {
            display: flex;
            align-items: flex-start;
            gap: var(--space-sm);
            font-size: 0.85rem;
            margin-bottom: var(--space-sm);
            color: var(--text-secondary);
        }

        .issue-icon, .benefit-icon {
            flex-shrink: 0;
        }

        .tmi-callout {
            display: flex;
            gap: var(--space-lg);
            padding: var(--space-lg);
            background: rgba(0, 176, 240, 0.1);
            border: 1px solid rgba(0, 176, 240, 0.2);
            border-radius: var(--radius-md);
        }

        .callout-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .callout-content h5 {
            font-size: 1rem;
            margin-bottom: var(--space-sm);
        }

        .callout-content p {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: var(--space-md);
        }

        .callout-rule {
            font-size: 0.9rem;
            padding: var(--space-sm) var(--space-md);
            background: rgba(0, 0, 0, 0.2);
            border-radius: var(--radius-sm);
        }

        /* Alarm Tab */
        .alarm-problem {
            text-align: center;
            padding: var(--space-xl);
            background: rgba(229, 69, 69, 0.1);
            border: 1px solid rgba(229, 69, 69, 0.2);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-xl);
        }

        .problem-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            margin-bottom: var(--space-md);
        }

        .problem-icon {
            font-size: 1.5rem;
        }

        .problem-quote {
            font-size: 1.1rem;
            color: var(--text-primary);
            font-style: italic;
        }

        .alarm-principles {
            margin-bottom: var(--space-xl);
        }

        .principles-title {
            font-size: 1rem;
            margin-bottom: var(--space-lg);
        }

        .principles-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--space-md);
        }

        .principle-card {
            text-align: center;
            padding: var(--space-lg);
            background: var(--bg-card);
            border-radius: var(--radius-md);
            border-top: 3px solid var(--accent-blue);
        }

        .principle-number {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--accent-blue);
            color: var(--bg-primary);
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
            border-radius: 50%;
            margin: 0 auto var(--space-sm);
        }

        .principle-name {
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
            color: var(--text-heading);
            margin-bottom: var(--space-xs);
        }

        .principle-detail {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        /* Colour Coding */
        .colour-coding {
            margin-bottom: var(--space-xl);
        }

        .coding-title {
            font-size: 1rem;
            margin-bottom: var(--space-lg);
        }

        .colour-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: var(--space-md);
            margin-bottom: var(--space-lg);
        }

        .colour-item {
            text-align: center;
        }

        .colour-swatch {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            margin: 0 auto var(--space-sm);
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .colour-red .colour-swatch { background: #e54545; }
        .colour-amber .colour-swatch { background: #f0a500; }
        .colour-green .colour-swatch { background: #92d050; }
        .colour-blue .colour-swatch { background: #00b0f0; }
        .colour-white .colour-swatch { background: #ffffff; }

        .colour-name {
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
            font-size: 0.85rem;
            color: var(--text-heading);
            margin-bottom: var(--space-xs);
        }

        .colour-meaning {
            font-size: 0.75rem;
            color: var(--text-muted);
            line-height: 1.4;
        }

        .critical-rule {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-md) var(--space-lg);
            background: rgba(229, 69, 69, 0.1);
            border: 1px solid rgba(229, 69, 69, 0.2);
            border-radius: var(--radius-md);
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Workload Tab */
        .workload-concept {
            text-align: center;
            padding: var(--space-xl);
            background: var(--bg-card);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-xl);
        }

        .concept-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            margin-bottom: var(--space-md);
        }

        .concept-icon {
            font-size: 1.5rem;
        }

        .concept-quote {
            font-size: 1.1rem;
            color: var(--text-primary);
            font-style: italic;
        }

        .workload-meter {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: var(--space-xl);
        }

        .meter-visual {
            display: flex;
            gap: var(--space-xl);
            margin-bottom: var(--space-lg);
        }

        .meter-bar {
            width: 80px;
            height: 200px;
            background: var(--bg-darker);
            border-radius: var(--radius-md);
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: flex-end;
        }

        .meter-fill {
            width: 100%;
            border-radius: var(--radius-md);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            padding: var(--space-md);
            text-align: center;
        }

        .meter-normal {
            background: linear-gradient(to top, var(--accent-green), rgba(146, 208, 80, 0.5));
        }

        .meter-abnormal {
            background: linear-gradient(to top, var(--color-warning), rgba(240, 165, 0, 0.5));
        }

        .meter-overload {
            background: linear-gradient(to top, var(--color-danger), rgba(229, 69, 69, 0.5));
        }

        .meter-label {
            font-size: 0.7rem;
            color: var(--bg-primary);
            font-weight: 600;
        }

        .meter-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--bg-primary);
        }

        .meter-annotation {
            text-align: center;
        }

        .annotation-item {
            display: inline-flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-sm) var(--space-lg);
            background: rgba(146, 208, 80, 0.15);
            border: 1px solid rgba(146, 208, 80, 0.3);
            border-radius: var(--radius-md);
            font-size: 0.9rem;
            color: var(--accent-green);
        }

        .workload-factors {
            margin-bottom: var(--space-xl);
        }

        .factors-title {
            font-size: 1rem;
            margin-bottom: var(--space-lg);
        }

        .factors-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-md);
        }

        .factor-item {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-md);
            background: var(--bg-card);
            border-radius: var(--radius-md);
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .factor-icon {
            font-size: 1.2rem;
        }

        .workload-implications {
            background: rgba(0, 176, 240, 0.1);
            border: 1px solid rgba(0, 176, 240, 0.2);
            border-radius: var(--radius-md);
            padding: var(--space-lg);
        }

        .implications-title {
            font-size: 1rem;
            margin-bottom: var(--space-md);
        }

        .implications-list {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-md);
        }

        .implication-item {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .impl-icon {
            font-size: 1.1rem;
        }

        .ref-list {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-sm);
            margin-top: var(--space-md);
        }

        /* ========================================
           RESPONSIVE: SCREENS 5 & 6
           ======================================== */
        @media (max-width: 1024px) {
            .ergo-container {
                grid-template-columns: 1fr;
            }

            .body-diagram-wrapper {
                justify-content: center;
            }

            .rules-grid {
                grid-template-columns: 1fr;
            }

            .reach-diagram {
                grid-template-columns: 1fr;
            }

            .reach-visual {
                margin-bottom: var(--space-xl);
            }

            .display-comparison {
                grid-template-columns: 1fr;
            }

            .principles-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .colour-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .factors-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .implications-list {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .tabs-header {
                flex-direction: column;
            }

            .tab-btn {
                border-radius: var(--radius-md);
            }

            .principles-grid {
                grid-template-columns: 1fr;
            }

            .colour-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .factors-grid {
                grid-template-columns: 1fr;
            }

            .meter-visual {
                flex-wrap: wrap;
                justify-content: center;
            }

            .height-reference {
                display: none;
            }
        }

        /* ========================================
           GAME STYLES (Screens 7 & 8)
           ======================================== */
        
        /* Game Intro */
        .game-intro {
            min-height: calc(100vh - 64px);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: var(--space-xl);
            background: linear-gradient(135deg, var(--bg-darker), var(--bg-primary));
        }

        .game-intro-content {
            max-width: 600px;
            text-align: center;
        }

        .game-badge {
            display: inline-block;
            padding: var(--space-sm) var(--space-lg);
            background: rgba(204, 85, 0, 0.2);
            border: 1px solid var(--accent-orange);
            color: var(--accent-orange);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            font-weight: 600;
            letter-spacing: 2px;
            border-radius: var(--radius-xl);
            margin-bottom: var(--space-lg);
        }

        .game-intro h2 {
            font-size: 2.5rem;
            margin-bottom: var(--space-sm);
        }

        .game-intro h3 {
            font-size: 1.25rem;
            color: var(--text-secondary);
            font-weight: 400;
            margin-bottom: var(--space-xl);
        }

        .game-brief {
            text-align: left;
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            margin-bottom: var(--space-xl);
        }

        .game-brief p {
            color: var(--text-secondary);
            margin-bottom: var(--space-lg);
        }

        .budget-intro {
            display: flex;
            align-items: center;
            gap: var(--space-lg);
            padding: var(--space-lg);
            background: linear-gradient(135deg, rgba(146, 208, 80, 0.15), rgba(146, 208, 80, 0.05));
            border: 1px solid rgba(146, 208, 80, 0.3);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-lg);
        }

        .budget-icon {
            font-size: 2.5rem;
        }

        .budget-label {
            font-size: 0.85rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .budget-amount {
            font-family: 'JetBrains Mono', monospace;
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent-green);
        }

        .game-rules {
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
        }

        .game-rules .rule-item {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-sm) var(--space-md);
            background: rgba(0, 0, 0, 0.2);
            border-radius: var(--radius-sm);
        }

        .game-rules .rule-num {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--accent-blue);
            color: var(--bg-primary);
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
            font-size: 0.8rem;
            border-radius: 50%;
        }

        /* Game Area */
        .game-area {
            min-height: calc(100vh - 64px);
            display: flex;
            flex-direction: column;
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-md) var(--space-xl);
            background: var(--bg-elevated);
            border-bottom: 1px solid var(--border-subtle);
        }

        .game-title {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-family: 'Rajdhani', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-heading);
        }

        .game-title-icon {
            font-size: 1.3rem;
        }

        .game-stats {
            display: flex;
            gap: var(--space-xl);
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: var(--space-sm) var(--space-lg);
            background: var(--bg-card);
            border-radius: var(--radius-md);
            min-width: 100px;
        }

        .stat-label {
            font-size: 0.7rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-heading);
        }

        .stat-budget .stat-value {
            color: var(--accent-green);
        }

        .stat-budget.low .stat-value {
            color: var(--color-warning);
        }

        .stat-budget.critical .stat-value {
            color: var(--color-danger);
        }

        /* Game Room */
        .game-room {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: var(--space-xl);
            background: var(--bg-primary);
        }

        .room-container {
            position: relative;
            width: 100%;
            max-width: 800px;
        }

        .room-svg {
            width: 100%;
            height: auto;
            border-radius: var(--radius-lg);
            background: var(--bg-darker);
        }

        .room-image {
            width: 100%;
            height: auto;
            border-radius: var(--radius-lg);
            display: block;
        }

        /* Panel SVG container - taller aspect ratio */
        .panel-container {
            max-width: 450px;
            margin: 0 auto;
        }

        .panel-svg {
            width: 100%;
            height: auto;
            border-radius: var(--radius-lg);
            display: block;
        }

        /* SVG Hotspot circles */
        .svg-hotspot-circle {
            transition: all 0.2s ease;
        }

        .svg-hotspot-circle:hover {
            filter: brightness(1.2);
            transform-origin: center;
        }

        .svg-hotspot-circle.solved {
            fill: var(--accent-green);
            opacity: 0.5;
        }

        .hotspot-container {
            position: absolute;
            inset: 0;
        }

        .game-hotspot {
            position: absolute;
            transform: translate(-50%, -50%);
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: var(--accent-orange);
            border: 3px solid white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .game-hotspot:hover {
            transform: translate(-50%, -50%) scale(1.15);
            box-shadow: 0 0 20px var(--glow-orange);
        }

        .game-hotspot.solved {
            background: var(--accent-green);
            pointer-events: none;
        }

        .game-hotspot.solved .hotspot-pulse {
            display: none;
        }

        .hotspot-pulse {
            position: absolute;
            inset: -8px;
            border-radius: 50%;
            border: 2px solid var(--accent-orange);
            animation: hotspotPulse 2s ease-in-out infinite;
        }

        @keyframes hotspotPulse {
            0%, 100% {
                transform: scale(1);
                opacity: 0.8;
            }
            50% {
                transform: scale(1.3);
                opacity: 0;
            }
        }

        .hotspot-number {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1rem;
            font-weight: 700;
            color: white;
        }

        .room-instruction {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            margin-top: var(--space-lg);
            padding: var(--space-md) var(--space-xl);
            background: var(--bg-elevated);
            border-radius: var(--radius-md);
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Problem Modal */
        .problem-modal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: var(--space-lg);
        }

        .modal-content {
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            width: 100%;
            max-width: 550px;
            max-height: 90vh;
            overflow-y: auto;
            animation: scaleIn 0.3s ease;
        }

        .modal-header {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-lg);
            background: var(--bg-card);
            border-bottom: 1px solid var(--border-subtle);
        }

        .problem-number {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--accent-orange);
            color: white;
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
            border-radius: 50%;
        }

        .problem-title {
            flex: 1;
            font-size: 1.1rem;
            margin: 0;
        }

        .modal-close {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: transparent;
            border: 1px solid var(--border-subtle);
            border-radius: 50%;
            color: var(--text-muted);
            font-size: 1.25rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .modal-close:hover {
            background: var(--color-danger);
            border-color: var(--color-danger);
            color: white;
        }

        .modal-body {
            padding: var(--space-lg);
        }

        .problem-description {
            font-size: 0.95rem;
            color: var(--text-secondary);
            margin-bottom: var(--space-md);
            line-height: 1.7;
        }

        .problem-regulation {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-md);
            background: rgba(204, 85, 0, 0.1);
            border-left: 3px solid var(--accent-orange);
            border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
            margin-bottom: var(--space-xl);
            font-size: 0.85rem;
            color: var(--accent-orange);
        }

        .options-title {
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: var(--space-md);
        }

        .options-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
        }

        .option-item {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-md);
            background: var(--bg-card);
            border: 2px solid var(--border-subtle);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .option-item:hover {
            border-color: var(--accent-blue);
            background: rgba(0, 176, 240, 0.05);
        }

        .option-item.selected {
            border-color: var(--accent-green);
            background: rgba(146, 208, 80, 0.1);
        }

        .option-item.disabled {
            opacity: 0.5;
            pointer-events: none;
        }

        .option-radio {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border-medium);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .option-item.selected .option-radio {
            border-color: var(--accent-green);
            background: var(--accent-green);
        }

        .option-item.selected .option-radio::after {
            content: 'âœ“';
            color: white;
            font-size: 0.75rem;
            font-weight: 700;
        }

        .option-content {
            flex: 1;
        }

        .option-letter {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
            color: var(--accent-blue);
            margin-right: var(--space-sm);
        }

        .option-text {
            font-size: 0.9rem;
            color: var(--text-primary);
        }

        .option-cost {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-muted);
            padding: var(--space-xs) var(--space-sm);
            background: rgba(0, 0, 0, 0.2);
            border-radius: var(--radius-sm);
        }

        .option-item.selected .option-cost {
            color: var(--accent-green);
            background: rgba(146, 208, 80, 0.15);
        }

        .modal-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-lg);
            background: var(--bg-card);
            border-top: 1px solid var(--border-subtle);
        }

        .budget-remaining {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .budget-remaining span {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 600;
            color: var(--accent-green);
        }

        /* Feedback Toast */
        .feedback-toast {
            position: fixed;
            bottom: var(--space-xl);
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-md) var(--space-xl);
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
            z-index: 1001;
            max-width: 500px;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        .toast-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--accent-green);
            color: white;
            font-size: 1.25rem;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .feedback-toast.warning .toast-icon {
            background: var(--color-warning);
        }

        .feedback-toast.concern .toast-icon {
            background: var(--color-danger);
        }

        .toast-title {
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
            color: var(--text-heading);
            margin-bottom: var(--space-xs);
        }

        .toast-message {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        /* Game Complete */
        .game-complete {
            min-height: calc(100vh - 64px);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: var(--space-xl);
            background: linear-gradient(135deg, var(--bg-darker), var(--bg-primary));
        }

        .complete-content {
            max-width: 700px;
            width: 100%;
        }

        .complete-header {
            text-align: center;
            margin-bottom: var(--space-2xl);
        }

        .complete-icon {
            font-size: 3rem;
            margin-bottom: var(--space-md);
        }

        .complete-header h3 {
            font-size: 1.75rem;
            margin-bottom: var(--space-xs);
        }

        .complete-header p {
            color: var(--text-muted);
        }

        .complete-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-md);
            margin-bottom: var(--space-2xl);
        }

        .final-stat {
            text-align: center;
            padding: var(--space-lg);
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-md);
        }

        .final-stat-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--accent-blue);
            margin-bottom: var(--space-xs);
        }

        .final-stat-label {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .decisions-summary {
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            margin-bottom: var(--space-xl);
        }

        .decisions-summary h4 {
            font-size: 1rem;
            margin-bottom: var(--space-lg);
        }

        .decisions-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
        }

        .decision-item {
            display: flex;
            gap: var(--space-md);
            padding: var(--space-md);
            background: var(--bg-card);
            border-radius: var(--radius-md);
            border-left: 4px solid var(--accent-green);
        }

        .decision-item.warning {
            border-color: var(--color-warning);
        }

        .decision-item.concern {
            border-color: var(--color-danger);
        }

        .decision-num {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-elevated);
            border-radius: 50%;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            font-weight: 700;
            color: var(--text-muted);
            flex-shrink: 0;
        }

        .decision-content {
            flex: 1;
        }

        .decision-problem {
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: var(--space-xs);
        }

        .decision-choice {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .decision-feedback {
            font-size: 0.8rem;
            color: var(--text-muted);
            font-style: italic;
            margin-top: var(--space-xs);
        }

        .alarp-assessment {
            background: linear-gradient(135deg, rgba(204, 85, 0, 0.1), rgba(204, 85, 0, 0.05));
            border: 1px solid rgba(204, 85, 0, 0.3);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            margin-bottom: var(--space-xl);
        }

        .assessment-header {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            color: var(--accent-orange);
            margin-bottom: var(--space-md);
        }

        .assessment-icon {
            font-size: 1.25rem;
        }

        .assessment-content {
            color: var(--text-secondary);
            line-height: 1.7;
        }

        .assessment-content p {
            margin-bottom: var(--space-sm);
        }

        .complete-actions {
            display: flex;
            justify-content: center;
            gap: var(--space-md);
        }

        /* Responsive Game */
        @media (max-width: 768px) {
            .game-header {
                flex-direction: column;
                gap: var(--space-md);
            }

            .game-stats {
                width: 100%;
                justify-content: space-between;
            }

            .stat-item {
                min-width: auto;
                flex: 1;
            }

            .complete-stats {
                grid-template-columns: 1fr;
            }

            .complete-actions {
                flex-direction: column;
            }

            .complete-actions .btn {
                width: 100%;
            }
        }

        /* Game 2 Specific Styles */
        .game-highlight {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-md) var(--space-lg);
            background: rgba(0, 176, 240, 0.15);
            border: 1px solid rgba(0, 176, 240, 0.3);
            border-radius: var(--radius-md);
            font-size: 0.9rem;
            color: var(--accent-blue);
        }

        .highlight-icon {
            font-size: 1.2rem;
        }

        .panel-svg {
            background: linear-gradient(180deg, #1f2937 0%, #2d3a47 100%);
        }

        /* ALARP Documentation Styles */
        .alarp-documentation {
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-xl);
            overflow: hidden;
        }

        .alarp-doc-header {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-lg);
            background: var(--bg-card);
            border-bottom: 1px solid var(--border-subtle);
        }

        .doc-icon {
            font-size: 1.5rem;
        }

        .alarp-doc-header h4 {
            flex: 1;
            font-size: 1rem;
            margin: 0;
        }

        .doc-note {
            font-size: 0.8rem;
            color: var(--text-muted);
            font-style: italic;
        }

        .alarp-doc-list {
            padding: var(--space-md);
            max-height: 400px;
            overflow-y: auto;
        }

        .alarp-doc-item {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-md);
            overflow: hidden;
        }

        .alarp-doc-item:last-child {
            margin-bottom: 0;
        }

        .doc-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-md) var(--space-lg);
            background: rgba(0, 0, 0, 0.2);
            border-bottom: 1px solid var(--border-subtle);
        }

        .doc-item-title {
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
            color: var(--text-heading);
        }

        .doc-item-status {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: 0.8rem;
            padding: var(--space-xs) var(--space-md);
            border-radius: var(--radius-sm);
        }

        .doc-item-status.implemented {
            background: rgba(146, 208, 80, 0.15);
            color: var(--accent-green);
        }

        .doc-item-status.partial {
            background: rgba(240, 165, 0, 0.15);
            color: var(--color-warning);
        }

        .doc-item-status.requires-justification {
            background: rgba(229, 69, 69, 0.15);
            color: var(--color-danger);
        }

        .doc-item-body {
            padding: var(--space-lg);
        }

        .doc-row {
            display: flex;
            margin-bottom: var(--space-sm);
        }

        .doc-row:last-child {
            margin-bottom: 0;
        }

        .doc-label {
            width: 140px;
            font-size: 0.8rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            flex-shrink: 0;
        }

        .doc-value {
            flex: 1;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .doc-value.highlight {
            color: var(--accent-orange);
            font-style: italic;
        }

        .doc-justification {
            margin-top: var(--space-md);
            padding: var(--space-md);
            background: rgba(204, 85, 0, 0.1);
            border-left: 3px solid var(--accent-orange);
            border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
        }

        .doc-justification-label {
            font-size: 0.75rem;
            color: var(--accent-orange);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: var(--space-xs);
        }

        .doc-justification-text {
            font-size: 0.85rem;
            color: var(--text-secondary);
            font-style: italic;
        }

        .doc-justification-required {
            color: var(--color-danger);
            font-weight: 500;
        }

        /* Optimal Solution Feedback */
        .doc-optimal {
            margin-top: var(--space-md);
            padding: var(--space-md);
            background: rgba(146, 208, 80, 0.1);
            border-left: 3px solid var(--accent-green);
            border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
        }

        .doc-optimal-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--accent-green);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: var(--space-xs);
        }

        .doc-optimal-text {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .doc-optimal-text strong {
            color: var(--accent-green);
        }

        /* ========================================
           SCREEN 9: DESIGNER'S CHECKLIST
           ======================================== */
        .checklist-container {
            margin-bottom: var(--space-2xl);
        }

        .checklist-category {
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-md);
            overflow: hidden;
        }

        .category-header {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            width: 100%;
            padding: var(--space-lg);
            background: var(--bg-card);
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
        }

        .category-header:hover {
            background: rgba(0, 176, 240, 0.1);
        }

        .checklist-category.open .category-header {
            background: rgba(204, 85, 0, 0.1);
            border-bottom: 1px solid var(--border-subtle);
        }

        .category-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .category-info {
            flex: 1;
        }

        .category-info h4 {
            font-size: 1rem;
            margin: 0 0 var(--space-xs) 0;
            color: var(--text-heading);
        }

        .category-count {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .category-toggle {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 50%;
        }

        .toggle-icon {
            font-size: 1.25rem;
            color: var(--text-muted);
            font-weight: 300;
            transition: transform 0.3s ease;
        }

        .checklist-category.open .toggle-icon {
            transform: rotate(45deg);
        }

        .category-content {
            display: none;
            padding: var(--space-lg);
        }

        .checklist-category.open .category-content {
            display: block;
        }

        .checklist-item {
            display: flex;
            align-items: flex-start;
            gap: var(--space-md);
            padding: var(--space-md);
            background: var(--bg-card);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-sm);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .checklist-item:last-child {
            margin-bottom: 0;
        }

        .checklist-item:hover {
            background: rgba(0, 176, 240, 0.05);
        }

        .checklist-item.checked {
            background: rgba(146, 208, 80, 0.1);
        }

        .check-input {
            display: none;
        }

        .check-box {
            width: 24px;
            height: 24px;
            border: 2px solid var(--border-medium);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: all 0.2s ease;
        }

        .checklist-item.checked .check-box {
            background: var(--accent-green);
            border-color: var(--accent-green);
        }

        .checklist-item.checked .check-box::after {
            content: 'âœ“';
            color: white;
            font-size: 0.9rem;
            font-weight: 700;
        }

        .check-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .checklist-item.checked .check-text {
            color: var(--text-primary);
        }

        /* Checklist Progress */
        .checklist-progress {
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            margin-bottom: var(--space-2xl);
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-md);
        }

        .progress-label {
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .progress-count {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 600;
            color: var(--accent-green);
        }

        .progress-bar-full {
            height: 12px;
            background: var(--bg-darker);
            border-radius: var(--radius-xl);
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--accent-green), var(--accent-blue));
            border-radius: var(--radius-xl);
            transition: width 0.3s ease;
        }

        /* ========================================
           SCREEN 10: SUMMARY & COMPLETION
           ======================================== */
        .completion-header {
            text-align: center;
            margin-bottom: var(--space-3xl);
        }

        .completion-badge {
            display: inline-flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-sm) var(--space-xl);
            background: linear-gradient(135deg, rgba(146, 208, 80, 0.2), rgba(0, 176, 240, 0.2));
            border: 1px solid var(--accent-green);
            border-radius: var(--radius-xl);
            margin-bottom: var(--space-lg);
        }

        .badge-icon {
            font-size: 1.25rem;
        }

        .badge-text {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            font-weight: 600;
            letter-spacing: 2px;
            color: var(--accent-green);
        }

        .completion-title {
            font-size: 2.25rem;
            margin-bottom: var(--space-sm);
        }

        .completion-subtitle {
            font-size: 1.1rem;
            color: var(--text-muted);
        }

        /* Takeaways */
        .takeaways-container {
            margin-bottom: var(--space-3xl);
        }

        .takeaways-title, .reference-title {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: 1.25rem;
            margin-bottom: var(--space-xl);
        }

        .title-icon {
            font-size: 1.5rem;
        }

        .takeaways-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-lg);
        }

        .takeaway-card {
            display: flex;
            gap: var(--space-md);
            padding: var(--space-lg);
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            border-left: 4px solid var(--accent-orange);
        }

        .takeaway-number {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--accent-orange);
            color: white;
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .takeaway-content h4 {
            font-size: 1rem;
            margin-bottom: var(--space-xs);
            color: var(--text-heading);
        }

        .takeaway-content p {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.6;
            margin: 0;
        }

        /* Core Message */
        .core-message {
            margin-bottom: var(--space-3xl);
        }

        .message-border {
            display: flex;
            align-items: center;
            gap: var(--space-xl);
            padding: var(--space-2xl);
            background: linear-gradient(135deg, var(--bg-elevated), var(--bg-card));
            border: 2px solid var(--accent-blue);
            border-radius: var(--radius-xl);
            text-align: center;
        }

        .message-icon {
            font-size: 3rem;
            flex-shrink: 0;
        }

        .message-text {
            flex: 1;
            text-align: left;
        }

        .message-main {
            font-family: 'Rajdhani', sans-serif;
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--text-heading);
            margin-bottom: var(--space-sm);
        }

        .message-sub {
            font-size: 1rem;
            color: var(--text-secondary);
            margin: 0;
        }

        /* Quick Reference */
        .quick-reference {
            margin-bottom: var(--space-3xl);
        }

        .reference-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-lg);
        }

        .reference-item {
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
        }

        .ref-header {
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: var(--space-md);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .ref-links {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-sm);
        }

        .ref-tag {
            padding: var(--space-xs) var(--space-sm);
            background: var(--bg-card);
            border-radius: var(--radius-sm);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--accent-blue);
        }

        /* Module Stats */
        .module-stats {
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            margin-bottom: var(--space-2xl);
        }

        .stats-header {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
            margin-bottom: var(--space-lg);
        }

        .stats-icon {
            font-size: 1.25rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--space-md);
        }

        .stat-box {
            text-align: center;
            padding: var(--space-lg);
            background: var(--bg-card);
            border-radius: var(--radius-md);
        }

        .stat-box .stat-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent-blue);
            margin-bottom: var(--space-xs);
        }

        .stat-box .stat-label {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        /* Completion Certificate */
        .completion-certificate {
            margin-bottom: var(--space-2xl);
        }

        .cert-border {
            background: linear-gradient(135deg, rgba(204, 85, 0, 0.1), rgba(0, 176, 240, 0.1));
            border: 2px solid var(--accent-orange);
            border-radius: var(--radius-xl);
            padding: var(--space-3xl);
            text-align: center;
        }

        .cert-content {
            max-width: 500px;
            margin: 0 auto;
        }

        .cert-logo {
            font-size: 3rem;
            margin-bottom: var(--space-lg);
        }

        .cert-content h4 {
            font-size: 1.5rem;
            margin-bottom: var(--space-xs);
        }

        .cert-subtitle {
            font-size: 1rem;
            color: var(--text-muted);
            margin-bottom: var(--space-lg);
        }

        .cert-message {
            font-size: 0.95rem;
            color: var(--text-secondary);
            line-height: 1.7;
            margin-bottom: var(--space-lg);
        }

        .cert-date {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: var(--accent-orange);
        }

        /* Final Actions */
        .final-actions {
            display: flex;
            justify-content: center;
            gap: var(--space-lg);
            margin-bottom: var(--space-3xl);
        }

        /* Module Footer */
        .module-footer {
            text-align: center;
            padding-top: var(--space-2xl);
            border-top: 1px solid var(--border-subtle);
        }

        .module-footer p {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: var(--space-xs);
        }

        .footer-copyright {
            font-size: 0.8rem;
            color: var(--text-muted);
            opacity: 0.7;
        }

        /* ========================================
           AUDIO PLAYER (in header)
           ======================================== */
        .header-audio {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-xs) var(--space-md);
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--radius-xl);
            border: 1px solid var(--border-subtle);
        }

        .audio-btn {
            background: var(--accent-orange);
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: white;
            font-size: 0.85rem;
            transition: all var(--transition-fast);
            flex-shrink: 0;
        }

        .audio-btn:hover {
            background: #e09000;
            transform: scale(1.05);
        }

        .audio-btn.playing {
            background: var(--accent-green);
        }

        .audio-btn .pause-icon {
            display: none;
        }

        .audio-btn.playing .play-icon {
            display: none;
        }

        .audio-btn.playing .pause-icon {
            display: block;
        }

        .audio-progress-container {
            width: 120px;
            height: 6px;
            background: var(--bg-card);
            border-radius: var(--radius-sm);
            overflow: hidden;
            cursor: pointer;
            position: relative;
        }

        .audio-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-orange), var(--accent-green));
            width: 0%;
            transition: width 0.1s linear;
            border-radius: var(--radius-sm);
        }

        .audio-time {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--text-muted);
            min-width: 35px;
            text-align: center;
        }

        .audio-mute-btn {
            background: transparent;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            font-size: 0.9rem;
            padding: 4px;
            transition: color var(--transition-fast);
            line-height: 1;
        }

        .audio-mute-btn:hover {
            color: var(--text-primary);
        }

        .audio-mute-btn.muted {
            color: var(--color-danger);
        }

        @media (max-width: 900px) {
            .header-audio {
                padding: var(--space-xs) var(--space-sm);
            }
            
            .audio-progress-container {
                width: 80px;
            }
            
            .audio-time {
                display: none;
            }
        }

        @media (max-width: 600px) {
            .header-audio {
                position: fixed;
                bottom: 15px;
                left: 50%;
                transform: translateX(-50%);
                background: var(--bg-elevated);
                border: 1px solid var(--border-subtle);
                padding: var(--space-sm) var(--space-md);
                box-shadow: 0 4px 20px rgba(0,0,0,0.4);
                z-index: 900;
            }
            
            .audio-progress-container {
                width: 100px;
            }
            
            .audio-time {
                display: block;
            }
        }

        /* ========================================
           IMAGE CONTAINERS
           ======================================== */
        .hero-image-container {
            width: 100%;
            margin-bottom: var(--space-xl);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .hero-image {
            width: 100%;
            height: auto;
            display: block;
        }

        .diagram-container {
            max-width: 600px;
            margin: var(--space-xl) auto;
        }

        .diagram-image {
            width: 100%;
            height: auto;
            border-radius: var(--radius-md);
        }

        .comparison-container {
            max-width: 800px;
            margin: var(--space-xl) auto;
        }

        .comparison-image {
            width: 100%;
            height: auto;
            border-radius: var(--radius-md);
            border: 1px solid var(--border-subtle);
        }

        .image-caption {
            text-align: center;
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-top: var(--space-sm);
            font-style: italic;
        }

        /* Responsive: Screens 9 & 10 */
        @media (max-width: 1024px) {
            .takeaways-grid {
                grid-template-columns: 1fr;
            }

            .reference-grid {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .message-border {
                flex-direction: column;
                text-align: center;
            }

            .message-text {
                text-align: center;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .final-actions {
                flex-direction: column;
            }

            .final-actions .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- ========================================
         FIXED HEADER
         ======================================== -->
    <header class="fixed-header">
        <div class="header-left">
            <img src="../00_images/Logo_white.png" alt="The Nuclear House" class="header-logo">
            <div class="header-divider"></div>
            <div class="header-title">Module <span>5.4</span></div>
        </div>
        
        <!-- Audio Player in Header -->
        <div class="header-audio" id="audioPlayer">
            <button class="audio-btn" id="audioPlayPause" onclick="toggleAudio()" title="Play/Pause Narration">
                <span class="play-icon">â–¶</span>
                <span class="pause-icon">â¸</span>
            </button>
            <div class="audio-progress-container" onclick="seekAudio(event)">
                <div class="audio-progress-bar" id="audioProgress"></div>
            </div>
            <span class="audio-time" id="audioTime">0:00</span>
            <button class="audio-mute-btn" id="audioMute" onclick="toggleMute()" title="Mute/Unmute">
                <span class="unmuted-icon">ðŸ”Š</span>
                <span class="muted-icon" style="display:none;">ðŸ”‡</span>
            </button>
        </div>
        <audio id="narrationAudio" preload="metadata"></audio>
        
        <div class="header-progress">
            <div class="progress-track">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <span class="progress-text" id="progressText">0%</span>
        </div>

        <button class="menu-toggle" id="menuToggle" onclick="toggleMenu()" aria-label="Toggle navigation menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </header>

    <!-- ========================================
         NAVIGATION MENU
         ======================================== -->
    <nav class="nav-menu" id="navMenu">
        <div class="nav-menu-header">Module Contents</div>
        
        <a href="#" onclick="goToPage(1); return false;" data-page="1" class="active">
            <span class="nav-icon">01</span>
            <span>The Cost of Bad Design</span>
        </a>
        <a href="#" onclick="goToPage(2); return false;" data-page="2">
            <span class="nav-icon">02</span>
            <span>Regulatory Framework</span>
        </a>
        <a href="#" onclick="goToPage(3); return false;" data-page="3">
            <span class="nav-icon">03</span>
            <span>ALARP Explained</span>
        </a>
        <a href="#" onclick="goToPage(4); return false;" data-page="4">
            <span class="nav-icon">04</span>
            <span>Design vs Operational HF</span>
        </a>
        <a href="#" onclick="goToPage(5); return false;" data-page="5">
            <span class="nav-icon">05</span>
            <span>Physical Ergonomics</span>
        </a>
        <a href="#" onclick="goToPage(6); return false;" data-page="6">
            <span class="nav-icon">06</span>
            <span>Cognitive Ergonomics</span>
        </a>
        
        <div class="nav-section">
            <div class="nav-menu-header">Interactive Scenarios</div>
        </div>
        
        <a href="#" onclick="goToPage(7); return false;" data-page="7">
            <span class="nav-icon">âš™ï¸</span>
            <span>Fix the Room: Maintenance Cell</span>
        </a>
        <a href="#" onclick="goToPage(8); return false;" data-page="8">
            <span class="nav-icon">ðŸŽ›ï¸</span>
            <span>Fix the Room: Control Panel</span>
        </a>
        
        <div class="nav-section">
            <div class="nav-menu-header">Summary</div>
        </div>
        
        <a href="#" onclick="goToPage(9); return false;" data-page="9">
            <span class="nav-icon">ðŸ“‹</span>
            <span>Designer's Checklist</span>
        </a>
        <a href="#" onclick="goToPage(10); return false;" data-page="10">
            <span class="nav-icon">ðŸŽ¯</span>
            <span>Key Takeaways</span>
        </a>
    </nav>

    <!-- ========================================
         PAGE 1: Opening Hook
         ======================================== -->
    <div class="page active" id="page1" data-page="1">
        <div class="hook-screen">
            <!-- Animated Background -->
            <div class="hook-bg">
                <div class="hook-grid"></div>
                <div class="hook-glow hook-glow-1"></div>
                <div class="hook-glow hook-glow-2"></div>
            </div>

            <!-- Main Content -->
            <div class="hook-content">
                <!-- Opening Statement -->
                <div class="hook-opener">
                    <div class="hook-tag animate-on-load" data-delay="0">
                        <span class="hook-tag-icon">âš </span>
                        MODULE 5.4
                    </div>
                    
                    <h1 class="hook-headline animate-on-load" data-delay="200">
                        Two of America's worst nuclear incidents share
                        <span class="hook-highlight">one root cause</span>
                    </h1>
                </div>

                <!-- Hero Image -->
                <div class="hero-image-container animate-on-load" data-delay="400">
                    <img src="images/hero_tmi_davis_besse.png" alt="Three Mile Island and Davis-Besse incidents" class="hero-image">
                </div>

                <!-- Case Study Cards -->
                <div class="hook-cases">
                    <div class="case-card case-tmi animate-on-load" data-delay="600">
                        <div class="case-year">1979</div>
                        <div class="case-name">Three Mile Island</div>
                        <div class="case-detail">
                            <span class="case-icon">ðŸ’¡</span>
                            A hidden indicator light contributed to a partial meltdown
                        </div>
                        <div class="case-fact">
                            The PORV indicator showed the <em>command</em> was sent â€” not that the valve actually closed
                        </div>
                    </div>

                    <div class="case-divider animate-on-load" data-delay="800">
                        <div class="divider-line"></div>
                        <div class="divider-icon">+</div>
                        <div class="divider-line"></div>
                    </div>

                    <div class="case-card case-davis animate-on-load" data-delay="1000">
                        <div class="case-year">2002</div>
                        <div class="case-name">Davis-Besse</div>
                        <div class="case-detail">
                            <span class="case-icon">ðŸ”</span>
                            A football-sized cavity corroded undetected for 10 years
                        </div>
                        <div class="case-fact">
                            Only 9.5mm of stainless steel held back 2,155 psi of reactor coolant
                        </div>
                    </div>
                </div>

                <!-- The Reveal -->
                <div class="hook-reveal animate-on-load" data-delay="1400">
                    <div class="reveal-label">The Root Cause</div>
                    <div class="reveal-text">
                        <span class="reveal-word">Human</span>
                        <span class="reveal-word">Factors</span>
                        <span class="reveal-word reveal-highlight">Design</span>
                        <span class="reveal-word reveal-highlight">Failures</span>
                    </div>
                </div>

                <!-- Key Message -->
                <div class="hook-message animate-on-load" data-delay="1800">
                    <p>These weren't operator errors that could be "trained out."</p>
                    <p>They were <strong>design failures</strong> that set operators up to fail.</p>
                </div>

                <!-- The Challenge -->
                <div class="hook-challenge animate-on-load" data-delay="2200">
                    <div class="challenge-box">
                        <div class="challenge-icon">â±</div>
                        <div class="challenge-text">
                            <span class="challenge-number">60+</span>
                            <span class="challenge-label">years</span>
                        </div>
                        <div class="challenge-message">
                            Your design decisions will be lived with â€” and lived in â€” for over six decades.
                        </div>
                    </div>
                </div>

                <!-- Core Philosophy -->
                <div class="hook-philosophy animate-on-load" data-delay="2600">
                    <blockquote class="philosophy-quote">
                        "You can't train out a bad design. If the valve is in the wrong place, no amount of situational awareness training fixes it."
                    </blockquote>
                    <p class="philosophy-mission">
                        Your job is to design systems where the <span class="text-green">right action</span> is the <span class="text-green">easy action</span>.
                    </p>
                </div>

                <!-- Continue Button -->
                <div class="hook-action animate-on-load" data-delay="3000">
                    <button class="btn btn-primary btn-lg" onclick="goToPage(2)">
                        Learn How <span class="btn-icon">â†’</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ========================================
         PAGE 2: Regulatory Framework
         ======================================== -->
    <div class="page" id="page2" data-page="2">
        <section class="section">
            <div class="section-container">
                <!-- Section Header -->
                <div class="section-header animate-on-scroll">
                    <div class="section-tag">
                        <span>02</span> Regulatory Foundation
                    </div>
                    <h2 class="section-title">The Legal Framework</h2>
                    <p class="section-intro">
                        Human factors in nuclear design isn't optional â€” it's a legal obligation backed by UK law and international standards. Here's what you need to know.
                    </p>
                </div>

                <!-- Three Pillars -->
                <div class="reg-pillars">
                    <!-- Pillar 1: UK Requirements -->
                    <div class="reg-pillar pillar-uk animate-on-scroll" data-delay="100">
                        <div class="pillar-header">
                            <div class="pillar-icon">ðŸ‡¬ðŸ‡§</div>
                            <h3>ONR Human Factors SAPs</h3>
                            <div class="pillar-badge">UK Requirements</div>
                        </div>
                        <div class="pillar-content">
                            <div class="pillar-item">
                                <div class="item-code">EHF.1</div>
                                <div class="item-text">
                                    Human factors must be <strong>systematically integrated</strong> throughout the facility lifecycle
                                </div>
                            </div>
                            <div class="pillar-item pillar-item-highlight">
                                <div class="item-code">EHF.2</div>
                                <div class="item-text">
                                    Dependence on human action to maintain safety should be <strong class="text-danger">MINIMISED</strong>
                                </div>
                            </div>
                            <div class="pillar-principle">
                                <div class="principle-icon">âš¡</div>
                                <div class="principle-text">
                                    The decision to allocate <em>any</em> safety function to human action must be substantiated
                                </div>
                            </div>
                        </div>
                        <div class="pillar-footer">
                            <span class="reg-reference">ONR SAPs 2014 (Rev. 1), Â¶442-463</span>
                        </div>
                    </div>

                    <!-- Pillar 2: ALARP -->
                    <div class="reg-pillar pillar-alarp animate-on-scroll" data-delay="200">
                        <div class="pillar-header">
                            <div class="pillar-icon">âš–ï¸</div>
                            <h3>ALARP Obligation</h3>
                            <div class="pillar-badge pillar-badge-orange">Legal Duty</div>
                        </div>
                        <div class="pillar-content">
                            <div class="pillar-definition">
                                <div class="def-term">As Low As Reasonably Practicable</div>
                                <div class="def-meaning">
                                    Risks must be reduced unless cost is <strong class="text-orange">grossly disproportionate</strong> to the safety benefit gained
                                </div>
                            </div>
                            <div class="pillar-item">
                                <div class="item-icon">ðŸ“‹</div>
                                <div class="item-text">
                                    You must demonstrate that HF improvements were <strong>considered</strong> and either implemented OR justified
                                </div>
                            </div>
                            <div class="pillar-test">
                                <div class="test-label">The Key Test</div>
                                <div class="test-question">
                                    "Why <span class="text-danger">shouldn't</span> it be done?"
                                </div>
                                <div class="test-not">
                                    â€” not "Why should it be done?"
                                </div>
                            </div>
                        </div>
                        <div class="pillar-footer">
                            <span class="reg-reference">HSWA 1974</span>
                            <span class="reg-reference">NS-TAST-GD-005</span>
                        </div>
                    </div>

                    <!-- Pillar 3: IAEA -->
                    <div class="reg-pillar pillar-iaea animate-on-scroll" data-delay="300">
                        <div class="pillar-header">
                            <div class="pillar-icon">ðŸŒ</div>
                            <h3>IAEA Standards</h3>
                            <div class="pillar-badge pillar-badge-blue">International</div>
                        </div>
                        <div class="pillar-content">
                            <div class="pillar-req">
                                <div class="req-number">SSR-2/1</div>
                                <div class="req-title">Requirement 32</div>
                            </div>
                            <blockquote class="pillar-quote">
                                "The design shall support operating personnel in the fulfilment of their responsibilities... and shall <strong>minimise the potential for human errors</strong> to affect safety."
                            </blockquote>
                            <div class="pillar-item">
                                <div class="item-icon">ðŸ“˜</div>
                                <div class="item-text">
                                    <strong>SSG-51</strong> provides structured HFE process: function allocation, task analysis, HMI design
                                </div>
                            </div>
                        </div>
                        <div class="pillar-footer">
                            <span class="reg-reference">SSR-2/1 (Rev. 1)</span>
                            <span class="reg-reference">SSG-51 (2019)</span>
                        </div>
                    </div>
                </div>

                <!-- Summary Table -->
                <div class="reg-summary animate-on-scroll" data-delay="400">
                    <h4 class="summary-title">
                        <span class="summary-icon">ðŸ“Š</span>
                        What This Means For You
                    </h4>
                    <div class="summary-table">
                        <div class="summary-row summary-header">
                            <div class="summary-cell">Requirement</div>
                            <div class="summary-cell">Designer Impact</div>
                        </div>
                        <div class="summary-row">
                            <div class="summary-cell">
                                <span class="reg-reference">EHF.2</span>
                            </div>
                            <div class="summary-cell">
                                Minimise reliance on human actions for safety functions
                            </div>
                        </div>
                        <div class="summary-row">
                            <div class="summary-cell">
                                <span class="reg-reference">ALARP</span>
                            </div>
                            <div class="summary-cell">
                                Justify why HF improvements weren't implemented
                            </div>
                        </div>
                        <div class="summary-row">
                            <div class="summary-cell">
                                <span class="reg-reference">SSR-2/1 Req.32</span>
                            </div>
                            <div class="summary-cell">
                                Design to minimise potential for human error
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ONR TAGs Reference -->
                <div class="reg-tags animate-on-scroll" data-delay="500">
                    <div class="tags-header">
                        <span class="tags-icon">ðŸ“š</span>
                        <span>Key ONR Technical Assessment Guides</span>
                    </div>
                    <div class="tags-grid">
                        <div class="tag-item">
                            <span class="tag-ref">NS-TAST-GD-058</span>
                            <span class="tag-title">Human Factors Integration</span>
                        </div>
                        <div class="tag-item">
                            <span class="tag-ref">NS-TAST-GD-059</span>
                            <span class="tag-title">Human Machine Interface</span>
                        </div>
                        <div class="tag-item">
                            <span class="tag-ref">NS-TAST-GD-062</span>
                            <span class="tag-title">Workplaces & Environment</span>
                        </div>
                        <div class="tag-item">
                            <span class="tag-ref">NS-TAST-GD-063</span>
                            <span class="tag-title">Human Reliability Analysis</span>
                        </div>
                        <div class="tag-item">
                            <span class="tag-ref">NS-TAST-GD-064</span>
                            <span class="tag-title">Allocation of Function</span>
                        </div>
                    </div>
                </div>

                <!-- Navigation -->
                <div class="section-nav">
                    <button class="btn btn-ghost" onclick="goToPage(1)">
                        <span class="btn-icon">â†</span> Previous
                    </button>
                    <button class="btn btn-primary" onclick="goToPage(3)">
                        Continue: ALARP Deep Dive <span class="btn-icon">â†’</span>
                    </button>
                </div>
            </div>
        </section>
    </div>

    <!-- ========================================
         PAGE 3: ALARP Explained
         ======================================== -->
    <div class="page" id="page3" data-page="3">
        <section class="section">
            <div class="section-container">
                <!-- Section Header -->
                <div class="section-header animate-on-scroll">
                    <div class="section-tag">
                        <span>03</span> Core Concept
                    </div>
                    <h2 class="section-title">The ALARP Triangle</h2>
                    <p class="section-intro">
                        ALARP isn't just a principle â€” it's a legal framework for decision-making. Click on each zone to understand where your design decisions fall.
                    </p>
                </div>

                <!-- Interactive Triangle -->
                <div class="alarp-container animate-on-scroll" data-delay="100">
                    <div class="alarp-triangle-wrapper">
                        <!-- SVG Triangle -->
                        <svg class="alarp-triangle" viewBox="0 0 400 350" preserveAspectRatio="xMidYMid meet">
                            <!-- Definitions for gradients -->
                            <defs>
                                <linearGradient id="redGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#e54545;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#c43333;stop-opacity:1" />
                                </linearGradient>
                                <linearGradient id="amberGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#f0a500;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#cc8800;stop-opacity:1" />
                                </linearGradient>
                                <linearGradient id="greenGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#92d050;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#6fb33a;stop-opacity:1" />
                                </linearGradient>
                                <filter id="glow">
                                    <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                    <feMerge>
                                        <feMergeNode in="coloredBlur"/>
                                        <feMergeNode in="SourceGraphic"/>
                                    </feMerge>
                                </filter>
                            </defs>

                            <!-- Broadly Acceptable Zone (Top - widest) -->
                            <polygon 
                                class="alarp-zone zone-acceptable" 
                                points="0,20 400,20 340,120 60,120"
                                fill="url(#greenGrad)"
                                onclick="showAlarpZone('acceptable')"
                            />
                            <text x="200" y="75" class="zone-label zone-label-dark" text-anchor="middle">BROADLY ACCEPTABLE</text>

                            <!-- Tolerable Zone (Middle) -->
                            <polygon 
                                class="alarp-zone zone-tolerable" 
                                points="60,125 340,125 280,225 120,225"
                                fill="url(#amberGrad)"
                                onclick="showAlarpZone('tolerable')"
                            />
                            <text x="200" y="165" class="zone-label zone-label-dark" text-anchor="middle">TOLERABLE</text>
                            <text x="200" y="185" class="zone-sublabel" text-anchor="middle">(if ALARP)</text>

                            <!-- Unacceptable Zone (Bottom - point) -->
                            <polygon 
                                class="alarp-zone zone-unacceptable" 
                                points="120,230 280,230 200,330"
                                fill="url(#redGrad)"
                                onclick="showAlarpZone('unacceptable')"
                            />
                            <text x="200" y="275" class="zone-label" text-anchor="middle">UNACCEPTABLE</text>

                            <!-- Risk Arrow (pointing DOWN now - increasing risk) -->
                            <line x1="30" y1="40" x2="30" y2="320" stroke="rgba(255,255,255,0.5)" stroke-width="2" marker-end="url(#arrowhead)"/>
                            <defs>
                                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                    <polygon points="0 0, 10 3.5, 0 7" fill="rgba(255,255,255,0.5)" />
                                </marker>
                            </defs>
                            <text x="25" y="180" class="axis-label" text-anchor="middle" transform="rotate(90, 25, 180)">INCREASING RISK â†’</text>
                        </svg>

                        <!-- Click Instruction -->
                        <div class="triangle-instruction">
                            <span class="instruction-icon">ðŸ‘†</span>
                            Click each zone to learn more
                        </div>
                    </div>

                    <!-- Zone Detail Panels -->
                    <div class="alarp-details">
                        <!-- Default State -->
                        <div class="zone-detail zone-detail-default active" id="zoneDefault">
                            <div class="detail-icon">â–³</div>
                            <h4>Select a Zone</h4>
                            <p>Click on any section of the triangle to understand what each risk zone means for your design decisions.</p>
                        </div>

                        <!-- Unacceptable Zone -->
                        <div class="zone-detail zone-detail-unacceptable" id="zoneUnacceptable">
                            <div class="detail-header">
                                <div class="detail-badge badge-danger">UNACCEPTABLE</div>
                            </div>
                            <div class="detail-content">
                                <p class="detail-main">Risk cannot be justified except in extraordinary circumstances.</p>
                                <div class="detail-box">
                                    <div class="box-icon">ðŸš«</div>
                                    <div class="box-text">
                                        <strong>Activity should not proceed</strong><br>
                                        No cost-benefit analysis can justify this level of risk
                                    </div>
                                </div>
                                <div class="detail-example">
                                    <div class="example-label">Example</div>
                                    <p>A design that could cause uncontrolled release with no engineered barriers would fall into this category â€” regardless of cost savings.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Tolerable Zone -->
                        <div class="zone-detail zone-detail-tolerable" id="zoneTolerable">
                            <div class="detail-header">
                                <div class="detail-badge badge-warning">TOLERABLE (if ALARP)</div>
                            </div>
                            <div class="detail-content">
                                <p class="detail-main">Risk is tolerable <strong>only if</strong> reduced to ALARP and benefits outweigh residual risk.</p>
                                <div class="detail-box">
                                    <div class="box-icon">âš–ï¸</div>
                                    <div class="box-text">
                                        <strong>ALARP demonstration required</strong><br>
                                        You must show all reasonably practicable measures are in place
                                    </div>
                                </div>
                                <div class="detail-checklist">
                                    <div class="check-item">
                                        <span class="check-icon">âœ“</span>
                                        Have you considered all risk reduction options?
                                    </div>
                                    <div class="check-item">
                                        <span class="check-icon">âœ“</span>
                                        Can you justify why rejected options are grossly disproportionate?
                                    </div>
                                    <div class="check-item">
                                        <span class="check-icon">âœ“</span>
                                        Is your justification documented for the safety case?
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Acceptable Zone -->
                        <div class="zone-detail zone-detail-acceptable" id="zoneAcceptable">
                            <div class="detail-header">
                                <div class="detail-badge badge-success">BROADLY ACCEPTABLE</div>
                            </div>
                            <div class="detail-content">
                                <p class="detail-main">Risk is negligible â€” no need for detailed ALARP demonstration.</p>
                                <div class="detail-box">
                                    <div class="box-icon">âœ…</div>
                                    <div class="box-text">
                                        <strong>But don't get complacent</strong><br>
                                        Still maintain risk at ALARP as a matter of good practice
                                    </div>
                                </div>
                                <div class="detail-note">
                                    <span class="note-icon">ðŸ’¡</span>
                                    <span>Most routine design decisions will aim to keep risks in this zone through good engineering practice and following Relevant Good Practice (RGP).</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gross Disproportion -->
                <div class="gross-disproportion animate-on-scroll" data-delay="200">
                    <div class="gd-header">
                        <div class="gd-icon">âš–ï¸</div>
                        <h3>Gross Disproportion</h3>
                    </div>
                    <div class="gd-content">
                        <div class="gd-main">
                            <p>The cost of a safety measure need <strong>not</strong> be strictly proportionate to the risk reduction. But to <em>reject</em> a measure, you must show the cost is <span class="text-orange">grossly disproportionate</span>.</p>
                        </div>
                        <div class="gd-scale">
                            <div class="scale-label">The Higher the Hazard...</div>
                            <div class="scale-bar">
                                <div class="scale-segment scale-low">
                                    <span class="segment-label">Low Hazard</span>
                                    <span class="segment-ratio">1:1</span>
                                </div>
                                <div class="scale-segment scale-medium">
                                    <span class="segment-label">Medium</span>
                                    <span class="segment-ratio">3:1</span>
                                </div>
                                <div class="scale-segment scale-high">
                                    <span class="segment-label">High Hazard</span>
                                    <span class="segment-ratio">10:1+</span>
                                </div>
                            </div>
                            <div class="scale-note">...the greater the expected investment in safety</div>
                        </div>
                    </div>
                </div>

                <!-- ALARP Flowchart -->
                <div class="alarp-flowchart animate-on-scroll" data-delay="300">
                    <h4 class="flowchart-title">
                        <span class="flowchart-icon">ðŸ”„</span>
                        ALARP Decision Process
                    </h4>
                    <div class="flowchart-container">
                        <div class="flow-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-question">Is there a risk?</div>
                                <div class="step-action">Define and characterise the problem</div>
                            </div>
                        </div>
                        <div class="flow-arrow">â†“</div>
                        <div class="flow-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-question">Can it be eliminated?</div>
                                <div class="step-branch">
                                    <span class="branch-yes">YES â†’ Eliminate</span>
                                    <span class="branch-no">NO â†’ Continue</span>
                                </div>
                            </div>
                        </div>
                        <div class="flow-arrow">â†“</div>
                        <div class="flow-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-question">Can it be reduced?</div>
                                <div class="step-action">Generate potential options</div>
                            </div>
                        </div>
                        <div class="flow-arrow">â†“</div>
                        <div class="flow-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-question">Is reduction reasonably practicable?</div>
                                <div class="step-action">Apply gross disproportion test</div>
                            </div>
                        </div>
                        <div class="flow-arrow">â†“</div>
                        <div class="flow-step flow-step-final">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <div class="step-outcome">
                                    <span class="outcome-implement">IMPLEMENT</span>
                                    <span class="outcome-or">or</span>
                                    <span class="outcome-justify">JUSTIFY rejection</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Key Takeaway -->
                <div class="regulatory-callout animate-on-scroll" data-delay="400">
                    <div class="reg-icon">ðŸ’¡</div>
                    <div class="reg-content">
                        <h4>Remember</h4>
                        <p>Affordability should <strong>NOT</strong> be a factor â€” ability to pay is irrelevant to ALARP. The test is whether the cost is grossly disproportionate to the safety benefit, not whether you can afford it.</p>
                        <span class="reg-reference">NS-TAST-GD-005</span>
                    </div>
                </div>

                <!-- Navigation -->
                <div class="section-nav">
                    <button class="btn btn-ghost" onclick="goToPage(2)">
                        <span class="btn-icon">â†</span> Previous
                    </button>
                    <button class="btn btn-primary" onclick="goToPage(4)">
                        Continue: Design vs Operational HF <span class="btn-icon">â†’</span>
                    </button>
                </div>
            </div>
        </section>
    </div>

    <!-- ========================================
         PAGE 4: Design vs Operational HF
         ======================================== -->
    <div class="page" id="page4" data-page="4">
        <section class="section">
            <div class="section-container">
                <!-- Section Header -->
                <div class="section-header animate-on-scroll">
                    <div class="section-tag">
                        <span>04</span> Critical Distinction
                    </div>
                    <h2 class="section-title">Two Types of Human Factors</h2>
                    <p class="section-intro">
                        Understanding this distinction is fundamental. One you can influence after construction. The other is locked in the moment concrete is poured.
                    </p>
                </div>

                <!-- Comparison Grid -->
                <div class="hf-comparison animate-on-scroll" data-delay="100">
                    <!-- Operational HF Column -->
                    <div class="hf-column hf-operational">
                        <div class="hf-column-header">
                            <div class="hf-icon">ðŸ‘¤</div>
                            <h3>Operational Human Factors</h3>
                            <div class="hf-subtitle">"Training the Human"</div>
                        </div>
                        <div class="hf-column-content">
                            <ul class="hf-list">
                                <li>
                                    <span class="list-icon">ðŸ§ </span>
                                    <span>Situational awareness</span>
                                </li>
                                <li>
                                    <span class="list-icon">ðŸ—£ï¸</span>
                                    <span>Conflict resolution</span>
                                </li>
                                <li>
                                    <span class="list-icon">âš¡</span>
                                    <span>Performance limitations awareness</span>
                                </li>
                                <li>
                                    <span class="list-icon">âœ‹</span>
                                    <span>Conformity and assertiveness</span>
                                </li>
                                <li>
                                    <span class="list-icon">ðŸ‘ï¸</span>
                                    <span>Techniques to reduce complacency</span>
                                </li>
                                <li>
                                    <span class="list-icon">ðŸ”—</span>
                                    <span>Error chains and management</span>
                                </li>
                            </ul>
                            <div class="hf-relevance">
                                <div class="relevance-label">Relevant to:</div>
                                <div class="relevance-tags">
                                    <span class="relevance-tag">Operations</span>
                                    <span class="relevance-tag">Training</span>
                                    <span class="relevance-tag">Safety Culture</span>
                                </div>
                            </div>
                        </div>
                        <div class="hf-column-footer hf-footer-ops">
                            <span class="footer-note">Can be improved throughout plant life</span>
                        </div>
                    </div>

                    <!-- VS Divider -->
                    <div class="hf-divider">
                        <div class="divider-line-v"></div>
                        <div class="divider-vs">VS</div>
                        <div class="divider-line-v"></div>
                    </div>

                    <!-- Design HF Column -->
                    <div class="hf-column hf-design">
                        <div class="hf-column-header hf-header-design">
                            <div class="hf-icon">ðŸ”§</div>
                            <h3>Design Human Factors</h3>
                            <div class="hf-subtitle">"Designing the System"</div>
                            <div class="hf-badge">THIS MODULE</div>
                        </div>
                        <div class="hf-column-content">
                            <ul class="hf-list">
                                <li>
                                    <span class="list-icon">ðŸ“</span>
                                    <span>Physical ergonomics (reach, clearance, posture)</span>
                                </li>
                                <li>
                                    <span class="list-icon">ðŸ–¥ï¸</span>
                                    <span>Cognitive ergonomics (displays, alarms, workload)</span>
                                </li>
                                <li>
                                    <span class="list-icon">ðŸ“‹</span>
                                    <span>Task analysis (what must humans do?)</span>
                                </li>
                                <li>
                                    <span class="list-icon">ðŸ›¡ï¸</span>
                                    <span>Error prevention through design</span>
                                </li>
                                <li>
                                    <span class="list-icon">ðŸŒ¡ï¸</span>
                                    <span>Environmental factors (lighting, noise, temperature)</span>
                                </li>
                                <li>
                                    <span class="list-icon">ðŸ“</span>
                                    <span>Anthropometrics (5th-95th percentile)</span>
                                </li>
                            </ul>
                            <div class="hf-relevance">
                                <div class="relevance-label">Relevant to:</div>
                                <div class="relevance-tags">
                                    <span class="relevance-tag tag-highlight">Design</span>
                                    <span class="relevance-tag tag-highlight">Engineering</span>
                                    <span class="relevance-tag tag-highlight">Equipment Spec</span>
                                </div>
                            </div>
                        </div>
                        <div class="hf-column-footer hf-footer-design">
                            <span class="footer-icon">âš ï¸</span>
                            <span class="footer-note">Locked in at construction â€” changes are extremely costly</span>
                        </div>
                    </div>
                </div>

                <!-- Central Message -->
                <div class="hf-central-message animate-on-scroll" data-delay="300">
                    <div class="message-container">
                        <div class="message-quote">
                            <span class="quote-mark">"</span>
                            You can't train out a bad design.
                            <span class="quote-mark">"</span>
                        </div>
                        <div class="message-example">
                            If the valve is in the wrong place, no amount of situational awareness training fixes it.
                        </div>
                        <div class="message-mission">
                            Your job is to design systems where the 
                            <span class="highlight-green">right action</span> 
                            is the 
                            <span class="highlight-green">easy action</span>.
                        </div>
                    </div>
                </div>

                <!-- The Hierarchy -->
                <div class="hf-hierarchy animate-on-scroll" data-delay="400">
                    <h4 class="hierarchy-title">
                        <span class="hierarchy-icon">ðŸ“Š</span>
                        Error Prevention Hierarchy
                    </h4>
                    <div class="hierarchy-container">
                        <div class="hierarchy-level level-best">
                            <div class="level-rank">1</div>
                            <div class="level-content">
                                <div class="level-name">Eliminate the hazard</div>
                                <div class="level-desc">Design it out completely</div>
                            </div>
                            <div class="level-type">DESIGN</div>
                        </div>
                        <div class="hierarchy-level level-good">
                            <div class="level-rank">2</div>
                            <div class="level-content">
                                <div class="level-name">Engineered controls</div>
                                <div class="level-desc">Interlocks, barriers, automation</div>
                            </div>
                            <div class="level-type">DESIGN</div>
                        </div>
                        <div class="hierarchy-level level-okay">
                            <div class="level-rank">3</div>
                            <div class="level-content">
                                <div class="level-name">Warnings & alarms</div>
                                <div class="level-desc">Alert the human to take action</div>
                            </div>
                            <div class="level-type">DESIGN</div>
                        </div>
                        <div class="hierarchy-level level-weak">
                            <div class="level-rank">4</div>
                            <div class="level-content">
                                <div class="level-name">Procedures & training</div>
                                <div class="level-desc">Tell humans what to do</div>
                            </div>
                            <div class="level-type">OPERATIONAL</div>
                        </div>
                        <div class="hierarchy-level level-worst">
                            <div class="level-rank">5</div>
                            <div class="level-content">
                                <div class="level-name">Rely on vigilance</div>
                                <div class="level-desc">Hope humans don't make mistakes</div>
                            </div>
                            <div class="level-type">OPERATIONAL</div>
                        </div>
                    </div>
                    <div class="hierarchy-note">
                        <span class="note-icon">â¬†ï¸</span>
                        <span>Always aim as high as reasonably practicable in this hierarchy</span>
                    </div>
                </div>

                <!-- Regulatory Reminder -->
                <div class="regulatory-callout animate-on-scroll" data-delay="500">
                    <div class="reg-icon">ðŸ“œ</div>
                    <div class="reg-content">
                        <h4>ONR SAP EHF.2</h4>
                        <p>"Dependence on human action to maintain and recover a safe state should be <strong>minimised</strong>. The allocation of safety actions between humans and engineered structures, systems or components should be <strong>substantiated</strong>."</p>
                        <p class="reg-implication">If you rely on human action for safety, you must prove why automation wasn't reasonably practicable.</p>
                    </div>
                </div>

                <!-- Navigation -->
                <div class="section-nav">
                    <button class="btn btn-ghost" onclick="goToPage(3)">
                        <span class="btn-icon">â†</span> Previous
                    </button>
                    <button class="btn btn-primary" onclick="goToPage(5)">
                        Continue: Physical Ergonomics <span class="btn-icon">â†’</span>
                    </button>
                </div>
            </div>
        </section>
    </div>

    <!-- ========================================
         PAGE 5: Physical Ergonomics
         ======================================== -->
    <div class="page" id="page5" data-page="5">
        <section class="section">
            <div class="section-container">
                <!-- Section Header -->
                <div class="section-header animate-on-scroll">
                    <div class="section-tag">
                        <span>05</span> Physical Ergonomics
                    </div>
                    <h2 class="section-title">The Body at Work</h2>
                    <p class="section-intro">
                        Design for the human body means accommodating the full range of users â€” from the 5th percentile female to the 95th percentile male. Click on body zones to explore design requirements.
                    </p>
                </div>

                <!-- Interactive Body Diagram -->
                <div class="ergo-container animate-on-scroll" data-delay="100">
                    <div class="body-diagram-wrapper">
                        <div class="body-diagram">
                            <!-- SVG Human Figure -->
                            <svg class="body-svg" viewBox="0 0 200 400" preserveAspectRatio="xMidYMid meet">
                                <!-- Body Silhouette -->
                                <ellipse cx="100" cy="40" rx="28" ry="32" fill="#4a5d6b" class="body-part"/>
                                <rect x="70" y="70" width="60" height="90" rx="10" fill="#4a5d6b" class="body-part"/>
                                <rect x="30" y="75" width="45" height="20" rx="8" fill="#4a5d6b" class="body-part"/>
                                <rect x="125" y="75" width="45" height="20" rx="8" fill="#4a5d6b" class="body-part"/>
                                <rect x="25" y="90" width="18" height="50" rx="6" fill="#4a5d6b" class="body-part"/>
                                <rect x="157" y="90" width="18" height="50" rx="6" fill="#4a5d6b" class="body-part"/>
                                <rect x="75" y="155" width="22" height="80" rx="6" fill="#4a5d6b" class="body-part"/>
                                <rect x="103" y="155" width="22" height="80" rx="6" fill="#4a5d6b" class="body-part"/>
                                <rect x="73" y="230" width="24" height="90" rx="6" fill="#4a5d6b" class="body-part"/>
                                <rect x="103" y="230" width="24" height="90" rx="6" fill="#4a5d6b" class="body-part"/>
                                <ellipse cx="85" cy="330" rx="18" ry="10" fill="#4a5d6b" class="body-part"/>
                                <ellipse cx="115" cy="330" rx="18" ry="10" fill="#4a5d6b" class="body-part"/>
                                
                                <!-- Clickable Hotspots -->
                                <circle cx="100" cy="40" r="35" class="hotspot hotspot-head" onclick="showBodyZone('head')" fill="transparent"/>
                                <circle cx="100" cy="95" r="28" class="hotspot hotspot-shoulders" onclick="showBodyZone('shoulders')" fill="transparent"/>
                                <circle cx="30" cy="115" r="20" class="hotspot hotspot-hands" onclick="showBodyZone('hands')" fill="transparent"/>
                                <circle cx="170" cy="115" r="20" class="hotspot hotspot-hands" onclick="showBodyZone('hands')" fill="transparent"/>
                                <circle cx="100" cy="130" r="25" class="hotspot hotspot-torso" onclick="showBodyZone('torso')" fill="transparent"/>
                                <circle cx="100" cy="280" r="30" class="hotspot hotspot-legs" onclick="showBodyZone('legs')" fill="transparent"/>
                            </svg>

                            <!-- Hotspot Indicators -->
                            <div class="hotspot-indicator" style="top: 8%; left: 50%;" onclick="showBodyZone('head')">
                                <span class="indicator-dot"></span>
                                <span class="indicator-label">Head/Eyes</span>
                            </div>
                            <div class="hotspot-indicator" style="top: 22%; left: 50%;" onclick="showBodyZone('shoulders')">
                                <span class="indicator-dot"></span>
                                <span class="indicator-label">Shoulders/Arms</span>
                            </div>
                            <div class="hotspot-indicator" style="top: 30%; left: 18%;" onclick="showBodyZone('hands')">
                                <span class="indicator-dot"></span>
                                <span class="indicator-label">Hands</span>
                            </div>
                            <div class="hotspot-indicator" style="top: 35%; left: 50%;" onclick="showBodyZone('torso')">
                                <span class="indicator-dot"></span>
                                <span class="indicator-label">Torso/Back</span>
                            </div>
                            <div class="hotspot-indicator" style="top: 70%; left: 50%;" onclick="showBodyZone('legs')">
                                <span class="indicator-dot"></span>
                                <span class="indicator-label">Legs/Feet</span>
                            </div>
                        </div>

                        <!-- Height Reference -->
                        <div class="height-reference">
                            <div class="height-bar"></div>
                            <div class="height-mark" style="bottom: 85%;">
                                <span class="mark-value">1730mm</span>
                                <span class="mark-label">95th%M eye height</span>
                            </div>
                            <div class="height-mark" style="bottom: 70%;">
                                <span class="mark-value">1450mm</span>
                                <span class="mark-label">5th%F eye height</span>
                            </div>
                            <div class="height-mark" style="bottom: 45%;">
                                <span class="mark-value">900-1100mm</span>
                                <span class="mark-label">Work surface</span>
                            </div>
                        </div>
                    </div>

                    <!-- Body Zone Details -->
                    <div class="body-details">
                        <!-- Default State - Compact Hint -->
                        <div class="body-detail body-detail-default active" id="bodyDefault">
                            <span class="detail-icon">ðŸ‘†</span>
                            <h4>Click a body zone</h4>
                            <p>Select highlighted areas on the figure to see ergonomic requirements</p>
                        </div>

                        <!-- Head/Eyes Zone -->
                        <div class="body-detail" id="bodyHead">
                            <div class="detail-header">
                                <span class="detail-emoji">ðŸ‘ï¸</span>
                                <h4>Head / Eyes</h4>
                            </div>
                            <div class="detail-specs">
                                <div class="spec-item">
                                    <div class="spec-label">Optimal viewing angle</div>
                                    <div class="spec-value">15Â° below horizontal</div>
                                </div>
                                <div class="spec-item">
                                    <div class="spec-label">Control room lighting</div>
                                    <div class="spec-value">300-500 lux</div>
                                </div>
                                <div class="spec-item">
                                    <div class="spec-label">Eye height range (standing)</div>
                                    <div class="spec-value">1450mm (5th%F) â€” 1730mm (95th%M)</div>
                                </div>
                            </div>
                            <div class="detail-rules">
                                <div class="rule-item rule-do">
                                    <span class="rule-icon">âœ“</span>
                                    <span>Position critical displays within comfortable viewing cone</span>
                                </div>
                                <div class="rule-item rule-do">
                                    <span class="rule-icon">âœ“</span>
                                    <span>Avoid glare from overhead lighting on screens</span>
                                </div>
                                <div class="rule-item rule-dont">
                                    <span class="rule-icon">âœ—</span>
                                    <span>Never require sustained upward gaze for monitoring</span>
                                </div>
                            </div>
                        </div>

                        <!-- Shoulders/Arms Zone -->
                        <div class="body-detail" id="bodyShoulders">
                            <div class="detail-header">
                                <span class="detail-emoji">ðŸ’ª</span>
                                <h4>Shoulders / Arms</h4>
                            </div>
                            <div class="detail-specs">
                                <div class="spec-item">
                                    <div class="spec-label">Primary work zone</div>
                                    <div class="spec-value">Within 400mm reach</div>
                                </div>
                                <div class="spec-item">
                                    <div class="spec-label">Max control force (frequent)</div>
                                    <div class="spec-value">22N</div>
                                </div>
                                <div class="spec-item">
                                    <div class="spec-label">Extended reach zone</div>
                                    <div class="spec-value">600-900mm (occasional only)</div>
                                </div>
                            </div>
                            <div class="detail-rules">
                                <div class="rule-item rule-do">
                                    <span class="rule-icon">âœ“</span>
                                    <span>Keep repetitive tasks within comfortable arc</span>
                                </div>
                                <div class="rule-item rule-do">
                                    <span class="rule-icon">âœ“</span>
                                    <span>Emergency controls within 5th percentile reach</span>
                                </div>
                                <div class="rule-item rule-dont">
                                    <span class="rule-icon">âœ—</span>
                                    <span>Never require maximum reach for routine tasks</span>
                                </div>
                            </div>
                        </div>

                        <!-- Hands Zone -->
                        <div class="body-detail" id="bodyHands">
                            <div class="detail-header">
                                <span class="detail-emoji">âœ‹</span>
                                <h4>Hands</h4>
                            </div>
                            <div class="detail-specs">
                                <div class="spec-item">
                                    <div class="spec-label">Grip strength range</div>
                                    <div class="spec-value">~200N (5th%F) â€” ~550N (95th%M)</div>
                                </div>
                                <div class="spec-item">
                                    <div class="spec-label">Valve handwheel diameter</div>
                                    <div class="spec-value">200-400mm for manual valves</div>
                                </div>
                                <div class="spec-item">
                                    <div class="spec-label">Glove compatibility</div>
                                    <div class="spec-value">Required for all controls</div>
                                </div>
                            </div>
                            <div class="detail-rules">
                                <div class="rule-item rule-do">
                                    <span class="rule-icon">âœ“</span>
                                    <span>Design for 5th percentile grip strength</span>
                                </div>
                                <div class="rule-item rule-do">
                                    <span class="rule-icon">âœ“</span>
                                    <span>Test all controls with appropriate PPE gloves</span>
                                </div>
                                <div class="rule-item rule-dont">
                                    <span class="rule-icon">âœ—</span>
                                    <span>Never require pinch grip for safety-critical operations</span>
                                </div>
                            </div>
                        </div>

                        <!-- Torso/Back Zone -->
                        <div class="body-detail" id="bodyTorso">
                            <div class="detail-header">
                                <span class="detail-emoji">ðŸ§</span>
                                <h4>Torso / Back</h4>
                            </div>
                            <div class="detail-specs">
                                <div class="spec-item">
                                    <div class="spec-label">Work surface heights</div>
                                    <div class="spec-value">900-1100mm (adjustable)</div>
                                </div>
                                <div class="spec-item">
                                    <div class="spec-label">Maximum lifting weight</div>
                                    <div class="spec-value">25kg (closer is lighter)</div>
                                </div>
                                <div class="spec-item">
                                    <div class="spec-label">Sustained posture</div>
                                    <div class="spec-value">Avoid stooping/bending</div>
                                </div>
                            </div>
                            <div class="detail-rules">
                                <div class="rule-item rule-do">
                                    <span class="rule-icon">âœ“</span>
                                    <span>Provide adjustable work surfaces where possible</span>
                                </div>
                                <div class="rule-item rule-do">
                                    <span class="rule-icon">âœ“</span>
                                    <span>Allow neutral spine posture for prolonged tasks</span>
                                </div>
                                <div class="rule-item rule-dont">
                                    <span class="rule-icon">âœ—</span>
                                    <span>Never design tasks requiring sustained twisting</span>
                                </div>
                            </div>
                        </div>

                        <!-- Legs/Feet Zone -->
                        <div class="body-detail" id="bodyLegs">
                            <div class="detail-header">
                                <span class="detail-emoji">ðŸ¦¶</span>
                                <h4>Legs / Feet</h4>
                            </div>
                            <div class="detail-specs">
                                <div class="spec-item">
                                    <div class="spec-label">Max ladder step height</div>
                                    <div class="spec-value">200mm for regular use</div>
                                </div>
                                <div class="spec-item">
                                    <div class="spec-label">Standing platforms</div>
                                    <div class="spec-value">Non-slip, contamination-safe</div>
                                </div>
                                <div class="spec-item">
                                    <div class="spec-label">Kneeling clearance</div>
                                    <div class="spec-value">Required for maintenance access</div>
                                </div>
                            </div>
                            <div class="detail-rules">
                                <div class="rule-item rule-do">
                                    <span class="rule-icon">âœ“</span>
                                    <span>Provide anti-fatigue matting for standing positions</span>
                                </div>
                                <div class="rule-item rule-do">
                                    <span class="rule-icon">âœ“</span>
                                    <span>Design adequate toe clearance under equipment</span>
                                </div>
                                <div class="rule-item rule-dont">
                                    <span class="rule-icon">âœ—</span>
                                    <span>Never require kneeling on hard surfaces without pads</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reach Zones Diagram -->
                <div class="reach-zones animate-on-scroll" data-delay="200">
                    <h4 class="reach-title">
                        <span class="reach-icon">ðŸŽ¯</span>
                        Reach Envelope Zones (Plan View)
                    </h4>
                    
                    <!-- Reference Image -->
                    <div class="diagram-container">
                        <img src="images/body_reach_zones.PNG" alt="Human body showing primary, secondary, and maximum reach zones" class="diagram-image">
                        <p class="image-caption">Reach envelope zones - design controls within primary zone for 5th percentile reach</p>
                    </div>
                    
                    <div class="reach-diagram">
                        <div class="reach-visual">
                            <div class="reach-zone zone-max">
                                <span class="zone-distance">&gt;900mm</span>
                            </div>
                            <div class="reach-zone zone-extended">
                                <span class="zone-distance">600-900mm</span>
                            </div>
                            <div class="reach-zone zone-secondary">
                                <span class="zone-distance">400-600mm</span>
                            </div>
                            <div class="reach-zone zone-primary">
                                <span class="zone-distance">0-400mm</span>
                            </div>
                            <div class="reach-person">ðŸ‘¤</div>
                        </div>
                        <div class="reach-legend">
                            <div class="legend-item">
                                <span class="legend-color" style="background: var(--accent-green);"></span>
                                <span class="legend-text"><strong>Primary (0-400mm)</strong> â€” Frequent operations, critical controls</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color" style="background: var(--accent-blue);"></span>
                                <span class="legend-text"><strong>Secondary (400-600mm)</strong> â€” Regular operations, monitoring</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color" style="background: var(--color-warning);"></span>
                                <span class="legend-text"><strong>Extended (600-900mm)</strong> â€” Occasional operations only</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color" style="background: var(--color-danger);"></span>
                                <span class="legend-text"><strong>Maximum (&gt;900mm)</strong> â€” Emergency use only, requires body movement</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Key Design Rules -->
                <div class="ergo-rules animate-on-scroll" data-delay="300">
                    <h4 class="rules-title">
                        <span class="rules-icon">ðŸ“</span>
                        Key Design Rules
                    </h4>
                    <div class="rules-grid">
                        <div class="rule-card">
                            <div class="rule-number">1</div>
                            <div class="rule-content">
                                <div class="rule-headline">Design clearances for 95th percentile male</div>
                                <div class="rule-detail">Doors, hatches, access ways must accommodate the largest users</div>
                            </div>
                        </div>
                        <div class="rule-card">
                            <div class="rule-number">2</div>
                            <div class="rule-content">
                                <div class="rule-headline">Design reaches for 5th percentile female</div>
                                <div class="rule-detail">Controls must be accessible to the smallest users</div>
                            </div>
                        </div>
                        <div class="rule-card">
                            <div class="rule-number">3</div>
                            <div class="rule-content">
                                <div class="rule-headline">Add 50-100mm for PPE</div>
                                <div class="rule-detail">Protective clothing, respirators, suits all add bulk</div>
                            </div>
                        </div>
                        <div class="rule-card">
                            <div class="rule-number">4</div>
                            <div class="rule-content">
                                <div class="rule-headline">Never require maximum reach for routine tasks</div>
                                <div class="rule-detail">Reserve extended reach for emergency situations only</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Navigation -->
                <div class="section-nav">
                    <button class="btn btn-ghost" onclick="goToPage(4)">
                        <span class="btn-icon">â†</span> Previous
                    </button>
                    <button class="btn btn-primary" onclick="goToPage(6)">
                        Continue: Cognitive Ergonomics <span class="btn-icon">â†’</span>
                    </button>
                </div>
            </div>
        </section>
    </div>

    <!-- ========================================
         PAGE 6: Cognitive Ergonomics
         ======================================== -->
    <div class="page" id="page6" data-page="6">
        <section class="section">
            <div class="section-container">
                <!-- Section Header -->
                <div class="section-header animate-on-scroll">
                    <div class="section-tag">
                        <span>06</span> Cognitive Ergonomics
                    </div>
                    <h2 class="section-title">The Mind at Work</h2>
                    <p class="section-intro">
                        Physical access is only half the battle. Operators must also be able to perceive, understand, and act on information correctly â€” especially under stress.
                    </p>
                </div>

                <!-- Tabbed Interface -->
                <div class="cognitive-tabs animate-on-scroll" data-delay="100">
                    <div class="tabs-header">
                        <button class="tab-btn active" onclick="showCognitiveTab('displays')" data-tab="displays">
                            <span class="tab-icon">ðŸ–¥ï¸</span>
                            <span class="tab-label">Display Design</span>
                        </button>
                        <button class="tab-btn" onclick="showCognitiveTab('alarms')" data-tab="alarms">
                            <span class="tab-icon">ðŸš¨</span>
                            <span class="tab-label">Alarm Management</span>
                        </button>
                        <button class="tab-btn" onclick="showCognitiveTab('workload')" data-tab="workload">
                            <span class="tab-icon">ðŸ§ </span>
                            <span class="tab-label">Cognitive Workload</span>
                        </button>
                    </div>

                    <div class="tabs-content">
                        <!-- Display Design Tab -->
                        <div class="tab-panel active" id="tabDisplays">
                            <!-- Reference Image -->
                            <div class="comparison-container">
                                <img src="images/display_comparison.png" alt="Comparison of poor vs good HMI display design" class="comparison-image">
                                <p class="image-caption">HMI display design: poor (inconsistent colours, cryptic labels) vs good (clear hierarchy, descriptive text)</p>
                            </div>
                            
                            <div class="display-comparison">
                                <!-- Bad Example -->
                                <div class="display-example display-bad">
                                    <div class="example-header">
                                        <span class="example-badge badge-bad">âœ— Poor Design</span>
                                    </div>
                                    <div class="example-visual">
                                        <div class="mock-display mock-bad">
                                            <div class="mock-row">
                                                <span class="mock-indicator" style="background: red;">VLV-001</span>
                                                <span class="mock-indicator" style="background: red;">VLV-002</span>
                                                <span class="mock-indicator" style="background: green;">PMP-01</span>
                                            </div>
                                            <div class="mock-row">
                                                <span class="mock-indicator" style="background: yellow;">TK-A</span>
                                                <span class="mock-indicator" style="background: red;">3-RCS-V-024</span>
                                                <span class="mock-indicator" style="background: blue;">SYS4</span>
                                            </div>
                                            <div class="mock-row">
                                                <span class="mock-indicator mock-small" style="background: orange;">!</span>
                                                <span class="mock-indicator mock-small" style="background: red;">!</span>
                                                <span class="mock-indicator mock-small" style="background: red;">!</span>
                                                <span class="mock-indicator mock-small" style="background: yellow;">!</span>
                                            </div>
                                        </div>
                                    </div>
                                    <ul class="example-issues">
                                        <li><span class="issue-icon">âš ï¸</span> Red used for normal closed state</li>
                                        <li><span class="issue-icon">âš ï¸</span> Competing colours, no hierarchy</li>
                                        <li><span class="issue-icon">âš ï¸</span> Cryptic codes, no descriptions</li>
                                        <li><span class="issue-icon">âš ï¸</span> Cluttered, hard to scan</li>
                                    </ul>
                                </div>

                                <!-- Good Example -->
                                <div class="display-example display-good">
                                    <div class="example-header">
                                        <span class="example-badge badge-good">âœ“ Good Design</span>
                                    </div>
                                    <div class="example-visual">
                                        <div class="mock-display mock-good">
                                            <div class="mock-section">
                                                <div class="mock-section-title">Primary Coolant</div>
                                                <div class="mock-row">
                                                    <span class="mock-item"><span class="status-dot status-green"></span> Isolation Valve A</span>
                                                    <span class="mock-item"><span class="status-dot status-green"></span> Isolation Valve B</span>
                                                </div>
                                            </div>
                                            <div class="mock-section">
                                                <div class="mock-section-title">Pumps</div>
                                                <div class="mock-row">
                                                    <span class="mock-item"><span class="status-dot status-green"></span> Primary Pump</span>
                                                    <span class="mock-item"><span class="status-dot status-amber"></span> Backup (Standby)</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <ul class="example-benefits">
                                        <li><span class="benefit-icon">âœ“</span> Green = normal, red = alarm only</li>
                                        <li><span class="benefit-icon">âœ“</span> Clear visual hierarchy</li>
                                        <li><span class="benefit-icon">âœ“</span> Descriptive labels</li>
                                        <li><span class="benefit-icon">âœ“</span> Logical groupings</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="tmi-callout">
                                <div class="callout-icon">ðŸ’¡</div>
                                <div class="callout-content">
                                    <h5>TMI Lesson</h5>
                                    <p>The PORV indicator at Three Mile Island showed the <em>command</em> was sent, not the actual valve position. Operators believed it was closed when it was stuck open.</p>
                                    <div class="callout-rule">
                                        <strong>Design Rule:</strong> Indicators must show <span class="text-green">actual state</span>, not commanded state.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Alarm Management Tab -->
                        <div class="tab-panel" id="tabAlarms">
                            <div class="alarm-problem">
                                <div class="problem-header">
                                    <span class="problem-icon">ðŸš¨</span>
                                    <h4>The TMI Problem</h4>
                                </div>
                                <div class="problem-quote">
                                    "Over 100 alarms activated simultaneously. Operators couldn't distinguish critical from trivial."
                                </div>
                            </div>

                            <div class="alarm-principles">
                                <h4 class="principles-title">Good Alarm Design Principles</h4>
                                <div class="principles-grid">
                                    <div class="principle-card">
                                        <div class="principle-number">1</div>
                                        <div class="principle-name">Prioritise</div>
                                        <div class="principle-detail">Critical &gt; High &gt; Medium &gt; Low</div>
                                    </div>
                                    <div class="principle-card">
                                        <div class="principle-number">2</div>
                                        <div class="principle-name">Suppress</div>
                                        <div class="principle-detail">Remove nuisance alarms in known conditions</div>
                                    </div>
                                    <div class="principle-card">
                                        <div class="principle-number">3</div>
                                        <div class="principle-name">Limit</div>
                                        <div class="principle-detail">&lt;10 alarms per 10 min (normal ops)</div>
                                    </div>
                                    <div class="principle-card">
                                        <div class="principle-number">4</div>
                                        <div class="principle-name">Act</div>
                                        <div class="principle-detail">Every alarm = clear required response</div>
                                    </div>
                                </div>
                            </div>

                            <div class="colour-coding">
                                <h4 class="coding-title">Standard Colour Coding</h4>
                                <div class="colour-grid">
                                    <div class="colour-item colour-red">
                                        <div class="colour-swatch"></div>
                                        <div class="colour-info">
                                            <div class="colour-name">RED</div>
                                            <div class="colour-meaning">Danger, emergency stop, alarm condition</div>
                                        </div>
                                    </div>
                                    <div class="colour-item colour-amber">
                                        <div class="colour-swatch"></div>
                                        <div class="colour-info">
                                            <div class="colour-name">AMBER</div>
                                            <div class="colour-meaning">Caution, abnormal condition, warning</div>
                                        </div>
                                    </div>
                                    <div class="colour-item colour-green">
                                        <div class="colour-swatch"></div>
                                        <div class="colour-info">
                                            <div class="colour-name">GREEN</div>
                                            <div class="colour-meaning">Safe, normal, running correctly</div>
                                        </div>
                                    </div>
                                    <div class="colour-item colour-blue">
                                        <div class="colour-swatch"></div>
                                        <div class="colour-info">
                                            <div class="colour-name">BLUE</div>
                                            <div class="colour-meaning">Advisory, information only</div>
                                        </div>
                                    </div>
                                    <div class="colour-item colour-white">
                                        <div class="colour-swatch"></div>
                                        <div class="colour-info">
                                            <div class="colour-name">WHITE</div>
                                            <div class="colour-meaning">General status, neutral</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="critical-rule">
                                    <span class="rule-icon">ðŸš«</span>
                                    <span><strong>Critical Rule:</strong> Never use RED for normal operating conditions (e.g., "valve closed" should NOT be red if closed is the normal state)</span>
                                </div>
                            </div>
                        </div>

                        <!-- Cognitive Workload Tab -->
                        <div class="tab-panel" id="tabWorkload">
                            <div class="workload-concept">
                                <div class="concept-header">
                                    <span class="concept-icon">ðŸ’­</span>
                                    <h4>The Spare Capacity Principle</h4>
                                </div>
                                <div class="concept-quote">
                                    "If normal operations consume 100% of cognitive capacity, there's nothing left for emergencies."
                                </div>
                            </div>

                            <div class="workload-meter">
                                <div class="meter-visual">
                                    <div class="meter-bar">
                                        <div class="meter-fill meter-normal" style="height: 60%;">
                                            <span class="meter-label">Normal Ops</span>
                                            <span class="meter-value">~60%</span>
                                        </div>
                                    </div>
                                    <div class="meter-bar">
                                        <div class="meter-fill meter-abnormal" style="height: 80%;">
                                            <span class="meter-label">Abnormal</span>
                                            <span class="meter-value">~80%</span>
                                        </div>
                                    </div>
                                    <div class="meter-bar">
                                        <div class="meter-fill meter-overload" style="height: 100%;">
                                            <span class="meter-label">Overload</span>
                                            <span class="meter-value">100%</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="meter-annotation">
                                    <div class="annotation-item annotation-good">
                                        <span class="annotation-arrow">â†</span>
                                        <span>Design target: Maintain 20%+ reserve capacity</span>
                                    </div>
                                </div>
                            </div>

                            <div class="workload-factors">
                                <h4 class="factors-title">Factors Affecting Cognitive Workload</h4>
                                <div class="factors-grid">
                                    <div class="factor-item">
                                        <span class="factor-icon">ðŸ“Š</span>
                                        <span class="factor-name">Information density on displays</span>
                                    </div>
                                    <div class="factor-item">
                                        <span class="factor-icon">ðŸ”€</span>
                                        <span class="factor-name">Number of simultaneous tasks</span>
                                    </div>
                                    <div class="factor-item">
                                        <span class="factor-icon">â±ï¸</span>
                                        <span class="factor-name">Time pressure</span>
                                    </div>
                                    <div class="factor-item">
                                        <span class="factor-icon">ðŸ”Š</span>
                                        <span class="factor-name">Noise and environmental distractors</span>
                                    </div>
                                    <div class="factor-item">
                                        <span class="factor-icon">ðŸš¨</span>
                                        <span class="factor-name">Alarm frequency</span>
                                    </div>
                                    <div class="factor-item">
                                        <span class="factor-icon">ðŸ“‹</span>
                                        <span class="factor-name">Procedure complexity</span>
                                    </div>
                                </div>
                            </div>

                            <div class="workload-implications">
                                <h4 class="implications-title">Design Implications</h4>
                                <div class="implications-list">
                                    <div class="implication-item">
                                        <span class="impl-icon">ðŸ¤–</span>
                                        <span>Automate routine monitoring tasks</span>
                                    </div>
                                    <div class="implication-item">
                                        <span class="impl-icon">ðŸ§­</span>
                                        <span>Provide decision support for complex scenarios</span>
                                    </div>
                                    <div class="implication-item">
                                        <span class="impl-icon">ðŸ“‰</span>
                                        <span>Reduce information density on primary displays</span>
                                    </div>
                                    <div class="implication-item">
                                        <span class="impl-icon">ðŸ”„</span>
                                        <span>Allow task shedding during high-demand situations</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Summary Callout -->
                <div class="regulatory-callout animate-on-scroll" data-delay="200">
                    <div class="reg-icon">ðŸ“‹</div>
                    <div class="reg-content">
                        <h4>Key Standards Reference</h4>
                        <p>For detailed HMI and alarm design guidance, refer to:</p>
                        <div class="ref-list">
                            <span class="reg-reference">NUREG-0700</span>
                            <span class="reg-reference">NUREG/CR-6684</span>
                            <span class="reg-reference">NS-TAST-GD-059</span>
                            <span class="reg-reference">BS EN 61839</span>
                        </div>
                    </div>
                </div>

                <!-- Navigation -->
                <div class="section-nav">
                    <button class="btn btn-ghost" onclick="goToPage(5)">
                        <span class="btn-icon">â†</span> Previous
                    </button>
                    <button class="btn btn-primary" onclick="goToPage(7)">
                        Start Game: Fix the Room <span class="btn-icon">â†’</span>
                    </button>
                </div>
            </div>
        </section>
    </div>

    <!-- ========================================
         PAGE 7: Game 1 - Maintenance Cell
         ======================================== -->
    <div class="page" id="page7" data-page="7">
        <!-- Game Intro -->
        <div class="game-intro" id="game1Intro">
            <div class="game-intro-content">
                <div class="game-badge">INTERACTIVE SCENARIO</div>
                <h2>Fix the Room</h2>
                <h3>Scenario 1: The Maintenance Cell</h3>
                
                <div class="game-brief">
                    <p>You've inherited a maintenance cell design with <strong>multiple human factors problems</strong>. Your task is to review each issue and decide how to address it.</p>
                    
                    <div class="budget-intro">
                        <div class="budget-icon">ðŸ’·</div>
                        <div class="budget-info">
                            <div class="budget-label">Your Budget</div>
                            <div class="budget-amount">Â£75,000</div>
                        </div>
                    </div>
                    
                    <p>Some fixes are cheap, others expensive. Some are critical, others nice-to-have. You <strong>cannot fix everything</strong> â€” choose wisely and justify your decisions.</p>
                    
                    <div class="game-rules">
                        <div class="rule-item">
                            <span class="rule-num">1</span>
                            <span>Click on highlighted problem areas</span>
                        </div>
                        <div class="rule-item">
                            <span class="rule-num">2</span>
                            <span>Review the issue and select a fix option</span>
                        </div>
                        <div class="rule-item">
                            <span class="rule-num">3</span>
                            <span>Balance cost vs. safety benefit (ALARP thinking)</span>
                        </div>
                    </div>
                </div>
                
                <button class="btn btn-primary btn-lg" onclick="startGame1()">
                    Start Scenario <span class="btn-icon">â†’</span>
                </button>
            </div>
        </div>

        <!-- Game Area -->
        <div class="game-area hidden" id="game1Area">
            <!-- Game Header -->
            <div class="game-header">
                <div class="game-title">
                    <span class="game-title-icon">ðŸ”§</span>
                    <span>Maintenance Cell Assessment</span>
                </div>
                <div class="game-stats">
                    <div class="stat-item stat-budget">
                        <span class="stat-label">Budget</span>
                        <span class="stat-value" id="game1Budget">Â£75,000</span>
                    </div>
                    <div class="stat-item stat-progress">
                        <span class="stat-label">Problems</span>
                        <span class="stat-value"><span id="game1Solved">0</span>/6</span>
                    </div>
                    <div class="stat-item stat-score">
                        <span class="stat-label">Score</span>
                        <span class="stat-value" id="game1Score">0</span>
                    </div>
                </div>
            </div>

            <!-- Room Visualisation -->
            <div class="game-room" id="game1Room">
                <div class="room-container">
                    <!-- Maintenance Cell Image -->
                    <img class="room-image" src="images/game_maintenance_cell.png" alt="Maintenance Cell with Human Factors Issues">

                    <!-- Clickable Hotspots -->
                    <div class="hotspot-container">
                        <!-- Problem 1: High Valve (top left valves on pipes) -->
                        <button class="game-hotspot" id="hotspot1" style="top: 37.5%; left: 28.3%;" onclick="showProblem(1)" data-problem="1">
                            <span class="hotspot-pulse"></span>
                            <span class="hotspot-number">1</span>
                        </button>
                        
                        <!-- Problem 2: Hidden Drain (behind pipes, lower left) -->
                        <button class="game-hotspot" id="hotspot2" style="top: 47.7%; left: 52.2%;" onclick="showProblem(2)" data-problem="2">
                            <span class="hotspot-pulse"></span>
                            <span class="hotspot-number">2</span>
                        </button>
                        
                        <!-- Problem 3: Poor Lighting (ceiling area) -->
                        <button class="game-hotspot" id="hotspot3" style="top: 22.4%; left: 54.6%;" onclick="showProblem(3)" data-problem="3">
                            <span class="hotspot-pulse"></span>
                            <span class="hotspot-number">3</span>
                        </button>
                        
                        <!-- Problem 4: Red Indicators (control panel on right) -->
                        <button class="game-hotspot" id="hotspot4" style="top: 56.5%; left: 60.5%;" onclick="showProblem(4)" data-problem="4">
                            <span class="hotspot-pulse"></span>
                            <span class="hotspot-number">4</span>
                        </button>
                        
                        <!-- Problem 5: Heavy Valve (center valves) -->
                        <button class="game-hotspot" id="hotspot5" style="top: 54.2%; left: 39.1%;" onclick="showProblem(5)" data-problem="5">
                            <span class="hotspot-pulse"></span>
                            <span class="hotspot-number">5</span>
                        </button>
                        
                        <!-- Problem 6: Narrow Clearance (between equipment) -->
                        <button class="game-hotspot" id="hotspot6" style="top: 65.1%; left: 69%;" onclick="showProblem(6)" data-problem="6">
                            <span class="hotspot-pulse"></span>
                            <span class="hotspot-number">6</span>
                        </button>
                    </div>
                </div>

                <div class="room-instruction">
                    <span class="instruction-icon">ðŸ‘†</span>
                    Click on the numbered hotspots to review each human factors problem
                </div>
            </div>

            <!-- Problem Modal -->
            <div class="problem-modal hidden" id="problemModal">
                <div class="modal-content">
                    <div class="modal-header">
                        <div class="problem-number" id="modalProblemNum">1</div>
                        <h4 class="problem-title" id="modalTitle">Problem Title</h4>
                        <button class="modal-close" onclick="closeModal()">Ã—</button>
                    </div>
                    <div class="modal-body">
                        <p class="problem-description" id="modalDescription">Problem description...</p>
                        <div class="problem-regulation">
                            <span class="reg-icon">ðŸ“‹</span>
                            <span class="reg-text" id="modalRegulation">Regulation reference</span>
                        </div>
                        
                        <div class="options-title">Select a Fix:</div>
                        <div class="options-list" id="modalOptions">
                            <!-- Options populated by JS -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <div class="budget-remaining">
                            Budget remaining: <span id="modalBudget">Â£75,000</span>
                        </div>
                        <button class="btn btn-primary" id="confirmBtn" onclick="confirmSelection()" disabled>
                            Confirm Selection
                        </button>
                    </div>
                </div>
            </div>

            <!-- Feedback Toast -->
            <div class="feedback-toast hidden" id="feedbackToast">
                <div class="toast-icon" id="toastIcon">âœ“</div>
                <div class="toast-content">
                    <div class="toast-title" id="toastTitle">Decision Recorded</div>
                    <div class="toast-message" id="toastMessage">Feedback message...</div>
                </div>
            </div>
        </div>

        <!-- Game Complete -->
        <div class="game-complete hidden" id="game1Complete">
            <div class="complete-content">
                <div class="complete-header">
                    <div class="complete-icon">ðŸ“‹</div>
                    <h3>Scenario Complete</h3>
                    <p>Maintenance Cell Assessment</p>
                </div>
                
                <div class="complete-stats">
                    <div class="final-stat">
                        <div class="final-stat-value" id="finalScore1">0</div>
                        <div class="final-stat-label">Score (out of 600)</div>
                    </div>
                    <div class="final-stat">
                        <div class="final-stat-value" id="finalBudget1">Â£0</div>
                        <div class="final-stat-label">Budget Used</div>
                    </div>
                    <div class="final-stat">
                        <div class="final-stat-value" id="finalRemaining1">Â£0</div>
                        <div class="final-stat-label">Remaining</div>
                    </div>
                </div>

                <!-- ALARP Documentation -->
                <div class="alarp-documentation">
                    <div class="alarp-doc-header">
                        <span class="alarp-doc-icon">ðŸ“„</span>
                        <span>ALARP Documentation Preview</span>
                    </div>
                    <p class="alarp-doc-intro">This is how your decisions would appear in formal safety case documentation:</p>
                    <div class="alarp-doc-list" id="alarpDocList1">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <div class="alarp-assessment" id="alarpAssessment1">
                    <div class="assessment-header">
                        <span class="assessment-icon">âš–ï¸</span>
                        <span>ALARP Assessment</span>
                    </div>
                    <div class="assessment-content" id="assessmentContent1">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <div class="complete-actions">
                    <button class="btn btn-ghost" onclick="resetGame1()">
                        <span class="btn-icon">â†º</span> Try Again
                    </button>
                    <button class="btn btn-primary" onclick="goToPage(8)">
                        Continue to Scenario 2 <span class="btn-icon">â†’</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ========================================
         PAGE 8: Game 2 - Control Panel
         ======================================== -->
    <div class="page" id="page8" data-page="8">
        <!-- Game Intro -->
        <div class="game-intro" id="game2Intro">
            <div class="game-intro-content">
                <div class="game-badge">INTERACTIVE SCENARIO</div>
                <h2>Fix the Room</h2>
                <h3>Scenario 2: The Local Control Panel</h3>
                
                <div class="game-brief">
                    <p>A local control panel needs HF improvements before installation. This panel controls a <strong>safety-related system</strong>, so your decisions will be documented and scrutinised.</p>
                    
                    <div class="budget-intro">
                        <div class="budget-icon">ðŸ’·</div>
                        <div class="budget-info">
                            <div class="budget-label">Your Budget</div>
                            <div class="budget-amount">Â£50,000</div>
                        </div>
                    </div>
                    
                    <p>Every decision you make (or don't make) will need to be justified in the safety case. This scenario includes <strong>ALARP documentation</strong> showing how your choices would be recorded.</p>
                    
                    <div class="game-highlight">
                        <span class="highlight-icon">ðŸ“‹</span>
                        <span>New: See how your decisions translate to ALARP documentation</span>
                    </div>
                </div>
                
                <button class="btn btn-primary btn-lg" onclick="startGame2()">
                    Start Scenario <span class="btn-icon">â†’</span>
                </button>
            </div>
        </div>

        <!-- Game Area -->
        <div class="game-area hidden" id="game2Area">
            <!-- Game Header -->
            <div class="game-header">
                <div class="game-title">
                    <span class="game-title-icon">ðŸŽ›ï¸</span>
                    <span>Control Panel Assessment</span>
                </div>
                <div class="game-stats">
                    <div class="stat-item stat-budget">
                        <span class="stat-label">Budget</span>
                        <span class="stat-value" id="game2Budget">Â£50,000</span>
                    </div>
                    <div class="stat-item stat-progress">
                        <span class="stat-label">Problems</span>
                        <span class="stat-value"><span id="game2Solved">0</span>/6</span>
                    </div>
                    <div class="stat-item stat-score">
                        <span class="stat-label">Score</span>
                        <span class="stat-value" id="game2Score">0</span>
                    </div>
                </div>
            </div>

            <!-- Panel Visualisation -->
            <div class="game-room" id="game2Room">
                <div class="room-container panel-container">
                    <!-- Control Panel SVG - Embedded Directly -->
                    <svg class="panel-svg" viewBox="0 0 400 600" preserveAspectRatio="xMidYMid meet">
                        <!-- Panel Background -->
                        <rect x="20" y="20" width="360" height="560" rx="8" ry="8" fill="#3a3a4a" stroke="#5a5a6a" stroke-width="4"/>
                        
                        <!-- Inner panel border detail -->
                        <rect x="35" y="35" width="330" height="530" rx="4" ry="4" fill="none" stroke="#4a4a5a" stroke-width="1"/>
                        
                        <!-- ===== TOP ZONE: E-STOP (y: 50-120) ===== -->
                        <!-- E-stop mounting plate -->
                        <rect x="155" y="55" width="90" height="60" rx="4" fill="#2a2a3a" stroke="#5a5a6a" stroke-width="2"/>
                        <!-- E-stop button outer ring -->
                        <circle cx="200" cy="85" r="28" fill="#222" stroke="#666" stroke-width="3"/>
                        <!-- E-stop button (red mushroom head) -->
                        <circle cx="200" cy="85" r="22" fill="#cc2020" stroke="#aa1818" stroke-width="2"/>
                        <!-- E-stop highlight -->
                        <ellipse cx="193" cy="78" rx="8" ry="5" fill="#ff4040" opacity="0.4"/>
                        <!-- E-stop label -->
                        <text x="200" y="130" text-anchor="middle" fill="#cccccc" font-family="Arial, sans-serif" font-size="9" font-weight="bold">EMERGENCY STOP</text>
                        
                        <!-- ===== UPPER-MIDDLE ZONE: INDICATOR LAMPS (y: 140-220) ===== -->
                        <!-- Indicator panel backing -->
                        <rect x="60" y="150" width="280" height="55" rx="3" fill="#2a2a3a" stroke="#4a4a5a" stroke-width="1"/>
                        
                        <!-- Indicator lamps - deliberately inconsistent colours -->
                        <!-- Lamp 1 - Green -->
                        <circle cx="95" cy="170" r="12" fill="#1a1a1a" stroke="#555" stroke-width="2"/>
                        <circle cx="95" cy="170" r="8" fill="#22aa44"/>
                        <!-- Lamp 2 - Red -->
                        <circle cx="145" cy="170" r="12" fill="#1a1a1a" stroke="#555" stroke-width="2"/>
                        <circle cx="145" cy="170" r="8" fill="#dd3333"/>
                        <!-- Lamp 3 - Amber -->
                        <circle cx="195" cy="170" r="12" fill="#1a1a1a" stroke="#555" stroke-width="2"/>
                        <circle cx="195" cy="170" r="8" fill="#ddaa22"/>
                        <!-- Lamp 4 - Green (different shade - inconsistency!) -->
                        <circle cx="245" cy="170" r="12" fill="#1a1a1a" stroke="#555" stroke-width="2"/>
                        <circle cx="245" cy="170" r="8" fill="#44cc66"/>
                        <!-- Lamp 5 - Red (different shade - inconsistency!) -->
                        <circle cx="295" cy="170" r="12" fill="#1a1a1a" stroke="#555" stroke-width="2"/>
                        <circle cx="295" cy="170" r="8" fill="#ff5555"/>
                        <!-- Lamp 6 - Amber -->
                        <circle cx="345" cy="170" r="12" fill="#1a1a1a" stroke="#555" stroke-width="2"/>
                        <circle cx="345" cy="170" r="8" fill="#cc9900"/>
                        
                        <!-- Lamp labels -->
                        <text x="95" y="195" text-anchor="middle" fill="#999" font-family="Arial, sans-serif" font-size="7">PWR</text>
                        <text x="145" y="195" text-anchor="middle" fill="#999" font-family="Arial, sans-serif" font-size="7">FLT</text>
                        <text x="195" y="195" text-anchor="middle" fill="#999" font-family="Arial, sans-serif" font-size="7">WRN</text>
                        <text x="245" y="195" text-anchor="middle" fill="#999" font-family="Arial, sans-serif" font-size="7">RDY</text>
                        <text x="295" y="195" text-anchor="middle" fill="#999" font-family="Arial, sans-serif" font-size="7">ALM</text>
                        <text x="345" y="195" text-anchor="middle" fill="#999" font-family="Arial, sans-serif" font-size="7">STS</text>
                        
                        <!-- ===== MIDDLE ZONE: SWITCH GRID (y: 240-400) ===== -->
                        <!-- System Group 1 border -->
                        <rect x="50" y="230" width="95" height="175" rx="3" fill="#2a2a3a" stroke="#5a5a6a" stroke-width="1.5"/>
                        <text x="97" y="245" text-anchor="middle" fill="#888" font-family="Arial, sans-serif" font-size="8">SYSTEM A</text>
                        
                        <!-- System Group 2 border -->
                        <rect x="152" y="230" width="95" height="175" rx="3" fill="#2a2a3a" stroke="#5a5a6a" stroke-width="1.5"/>
                        <text x="200" y="245" text-anchor="middle" fill="#888" font-family="Arial, sans-serif" font-size="8">SYSTEM B</text>
                        
                        <!-- System Group 3 border -->
                        <rect x="254" y="230" width="95" height="175" rx="3" fill="#2a2a3a" stroke="#5a5a6a" stroke-width="1.5"/>
                        <text x="302" y="245" text-anchor="middle" fill="#888" font-family="Arial, sans-serif" font-size="8">SYSTEM C</text>
                        
                        <!-- Switches Column 1 (System A) -->
                        <rect x="70" y="260" width="24" height="30" rx="2" fill="#666" stroke="#888" stroke-width="1"/>
                        <rect x="70" y="305" width="24" height="30" rx="2" fill="#666" stroke="#888" stroke-width="1"/>
                        <rect x="70" y="350" width="24" height="30" rx="2" fill="#555" stroke="#888" stroke-width="1"/>
                        <rect x="105" y="260" width="24" height="30" rx="2" fill="#555" stroke="#888" stroke-width="1"/>
                        
                        <!-- Switches Column 2 (System B) -->
                        <rect x="172" y="260" width="24" height="30" rx="2" fill="#555" stroke="#888" stroke-width="1"/>
                        <rect x="172" y="305" width="24" height="30" rx="2" fill="#666" stroke="#888" stroke-width="1"/>
                        <rect x="172" y="350" width="24" height="30" rx="2" fill="#666" stroke="#888" stroke-width="1"/>
                        <rect x="207" y="260" width="24" height="30" rx="2" fill="#666" stroke="#888" stroke-width="1"/>
                        
                        <!-- Switches Column 3 (System C) -->
                        <rect x="274" y="260" width="24" height="30" rx="2" fill="#666" stroke="#888" stroke-width="1"/>
                        <rect x="274" y="305" width="24" height="30" rx="2" fill="#555" stroke="#888" stroke-width="1"/>
                        <rect x="274" y="350" width="24" height="30" rx="2" fill="#666" stroke="#888" stroke-width="1"/>
                        <rect x="309" y="260" width="24" height="30" rx="2" fill="#555" stroke="#888" stroke-width="1"/>
                        
                        <!-- Cryptic switch labels -->
                        <text x="82" y="300" text-anchor="middle" fill="#999" font-family="Courier, monospace" font-size="6">3-RCS-V-024</text>
                        <text x="82" y="345" text-anchor="middle" fill="#999" font-family="Courier, monospace" font-size="6">3-RCS-V-025</text>
                        <text x="82" y="390" text-anchor="middle" fill="#999" font-family="Courier, monospace" font-size="6">3-RCS-P-018</text>
                        <text x="117" y="300" text-anchor="middle" fill="#999" font-family="Courier, monospace" font-size="6">3-RCS-T-041</text>
                        
                        <text x="184" y="300" text-anchor="middle" fill="#999" font-family="Courier, monospace" font-size="6">4-CWS-V-102</text>
                        <text x="184" y="345" text-anchor="middle" fill="#999" font-family="Courier, monospace" font-size="6">4-CWS-V-103</text>
                        <text x="184" y="390" text-anchor="middle" fill="#999" font-family="Courier, monospace" font-size="6">4-CWS-P-055</text>
                        <text x="219" y="300" text-anchor="middle" fill="#999" font-family="Courier, monospace" font-size="6">4-CWS-T-088</text>
                        
                        <text x="286" y="300" text-anchor="middle" fill="#999" font-family="Courier, monospace" font-size="6">2-AUX-V-007</text>
                        <text x="286" y="345" text-anchor="middle" fill="#999" font-family="Courier, monospace" font-size="6">2-AUX-V-008</text>
                        <text x="286" y="390" text-anchor="middle" fill="#999" font-family="Courier, monospace" font-size="6">2-AUX-P-003</text>
                        <text x="321" y="300" text-anchor="middle" fill="#999" font-family="Courier, monospace" font-size="6">2-AUX-T-012</text>
                        
                        <!-- ===== LOWER ZONE: MISSING PROCEDURE HOLDER (y: 420-550) ===== -->
                        <!-- Dashed rectangle suggesting something should be here -->
                        <rect x="60" y="430" width="280" height="130" rx="4" fill="none" stroke="#5a5a6a" stroke-width="2" stroke-dasharray="8,6"/>
                        <!-- Mounting holes suggesting holder was here -->
                        <circle cx="80" cy="450" r="4" fill="#2a2a3a" stroke="#5a5a6a" stroke-width="1"/>
                        <circle cx="320" cy="450" r="4" fill="#2a2a3a" stroke="#5a5a6a" stroke-width="1"/>
                        <circle cx="80" cy="540" r="4" fill="#2a2a3a" stroke="#5a5a6a" stroke-width="1"/>
                        <circle cx="320" cy="540" r="4" fill="#2a2a3a" stroke="#5a5a6a" stroke-width="1"/>
                        <!-- Faded text hint -->
                        <text x="200" y="500" text-anchor="middle" fill="#4a4a5a" font-family="Arial, sans-serif" font-size="10" font-style="italic">(Procedure holder location)</text>
                        
                        <!-- ===== GLARE OVERLAY (hotspot 4) ===== -->
                        <defs>
                            <linearGradient id="glareGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#ffffff;stop-opacity:0.15"/>
                                <stop offset="40%" style="stop-color:#ffffff;stop-opacity:0.08"/>
                                <stop offset="100%" style="stop-color:#ffffff;stop-opacity:0"/>
                            </linearGradient>
                        </defs>
                        <rect x="20" y="20" width="360" height="200" rx="8" fill="url(#glareGradient)"/>
                        
                        <!-- ===== HOTSPOT CIRCLES - Clickable ===== -->
                        <!-- Hotspot 1: E-stop too high -->
                        <circle cx="260" cy="70" r="14" fill="#e94560" stroke="#ffffff" stroke-width="2" class="svg-hotspot-circle" onclick="showProblem2(1)" style="cursor:pointer"/>
                        <text x="260" y="75" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="14" font-weight="bold" style="pointer-events:none">1</text>
                        
                        <!-- Hotspot 2: Grouped by system not task -->
                        <circle cx="360" cy="310" r="14" fill="#e94560" stroke="#ffffff" stroke-width="2" class="svg-hotspot-circle" onclick="showProblem2(2)" style="cursor:pointer"/>
                        <text x="360" y="315" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="14" font-weight="bold" style="pointer-events:none">2</text>
                        
                        <!-- Hotspot 3: Inconsistent colours -->
                        <circle cx="365" cy="170" r="14" fill="#e94560" stroke="#ffffff" stroke-width="2" class="svg-hotspot-circle" onclick="showProblem2(3)" style="cursor:pointer"/>
                        <text x="365" y="175" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="14" font-weight="bold" style="pointer-events:none">3</text>
                        
                        <!-- Hotspot 4: Glare from angle -->
                        <circle cx="55" cy="55" r="14" fill="#e94560" stroke="#ffffff" stroke-width="2" class="svg-hotspot-circle" onclick="showProblem2(4)" style="cursor:pointer"/>
                        <text x="55" y="60" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="14" font-weight="bold" style="pointer-events:none">4</text>
                        
                        <!-- Hotspot 5: Cryptic code labels -->
                        <circle cx="40" cy="390" r="14" fill="#e94560" stroke="#ffffff" stroke-width="2" class="svg-hotspot-circle" onclick="showProblem2(5)" style="cursor:pointer"/>
                        <text x="40" y="395" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="14" font-weight="bold" style="pointer-events:none">5</text>
                        
                        <!-- Hotspot 6: No procedure holder -->
                        <circle cx="360" cy="495" r="14" fill="#e94560" stroke="#ffffff" stroke-width="2" class="svg-hotspot-circle" onclick="showProblem2(6)" style="cursor:pointer"/>
                        <text x="360" y="500" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="14" font-weight="bold" style="pointer-events:none">6</text>
                    </svg>
                </div>

                <div class="room-instruction">
                    <span class="instruction-icon">ðŸ‘†</span>
                    Click on the numbered hotspots to review each human factors problem
                </div>
            </div>

            <!-- Problem Modal (reused structure) -->
            <div class="problem-modal hidden" id="problemModal2">
                <div class="modal-content">
                    <div class="modal-header">
                        <div class="problem-number" id="modal2ProblemNum">1</div>
                        <h4 class="problem-title" id="modal2Title">Problem Title</h4>
                        <button class="modal-close" onclick="closeModal2()">Ã—</button>
                    </div>
                    <div class="modal-body">
                        <p class="problem-description" id="modal2Description">Problem description...</p>
                        <div class="problem-regulation">
                            <span class="reg-icon">ðŸ“‹</span>
                            <span class="reg-text" id="modal2Regulation">Regulation reference</span>
                        </div>
                        
                        <div class="options-title">Select a Fix:</div>
                        <div class="options-list" id="modal2Options">
                            <!-- Options populated by JS -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <div class="budget-remaining">
                            Budget remaining: <span id="modal2Budget">Â£50,000</span>
                        </div>
                        <button class="btn btn-primary" id="confirm2Btn" onclick="confirmSelection2()" disabled>
                            Confirm Selection
                        </button>
                    </div>
                </div>
            </div>

            <!-- Feedback Toast -->
            <div class="feedback-toast hidden" id="feedbackToast2">
                <div class="toast-icon" id="toast2Icon">âœ“</div>
                <div class="toast-content">
                    <div class="toast-title" id="toast2Title">Decision Recorded</div>
                    <div class="toast-message" id="toast2Message">Feedback message...</div>
                </div>
            </div>
        </div>

        <!-- Game Complete with ALARP Documentation -->
        <div class="game-complete hidden" id="game2Complete">
            <div class="complete-content">
                <div class="complete-header">
                    <div class="complete-icon">ðŸ“‹</div>
                    <h3>Scenario Complete</h3>
                    <p>Control Panel Assessment</p>
                </div>
                
                <div class="complete-stats">
                    <div class="final-stat">
                        <div class="final-stat-value" id="finalScore2">0</div>
                        <div class="final-stat-label">Score (out of 600)</div>
                    </div>
                    <div class="final-stat">
                        <div class="final-stat-value" id="finalBudget2">Â£0</div>
                        <div class="final-stat-label">Budget Used</div>
                    </div>
                    <div class="final-stat">
                        <div class="final-stat-value" id="finalRemaining2">Â£0</div>
                        <div class="final-stat-label">Remaining</div>
                    </div>
                </div>

                <!-- ALARP Documentation Preview -->
                <div class="alarp-documentation" id="alarpDocs">
                    <div class="alarp-doc-header">
                        <span class="doc-icon">ðŸ“„</span>
                        <h4>ALARP Assessment Documentation</h4>
                        <span class="doc-note">How your decisions would appear in the safety case</span>
                    </div>
                    <div class="alarp-doc-list" id="alarpDocList">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <div class="alarp-assessment" id="alarpAssessment2">
                    <div class="assessment-header">
                        <span class="assessment-icon">âš–ï¸</span>
                        <span>Overall ALARP Assessment</span>
                    </div>
                    <div class="assessment-content" id="assessmentContent2">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <div class="complete-actions">
                    <button class="btn btn-ghost" onclick="resetGame2()">
                        <span class="btn-icon">â†º</span> Try Again
                    </button>
                    <button class="btn btn-primary" onclick="goToPage(9)">
                        Continue to Checklist <span class="btn-icon">â†’</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ========================================
         PAGE 9: Designer's Checklist
         ======================================== -->
    <div class="page" id="page9" data-page="9">
        <section class="section">
            <div class="section-container">
                <!-- Section Header -->
                <div class="section-header animate-on-scroll">
                    <div class="section-tag">
                        <span>09</span> Practical Tool
                    </div>
                    <h2 class="section-title">Designer's HF & ALARP Checklist</h2>
                    <p class="section-intro">
                        Use this checklist during design reviews to ensure human factors requirements are systematically addressed. Click each category to expand.
                    </p>
                </div>

                <!-- Checklist Container -->
                <div class="checklist-container animate-on-scroll" data-delay="100">
                    
                    <!-- Category 1: Regulatory Compliance -->
                    <div class="checklist-category" data-category="regulatory">
                        <button class="category-header" onclick="toggleCategory('regulatory')">
                            <div class="category-icon">ðŸ“œ</div>
                            <div class="category-info">
                                <h4>Regulatory Compliance</h4>
                                <span class="category-count">5 items</span>
                            </div>
                            <div class="category-toggle">
                                <span class="toggle-icon">+</span>
                            </div>
                        </button>
                        <div class="category-content">
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Have HF requirements been identified in the safety case for this component/system?</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Is the design compliant with ONR SAP EHF.1-12 expectations?</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Has ALARP been demonstrated for HF design decisions?</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Are any HF compromises documented with justification?</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Has function allocation (human vs. automated) been substantiated?</span>
                            </label>
                        </div>
                    </div>

                    <!-- Category 2: Physical Ergonomics -->
                    <div class="checklist-category" data-category="physical">
                        <button class="category-header" onclick="toggleCategory('physical')">
                            <div class="category-icon">ðŸ“</div>
                            <div class="category-info">
                                <h4>Physical Ergonomics</h4>
                                <span class="category-count">5 items</span>
                            </div>
                            <div class="category-toggle">
                                <span class="toggle-icon">+</span>
                            </div>
                        </button>
                        <div class="category-content">
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Are all controls within 5th percentile female reach?</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Are all clearances adequate for 95th percentile male (+ PPE)?</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Are force requirements within 5th percentile capability?</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Have lifting and manual handling limits been applied?</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Is access adequate for inspection, maintenance, and removal?</span>
                            </label>
                        </div>
                    </div>

                    <!-- Category 3: Cognitive Ergonomics -->
                    <div class="checklist-category" data-category="cognitive">
                        <button class="category-header" onclick="toggleCategory('cognitive')">
                            <div class="category-icon">ðŸ§ </div>
                            <div class="category-info">
                                <h4>Cognitive Ergonomics</h4>
                                <span class="category-count">5 items</span>
                            </div>
                            <div class="category-toggle">
                                <span class="toggle-icon">+</span>
                            </div>
                        </button>
                        <div class="category-content">
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Do displays follow consistent colour coding standards?</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Is RED reserved for alarm/danger conditions only?</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Are labels descriptive (not just system codes)?</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Is alarm philosophy defined and appropriate?</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Does the design avoid reliance on human memory for safety?</span>
                            </label>
                        </div>
                    </div>

                    <!-- Category 4: Task & Workload -->
                    <div class="checklist-category" data-category="task">
                        <button class="category-header" onclick="toggleCategory('task')">
                            <div class="category-icon">ðŸ“‹</div>
                            <div class="category-info">
                                <h4>Task & Workload</h4>
                                <span class="category-count">5 items</span>
                            </div>
                            <div class="category-toggle">
                                <span class="toggle-icon">+</span>
                            </div>
                        </button>
                        <div class="category-content">
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Has task analysis been performed for human actions?</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Are procedure requirements achievable in available time?</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Does the design support, not hinder, human tasks?</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Is there adequate time and information for safety decisions?</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Is cognitive workload manageable during abnormal events?</span>
                            </label>
                        </div>
                    </div>

                    <!-- Category 5: Environment -->
                    <div class="checklist-category" data-category="environment">
                        <button class="category-header" onclick="toggleCategory('environment')">
                            <div class="category-icon">ðŸŒ¡ï¸</div>
                            <div class="category-info">
                                <h4>Environment</h4>
                                <span class="category-count">5 items</span>
                            </div>
                            <div class="category-toggle">
                                <span class="toggle-icon">+</span>
                            </div>
                        </button>
                        <div class="category-content">
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Is lighting adequate (300-500 lux for control areas)?</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Are noise levels acceptable for communication?</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Are environmental conditions compatible with required tasks?</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Are slip, trip, and fall hazards minimised?</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Is the workspace compatible with required PPE?</span>
                            </label>
                        </div>
                    </div>

                    <!-- Category 6: ALARP Documentation -->
                    <div class="checklist-category" data-category="alarp">
                        <button class="category-header" onclick="toggleCategory('alarp')">
                            <div class="category-icon">âš–ï¸</div>
                            <div class="category-info">
                                <h4>ALARP Documentation</h4>
                                <span class="category-count">5 items</span>
                            </div>
                            <div class="category-toggle">
                                <span class="toggle-icon">+</span>
                            </div>
                        </button>
                        <div class="category-content">
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Have HF improvement options been identified?</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Are implemented improvements documented?</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Are rejected options documented with justification?</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Would the rejection survive regulatory scrutiny?</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" class="check-input">
                                <span class="check-box"></span>
                                <span class="check-text">Is gross disproportion demonstrated where claimed?</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Progress Counter -->
                <div class="checklist-progress animate-on-scroll" data-delay="200">
                    <div class="progress-info">
                        <span class="progress-label">Items Checked</span>
                        <span class="progress-count"><span id="checkedCount">0</span> / 30</span>
                    </div>
                    <div class="progress-bar-full">
                        <div class="progress-bar-fill" id="checklistProgress"></div>
                    </div>
                </div>

                <!-- Regulatory Reminder -->
                <div class="regulatory-callout animate-on-scroll" data-delay="300">
                    <div class="reg-icon">âš ï¸</div>
                    <div class="reg-content">
                        <h4>Regulatory Reminder</h4>
                        <p>ONR SAP EHF.2 requires that dependence on human action for safety be <strong>minimised</strong>. If your design creates a reliance on human performance, you must substantiate why automation or engineering controls were not reasonably practicable.</p>
                    </div>
                </div>

                <!-- Navigation -->
                <div class="section-nav">
                    <button class="btn btn-ghost" onclick="goToPage(8)">
                        <span class="btn-icon">â†</span> Previous
                    </button>
                    <button class="btn btn-primary" onclick="goToPage(10)">
                        Complete Module <span class="btn-icon">â†’</span>
                    </button>
                </div>
            </div>
        </section>
    </div>

    <!-- ========================================
         PAGE 10: Key Takeaways
         ======================================== -->
    <div class="page" id="page10" data-page="10">
        <section class="section">
            <div class="section-container">
                <!-- Completion Header -->
                <div class="completion-header animate-on-scroll">
                    <div class="completion-badge">
                        <span class="badge-icon">ðŸŽ“</span>
                        <span class="badge-text">MODULE COMPLETE</span>
                    </div>
                    <h2 class="completion-title">ALARP & Human Factors in Design</h2>
                    <p class="completion-subtitle">Module 5.4 Summary</p>
                </div>

                <!-- Key Takeaways -->
                <div class="takeaways-container animate-on-scroll" data-delay="100">
                    <h3 class="takeaways-title">
                        <span class="title-icon">ðŸ’¡</span>
                        Key Takeaways
                    </h3>
                    
                    <div class="takeaways-grid">
                        <div class="takeaway-card">
                            <div class="takeaway-number">1</div>
                            <div class="takeaway-content">
                                <h4>Design HF â‰  Operational HF</h4>
                                <p>Design human factors are locked in at construction. You cannot train out a bad design â€” the right action must be the easy action.</p>
                            </div>
                        </div>

                        <div class="takeaway-card">
                            <div class="takeaway-number">2</div>
                            <div class="takeaway-content">
                                <h4>ALARP Is a Legal Requirement</h4>
                                <p>Risk must be reduced as low as reasonably practicable. To reject a safety improvement, costs must be <em>grossly disproportionate</em> â€” affordability is irrelevant.</p>
                            </div>
                        </div>

                        <div class="takeaway-card">
                            <div class="takeaway-number">3</div>
                            <div class="takeaway-content">
                                <h4>Design for the Range</h4>
                                <p>Reaches for 5th percentile female. Clearances for 95th percentile male. Add allowance for PPE. Never require maximum reach for routine tasks.</p>
                            </div>
                        </div>

                        <div class="takeaway-card">
                            <div class="takeaway-number">4</div>
                            <div class="takeaway-content">
                                <h4>Cognitive Load Matters</h4>
                                <p>Operators need spare capacity for emergencies. Consistent colours, clear labels, and task-based layouts reduce mental burden when it counts.</p>
                            </div>
                        </div>

                        <div class="takeaway-card">
                            <div class="takeaway-number">5</div>
                            <div class="takeaway-content">
                                <h4>Document Everything</h4>
                                <p>Every HF decision needs documentation. Implemented improvements, rejected options, and ALARP justifications all feed the safety case.</p>
                            </div>
                        </div>

                        <div class="takeaway-card">
                            <div class="takeaway-number">6</div>
                            <div class="takeaway-content">
                                <h4>Learn From History</h4>
                                <p>TMI and Davis-Besse weren't operator failures â€” they were design failures. The nuclear industry exists because we learned these lessons.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- The Core Message -->
                <div class="core-message animate-on-scroll" data-delay="200">
                    <div class="message-border">
                        <div class="message-icon">ðŸŽ¯</div>
                        <div class="message-text">
                            <p class="message-main">"You can't train out a bad design."</p>
                            <p class="message-sub">Your designs will operate for 60+ years. Make them work <em>with</em> humans, not against them.</p>
                        </div>
                    </div>
                </div>

                <!-- Quick Reference -->
                <div class="quick-reference animate-on-scroll" data-delay="300">
                    <h3 class="reference-title">
                        <span class="title-icon">ðŸ“š</span>
                        Quick Reference
                    </h3>
                    <div class="reference-grid">
                        <div class="reference-item">
                            <div class="ref-header">UK Regulatory</div>
                            <div class="ref-links">
                                <span class="ref-tag">ONR SAP EHF.1-12</span>
                                <span class="ref-tag">NS-TAST-GD-058</span>
                                <span class="ref-tag">NS-TAST-GD-059</span>
                                <span class="ref-tag">NS-TAST-GD-062</span>
                            </div>
                        </div>
                        <div class="reference-item">
                            <div class="ref-header">ALARP Guidance</div>
                            <div class="ref-links">
                                <span class="ref-tag">HSWA 1974</span>
                                <span class="ref-tag">NS-TAST-GD-005</span>
                                <span class="ref-tag">Reducing Risks (R2P2)</span>
                            </div>
                        </div>
                        <div class="reference-item">
                            <div class="ref-header">International</div>
                            <div class="ref-links">
                                <span class="ref-tag">IAEA SSR-2/1 Req.32</span>
                                <span class="ref-tag">IAEA SSG-51</span>
                                <span class="ref-tag">NUREG-0700</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Completion Certificate Style Box -->
                <div class="completion-certificate animate-on-scroll" data-delay="400">
                    <div class="cert-border">
                        <div class="cert-content">
                            <div class="cert-logo">âš›ï¸</div>
                            <h4>Module 5.4 Completed</h4>
                            <p class="cert-subtitle">ALARP & Human Factors in Design</p>
                            <p class="cert-message">You've completed the learning content for this module. Apply these principles in your design reviews and ALARP assessments.</p>
                            <div class="cert-date" id="completionDate"></div>
                        </div>
                    </div>
                </div>

                <!-- Final Actions -->
                <div class="final-actions animate-on-scroll" data-delay="500">
                    <button class="btn btn-primary btn-lg" onclick="goToPage(1)">
                        <span class="btn-icon">â†º</span> Review Module
                    </button>
                </div>

                <!-- Footer -->
                <div class="module-footer animate-on-scroll" data-delay="600">
                    <p>Module 5.4 â€¢ ALARP & Human Factors in Design</p>
                    <p class="footer-copyright">Â© The Nuclear House â€¢ New Build Design Training Programme</p>
                </div>
            </div>
        </section>
    </div>

    <!-- ========================================
         JAVASCRIPT
         ======================================== -->
    <script>
        // ==================== STATE MANAGEMENT ====================
        let currentPage = 1;
        const totalPages = 10;
        let visitedPages = new Set([1]);

        // ==================== NAVIGATION ====================
        function goToPage(pageNum) {
            if (pageNum < 1 || pageNum > totalPages) return;

            // Hide current page
            const currentPageEl = document.getElementById(`page${currentPage}`);
            if (currentPageEl) {
                currentPageEl.classList.remove('active');
            }

            // Show new page
            currentPage = pageNum;
            const newPageEl = document.getElementById(`page${pageNum}`);
            if (newPageEl) {
                newPageEl.classList.add('active');
            }

            // Track visited pages
            visitedPages.add(pageNum);

            // Update progress
            updateProgress();

            // Update navigation
            updateNavigation();

            // Close menu on mobile
            closeMenu();

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'instant' });

            // Load audio for this screen
            loadAudioForScreen(pageNum);

            // Trigger page animations after short delay
            setTimeout(() => {
                triggerPageAnimations(pageNum);
            }, 50);

            // Update completion stats on page 10
            if (pageNum === 10) {
                setTimeout(() => {
                    updateCompletionStats();
                }, 100);
            }
        }

        function updateProgress() {
            const progress = Math.round((visitedPages.size / totalPages) * 100);
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');

            if (progressFill) {
                progressFill.style.width = `${progress}%`;
            }
            if (progressText) {
                progressText.textContent = `${progress}%`;
            }
        }

        function updateNavigation() {
            const navLinks = document.querySelectorAll('.nav-menu a[data-page]');
            
            navLinks.forEach(link => {
                const pageNum = parseInt(link.getAttribute('data-page'));
                
                // Remove all state classes
                link.classList.remove('active', 'completed');
                
                // Add appropriate class
                if (pageNum === currentPage) {
                    link.classList.add('active');
                } else if (visitedPages.has(pageNum)) {
                    link.classList.add('completed');
                }
            });
        }

        // ==================== MENU TOGGLE ====================
        function toggleMenu() {
            const navMenu = document.getElementById('navMenu');
            const menuToggle = document.getElementById('menuToggle');
            
            navMenu.classList.toggle('open');
            menuToggle.classList.toggle('active');
        }

        function closeMenu() {
            const navMenu = document.getElementById('navMenu');
            const menuToggle = document.getElementById('menuToggle');
            
            navMenu.classList.remove('open');
            menuToggle.classList.remove('active');
        }

        // ==================== KEYBOARD NAVIGATION ====================
        document.addEventListener('keydown', function(e) {
            // Arrow keys for navigation
            if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {
                if (currentPage < totalPages) {
                    goToPage(currentPage + 1);
                }
            } else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
                if (currentPage > 1) {
                    goToPage(currentPage - 1);
                }
            }
            
            // Escape to close menu
            if (e.key === 'Escape') {
                closeMenu();
            }
        });

        // ==================== CLICK OUTSIDE TO CLOSE MENU ====================
        document.addEventListener('click', function(e) {
            const navMenu = document.getElementById('navMenu');
            const menuToggle = document.getElementById('menuToggle');
            
            if (!navMenu.contains(e.target) && !menuToggle.contains(e.target)) {
                closeMenu();
            }
        });

        // ==================== ALARP TRIANGLE ====================
        function showAlarpZone(zone) {
            // Hide all zone details
            document.querySelectorAll('.zone-detail').forEach(el => {
                el.classList.remove('active');
            });

            // Remove active state from all zones
            document.querySelectorAll('.alarp-zone').forEach(el => {
                el.classList.remove('active');
            });

            // Show selected zone detail
            const zoneMap = {
                'unacceptable': 'zoneUnacceptable',
                'tolerable': 'zoneTolerable',
                'acceptable': 'zoneAcceptable'
            };

            const detailEl = document.getElementById(zoneMap[zone]);
            if (detailEl) {
                detailEl.classList.add('active');
            }

            // Add active state to clicked zone
            const zoneEl = document.querySelector(`.zone-${zone}`);
            if (zoneEl) {
                zoneEl.classList.add('active');
            }
        }

        // ==================== BODY DIAGRAM ====================
        function showBodyZone(zone) {
            // Hide all body details
            document.querySelectorAll('.body-detail').forEach(el => {
                el.classList.remove('active');
            });

            // Remove active state from all hotspots
            document.querySelectorAll('.hotspot').forEach(el => {
                el.classList.remove('active');
            });

            // Show selected zone detail
            const zoneMap = {
                'head': 'bodyHead',
                'shoulders': 'bodyShoulders',
                'hands': 'bodyHands',
                'torso': 'bodyTorso',
                'legs': 'bodyLegs'
            };

            const detailEl = document.getElementById(zoneMap[zone]);
            if (detailEl) {
                detailEl.classList.add('active');
            }

            // Add active state to clicked hotspots
            document.querySelectorAll(`.hotspot-${zone}`).forEach(el => {
                el.classList.add('active');
            });
        }

        // ==================== COGNITIVE TABS ====================
        function showCognitiveTab(tab) {
            // Remove active from all tabs and panels
            document.querySelectorAll('.tab-btn').forEach(el => {
                el.classList.remove('active');
            });
            document.querySelectorAll('.tab-panel').forEach(el => {
                el.classList.remove('active');
            });

            // Activate selected tab button
            const tabBtn = document.querySelector(`.tab-btn[data-tab="${tab}"]`);
            if (tabBtn) {
                tabBtn.classList.add('active');
            }

            // Show selected panel
            const panelMap = {
                'displays': 'tabDisplays',
                'alarms': 'tabAlarms',
                'workload': 'tabWorkload'
            };

            const panelEl = document.getElementById(panelMap[tab]);
            if (panelEl) {
                panelEl.classList.add('active');
            }
        }

        // ==================== GAME 1: MAINTENANCE CELL ====================
        const game1Problems = [
            {
                id: 1,
                title: "High Valve Position",
                description: "The isolation valve is mounted at 2.1m height â€” above the 95th percentile standing reach. Workers must use improvised steps or stretch dangerously to operate it.",
                regulation: "ONR SAP EHF.2: Design reaches for 5th percentile",
                options: [
                    { id: 'a', text: "Relocate valve to 1.5m height", cost: 25000, score: 100, feedback: "Excellent. Relocating eliminates the hazard at source â€” this is Relevant Good Practice and the preferred hierarchy approach." },
                    { id: 'b', text: "Install permanent access platform with handrails", cost: 8000, score: 70, feedback: "Acceptable compromise. The platform provides safe access, though the valve remains elevated. Document the ALARP justification." },
                    { id: 'c', text: "Install chain wheel operator extension", cost: 4000, score: 80, feedback: "Good solution. Chain wheel brings the operating point to accessible height while valve stays in optimal process location. Common retrofit approach." },
                    { id: 'd', text: "Provide portable step stool", cost: 500, score: 20, feedback: "ALARP Concern. Step stools are unstable and rely on operator compliance. This creates ongoing risk and may require justification during assessment." },
                    { id: 'e', text: "Accept and add to risk assessment", cost: 0, score: 5, feedback: "Not acceptable. This is a clear non-compliance with EHF.2. No amount of risk assessment documentation fixes a bad design." }
                ]
            },
            {
                id: 2,
                title: "Hidden Drain Valve",
                description: "A drain valve is located behind pipe runs, requiring workers to reach through and around obstacles. Visual confirmation of valve position is impossible from the operating location.",
                regulation: "SAP EMT.6: Access for inspection and maintenance",
                options: [
                    { id: 'a', text: "Reroute piping to clear access", cost: 15000, score: 100, feedback: "Excellent. Clear access eliminates the reach hazard and allows visual confirmation. Good maintenance-focused design." },
                    { id: 'b', text: "Install access hatch with mirror", cost: 5000, score: 65, feedback: "Reasonable compromise. The hatch improves access but the location remains awkward. Consider remote position indication." },
                    { id: 'c', text: "Add remote position indicator to local panel", cost: 3500, score: 75, feedback: "Good solution. Remote indication confirms valve position without visual access. Combine with improved access where practicable." },
                    { id: 'd', text: "Install CCTV camera for visual confirmation", cost: 2000, score: 50, feedback: "Partial solution. Camera helps with visual confirmation but doesn't address physical access for maintenance. Consider as supplement only." },
                    { id: 'e', text: "Accept difficult access", cost: 0, score: 10, feedback: "ALARP Concern. Accepting known poor access requires strong justification. This will likely generate assessment findings and increase maintenance dose/time." }
                ]
            },
            {
                id: 3,
                title: "Inadequate Lighting",
                description: "The maintenance cell lighting provides only 200 lux â€” below the 300 lux minimum standard for maintenance work areas. Workers report difficulty reading labels and identifying valve positions.",
                regulation: "NS-TAST-GD-062: Workplace environment standards",
                options: [
                    { id: 'a', text: "Install additional fixed lighting to 500 lux", cost: 4500, score: 100, feedback: "Excellent. Exceeding minimum standard (500 lux vs 300 lux required) provides margin for lamp degradation and improves safety." },
                    { id: 'b', text: "Install additional fixed lighting to 300 lux", cost: 3000, score: 90, feedback: "Correct solution. Fixed lighting to the required 300 lux standard addresses the root cause permanently." },
                    { id: 'c', text: "Provide portable task lighting", cost: 800, score: 60, feedback: "Partial solution. Task lighting helps but adds setup time and may not be available when needed. Consider fixed lighting for critical areas." },
                    { id: 'd', text: "Install emergency lighting upgrade", cost: 1500, score: 45, feedback: "Misses the point. Emergency lighting is for evacuation, not work tasks. This doesn't address the 200 lux deficiency for normal operations." },
                    { id: 'e', text: "Issue personal torches", cost: 200, score: 25, feedback: "Weak solution. Torches occupy hands needed for work, batteries fail, and this relies on workers remembering equipment. Not a design solution." }
                ]
            },
            {
                id: 4,
                title: "Confusing Display Colours",
                description: "The local control panel uses RED indicators to show 'valve closed' â€” the normal operating state. During a recent event, operators hesitated believing they were seeing alarm conditions.",
                regulation: "NUREG-0700: RED reserved for alarm/danger only",
                options: [
                    { id: 'a', text: "Redesign display with correct colour coding", cost: 12000, score: 100, feedback: "Correct solution. Proper colour coding (GREEN=normal, RED=alarm only) prevents confusion. This is a fundamental HMI principle." },
                    { id: 'b', text: "Replace with modern digital display", cost: 8000, score: 95, feedback: "Excellent upgrade. Modern displays allow proper colour coding plus additional status information. Consider standardising across facility." },
                    { id: 'c', text: "Add status text labels to indicators", cost: 2000, score: 55, feedback: "Partial fix. Labels help but don't address the instinctive colour response during stress. Operators will still hesitate on red." },
                    { id: 'd', text: "Add shape coding (circle vs triangle)", cost: 3500, score: 70, feedback: "Good supplementary measure. Shape coding helps colour-blind operators and adds redundancy. Best combined with colour correction." },
                    { id: 'e', text: "Train operators on colour meanings", cost: 0, score: 5, feedback: "ALARP Concern. 'You cannot train out a bad design.' This violates fundamental HMI principles and relies entirely on human memory under stress." }
                ]
            },
            {
                id: 5,
                title: "High Torque Manual Valve",
                description: "The manual isolation valve requires 80Nm of torque to operate â€” significantly exceeding the 5th percentile female grip capability (~35Nm). Some workers cannot operate it alone.",
                regulation: "EHF.2: Design forces for 5th percentile capability",
                options: [
                    { id: 'a', text: "Install powered actuator", cost: 18000, score: 100, feedback: "Excellent. Automation eliminates the manual handling risk entirely. Operator only needs to press a button." },
                    { id: 'b', text: "Replace with low-torque quarter-turn valve", cost: 12000, score: 95, feedback: "Excellent alternative. Modern quarter-turn valves require much less torque and operate faster. Good design improvement." },
                    { id: 'c', text: "Fit torque multiplier tool", cost: 3500, score: 70, feedback: "Good compromise. The tool reduces required effort, though it adds a step and the tool must be available. Acceptable ALARP solution." },
                    { id: 'd', text: "Install extended handwheel", cost: 2000, score: 60, feedback: "Reasonable improvement. Larger diameter reduces force required but valve may still exceed capability. Test with target population." },
                    { id: 'e', text: "Label as 2-person operation", cost: 100, score: 15, feedback: "ALARP Concern. This administrative control relies on staffing and compliance. It doesn't fix the design problem and doubles labour requirements forever." }
                ]
            },
            {
                id: 6,
                title: "Narrow Access Clearance",
                description: "The gap between equipment provides only 600mm clearance â€” below the 700mm minimum for personnel access. Workers must turn sideways and cannot easily evacuate in an emergency.",
                regulation: "NS-TAST-GD-062: Minimum workspace clearances",
                options: [
                    { id: 'a', text: "Relocate equipment to achieve 700mm+", cost: 20000, score: 100, feedback: "Correct solution. Meeting the clearance standard allows safe access and emergency egress. Worth the investment for worker safety." },
                    { id: 'b', text: "Redesign equipment mounting (compact option)", cost: 15000, score: 90, feedback: "Good alternative. If equipment can be made more compact or remounted, this achieves clearance without major relocation." },
                    { id: 'c', text: "Install alternative access route", cost: 8000, score: 75, feedback: "Acceptable if primary access is impractical to modify. Alternative route must meet all clearance standards and not increase travel distance significantly." },
                    { id: 'd', text: "Mark as restricted access zone", cost: 500, score: 40, feedback: "Partial mitigation only. Marking reduces casual access but doesn't address emergency egress or PPE bulk. Requires strong ALARP case." },
                    { id: 'e', text: "Accept the constraint", cost: 0, score: 0, feedback: "Not acceptable. Below-minimum clearance is a known non-compliance. This will require formal ALARP justification with compensatory measures." }
                ]
            }
        ];

        let game1State = {
            budget: 75000,
            startBudget: 75000,
            score: 0,
            solved: 0,
            decisions: [],
            currentProblem: null,
            selectedOption: null
        };

        function startGame1() {
            document.getElementById('game1Intro').classList.add('hidden');
            document.getElementById('game1Area').classList.remove('hidden');
            resetGame1State();
        }

        function resetGame1State() {
            game1State = {
                budget: 75000,
                startBudget: 75000,
                score: 0,
                solved: 0,
                decisions: [],
                currentProblem: null,
                selectedOption: null
            };
            updateGame1Stats();
            
            // Reset all hotspots
            document.querySelectorAll('.game-hotspot').forEach(h => {
                h.classList.remove('solved');
            });
        }

        function resetGame1() {
            document.getElementById('game1Complete').classList.add('hidden');
            document.getElementById('game1Intro').classList.remove('hidden');
            document.getElementById('game1Area').classList.add('hidden');
            resetGame1State();
        }

        function updateGame1Stats() {
            document.getElementById('game1Budget').textContent = `Â£${game1State.budget.toLocaleString()}`;
            document.getElementById('game1Solved').textContent = game1State.solved;
            document.getElementById('game1Score').textContent = game1State.score;

            // Update budget colour
            const budgetStat = document.querySelector('.stat-budget');
            budgetStat.classList.remove('low', 'critical');
            if (game1State.budget < 20000) {
                budgetStat.classList.add('critical');
            } else if (game1State.budget < 40000) {
                budgetStat.classList.add('low');
            }
        }

        function showProblem(problemId) {
            const problem = game1Problems.find(p => p.id === problemId);
            if (!problem) return;

            game1State.currentProblem = problem;
            game1State.selectedOption = null;

            // Populate modal
            document.getElementById('modalProblemNum').textContent = problem.id;
            document.getElementById('modalTitle').textContent = problem.title;
            document.getElementById('modalDescription').textContent = problem.description;
            document.getElementById('modalRegulation').textContent = problem.regulation;
            document.getElementById('modalBudget').textContent = `Â£${game1State.budget.toLocaleString()}`;

            // Build options
            const optionsContainer = document.getElementById('modalOptions');
            optionsContainer.innerHTML = '';

            problem.options.forEach(opt => {
                const canAfford = game1State.budget >= opt.cost;
                const optionEl = document.createElement('div');
                optionEl.className = `option-item ${!canAfford ? 'disabled' : ''}`;
                optionEl.dataset.optionId = opt.id;
                optionEl.onclick = canAfford ? () => selectOption(opt.id) : null;

                optionEl.innerHTML = `
                    <div class="option-radio"></div>
                    <div class="option-content">
                        <span class="option-letter">${opt.id.toUpperCase()})</span>
                        <span class="option-text">${opt.text}</span>
                    </div>
                    <div class="option-cost">${opt.cost === 0 ? 'Free' : 'Â£' + opt.cost.toLocaleString()}</div>
                `;

                optionsContainer.appendChild(optionEl);
            });

            // Reset confirm button
            document.getElementById('confirmBtn').disabled = true;

            // Show modal
            document.getElementById('problemModal').classList.remove('hidden');
        }

        function selectOption(optionId) {
            game1State.selectedOption = optionId;

            // Update UI
            document.querySelectorAll('.option-item').forEach(el => {
                el.classList.remove('selected');
                if (el.dataset.optionId === optionId) {
                    el.classList.add('selected');
                }
            });

            // Enable confirm
            document.getElementById('confirmBtn').disabled = false;
        }

        function closeModal() {
            document.getElementById('problemModal').classList.add('hidden');
            game1State.currentProblem = null;
            game1State.selectedOption = null;
        }

        function confirmSelection() {
            if (!game1State.currentProblem || !game1State.selectedOption) return;

            const problem = game1State.currentProblem;
            const option = problem.options.find(o => o.id === game1State.selectedOption);

            // Apply decision
            game1State.budget -= option.cost;
            game1State.score += option.score;
            game1State.solved++;
            game1State.decisions.push({
                problemId: problem.id,
                problemTitle: problem.title,
                optionId: option.id,
                optionText: option.text,
                cost: option.cost,
                score: option.score,
                feedback: option.feedback,
                regulation: problem.regulation
            });

            // Mark hotspot as solved
            document.getElementById(`hotspot${problem.id}`).classList.add('solved');

            // Close modal
            closeModal();

            // Update stats
            updateGame1Stats();

            // Show feedback toast
            showFeedback(option);

            // Check if game complete
            if (game1State.solved >= 6) {
                setTimeout(() => {
                    completeGame1();
                }, 2500);
            }
        }

        function showFeedback(option) {
            const toast = document.getElementById('feedbackToast');
            const toastIcon = document.getElementById('toastIcon');
            const toastTitle = document.getElementById('toastTitle');
            const toastMessage = document.getElementById('toastMessage');

            // Determine feedback type
            toast.classList.remove('warning', 'concern');
            if (option.score >= 80) {
                toastIcon.textContent = 'âœ“';
                toastTitle.textContent = 'Good Decision';
            } else if (option.score >= 50) {
                toast.classList.add('warning');
                toastIcon.textContent = 'âš ';
                toastTitle.textContent = 'Acceptable Compromise';
            } else {
                toast.classList.add('concern');
                toastIcon.textContent = 'âš ';
                toastTitle.textContent = 'ALARP Concern';
            }

            toastMessage.textContent = option.feedback;

            // Show toast
            toast.classList.remove('hidden');

            // Hide after delay
            setTimeout(() => {
                toast.classList.add('hidden');
            }, 4000);
        }

        function completeGame1() {
            document.getElementById('game1Area').classList.add('hidden');
            document.getElementById('game1Complete').classList.remove('hidden');

            // Populate final stats
            document.getElementById('finalScore1').textContent = game1State.score;
            document.getElementById('finalBudget1').textContent = `Â£${(game1State.startBudget - game1State.budget).toLocaleString()}`;
            document.getElementById('finalRemaining1').textContent = `Â£${game1State.budget.toLocaleString()}`;

            // Build ALARP Documentation with optimal solution feedback
            const alarpDocList = document.getElementById('alarpDocList1');
            alarpDocList.innerHTML = '';

            game1State.decisions.forEach(dec => {
                // Find the optimal solution for this problem
                const problem = game1Problems.find(p => p.id === dec.problemId);
                const optimalOption = problem.options.reduce((best, opt) => opt.score > best.score ? opt : best, problem.options[0]);
                
                const statusClass = dec.score >= 80 ? 'implemented' : (dec.score >= 50 ? 'partial' : 'requires-justification');
                const statusText = dec.score >= 80 ? 'âœ“ Implemented' : (dec.score >= 50 ? 'âš  Partial Implementation' : 'âš  Requires Justification');
                
                const docItem = document.createElement('div');
                docItem.className = 'alarp-doc-item';
                
                // Build justification text
                let justificationHtml = '';
                if (dec.score >= 80) {
                    justificationHtml = `
                        <div class="doc-justification">
                            <div class="doc-justification-label">ALARP Justification</div>
                            <div class="doc-justification-text">${dec.optionText} addresses the identified HF issue. Cost (Â£${dec.cost.toLocaleString()}) is not grossly disproportionate to safety benefit.</div>
                        </div>
                    `;
                } else if (dec.score >= 50) {
                    justificationHtml = `
                        <div class="doc-justification">
                            <div class="doc-justification-label">ALARP Justification</div>
                            <div class="doc-justification-text">${dec.feedback.split('.')[0]}. Further risk reduction options were considered but deemed disproportionate to residual risk.</div>
                        </div>
                        <div class="doc-optimal">
                            <div class="doc-optimal-label">ðŸ’¡ Optimal Solution</div>
                            <div class="doc-optimal-text"><strong>${optimalOption.text}</strong> (Â£${optimalOption.cost.toLocaleString()}) â€” ${optimalOption.feedback.split('.')[0]}.</div>
                        </div>
                    `;
                } else {
                    justificationHtml = `
                        <div class="doc-justification">
                            <div class="doc-justification-label">ALARP Justification</div>
                            <div class="doc-justification-text doc-justification-required">[REQUIRED] You must justify why engineering solutions were not reasonably practicable. Administrative controls alone may not satisfy ALARP requirements.</div>
                        </div>
                        <div class="doc-optimal">
                            <div class="doc-optimal-label">ðŸ’¡ Optimal Solution</div>
                            <div class="doc-optimal-text"><strong>${optimalOption.text}</strong> (Â£${optimalOption.cost.toLocaleString()}) â€” ${optimalOption.feedback.split('.')[0]}.</div>
                        </div>
                    `;
                }
                
                docItem.innerHTML = `
                    <div class="doc-item-header">
                        <span class="doc-item-title">Decision ${dec.problemId}: ${dec.problemTitle}</span>
                        <span class="doc-item-status ${statusClass}">${statusText}</span>
                    </div>
                    <div class="doc-item-body">
                        <div class="doc-row">
                            <span class="doc-label">Your Choice:</span>
                            <span class="doc-value">${dec.optionText}</span>
                        </div>
                        <div class="doc-row">
                            <span class="doc-label">Cost:</span>
                            <span class="doc-value">Â£${dec.cost.toLocaleString()}</span>
                        </div>
                        <div class="doc-row">
                            <span class="doc-label">Regulation:</span>
                            <span class="doc-value">${dec.regulation}</span>
                        </div>
                        ${justificationHtml}
                    </div>
                `;
                
                alarpDocList.appendChild(docItem);
            });

            // Generate ALARP assessment
            const concerns = game1State.decisions.filter(d => d.score < 50).length;
            const compromises = game1State.decisions.filter(d => d.score >= 50 && d.score < 80).length;
            const excellent = game1State.decisions.filter(d => d.score >= 80).length;

            const assessment = document.getElementById('assessmentContent1');
            if (concerns === 0 && compromises <= 1) {
                assessment.innerHTML = `<p><strong>Strong ALARP position.</strong> You prioritised safety-focused solutions and made sound engineering decisions. This approach will likely satisfy regulatory expectations with minimal challenge.</p>
                <p>Documentation should be straightforward â€” the decisions align with Relevant Good Practice.</p>`;
            } else if (concerns <= 2) {
                assessment.innerHTML = `<p><strong>Mixed ALARP position.</strong> Some decisions may require additional justification during assessment. You have ${concerns} decision(s) that could be challenged as not ALARP.</p>
                <p>Consider whether budget constraints truly made better options "grossly disproportionate" â€” remember, affordability is not an ALARP factor.</p>`;
            } else {
                assessment.innerHTML = `<p><strong>Weak ALARP position.</strong> Multiple decisions rely on administrative controls or accept known non-compliances. This approach will likely generate assessment findings.</p>
                <p>The safety case will need to demonstrate why engineering solutions were not reasonably practicable. "Training the operator" is not an acceptable substitute for good design.</p>`;
            }
        }

        // ==================== GAME 2: CONTROL PANEL ====================
        const game2Problems = [
            {
                id: 1,
                title: "E-Stop Position Too High",
                description: "The emergency stop button is mounted at 1.6m height â€” above the 5th percentile female standing reach (approximately 1.4m). In an emergency, shorter operators may not reach it quickly.",
                regulation: "EHF.2: Emergency controls within 5th percentile reach",
                options: [
                    { id: 'a', text: "Relocate E-Stop to 1.2m height", cost: 4000, score: 100, feedback: "Correct solution. Relocating ensures the E-Stop is within reach of all operators. Emergency controls must be accessible to everyone." },
                    { id: 'b', text: "Add duplicate E-Stop at lower height", cost: 6000, score: 90, feedback: "Good solution. Redundant E-Stops improve accessibility, though it adds complexity. Well justified if relocation is impractical." },
                    { id: 'c', text: "Install pull-cord E-Stop system", cost: 3500, score: 85, feedback: "Good alternative. Pull-cord systems are accessible at any height and along the full cord length. Common in industrial settings." },
                    { id: 'd', text: "Install wireless E-Stop pendant", cost: 2500, score: 70, feedback: "Reasonable option. Portable E-Stop can be carried by operator. However, battery dependency and signal reliability must be addressed." },
                    { id: 'e', text: "Accept current position", cost: 0, score: 5, feedback: "Not acceptable. Emergency stop accessibility is a fundamental safety requirement. This will be flagged as a non-compliance." }
                ]
            },
            {
                id: 2,
                title: "Controls Grouped by System",
                description: "Controls are grouped by engineering system (System A, System B) rather than by operational task sequence. Operators must jump between panel areas to complete routine procedures.",
                regulation: "SSG-51: Task-based control layout principles",
                options: [
                    { id: 'a', text: "Redesign layout by task sequence", cost: 15000, score: 100, feedback: "Excellent choice. Task-based layouts reduce errors and improve response times. This aligns with HFE best practice from SSG-51." },
                    { id: 'b', text: "Install soft control touchscreen overlay", cost: 12000, score: 85, feedback: "Modern solution. Soft controls can be arranged by task without physical rewiring. Allows flexible layouts for different operations." },
                    { id: 'c', text: "Add task sequence labels and zones", cost: 2500, score: 60, feedback: "Partial solution. Labels help but don't address the physical layout issue. Operators still move inefficiently across the panel." },
                    { id: 'd', text: "Create demarcation lines on panel face", cost: 800, score: 45, feedback: "Minimal improvement. Demarcation provides visual grouping but operators still need to cross the panel. Better than nothing." },
                    { id: 'e', text: "Rely on procedures to guide sequence", cost: 0, score: 15, feedback: "ALARP Concern. Relying on procedures transfers the burden to operators. This increases cognitive load during time-critical operations." }
                ]
            },
            {
                id: 3,
                title: "Inconsistent Colour Coding",
                description: "Indicator lamps use inconsistent colours across this panel and others in the facility. RED is used for both 'closed valve' (normal) and 'alarm' conditions, causing confusion.",
                regulation: "NUREG-0700: Consistent colour coding standards",
                options: [
                    { id: 'a', text: "Standardise colours across all panels", cost: 22000, score: 100, feedback: "Ideal solution. Facility-wide standardisation eliminates confusion. This addresses the root cause comprehensively." },
                    { id: 'b', text: "Replace all indicators with LED matrix", cost: 15000, score: 90, feedback: "Excellent upgrade. LED matrix allows proper colour coding plus text/symbols. More flexibility for future changes." },
                    { id: 'c', text: "Standardise this panel only", cost: 8000, score: 70, feedback: "Acceptable compromise. Fixes this panel but creates inconsistency with others. Document as interim measure with plan for wider rollout." },
                    { id: 'd', text: "Add shape coding to supplement colours", cost: 4000, score: 60, feedback: "Partial improvement. Shapes help colour-blind operators but don't fix the RED=normal problem. Use as supplement to colour fix." },
                    { id: 'e', text: "Add legend plate explaining colours", cost: 500, score: 25, feedback: "Weak solution. Legends require operators to reference them during events. This doesn't address instinctive colour response under stress." }
                ]
            },
            {
                id: 4,
                title: "Panel Glare from Lighting",
                description: "The panel face is angled at 15Â°, causing glare from overhead lights. Operators report difficulty reading displays and indicators, especially on night shifts with adjusted lighting.",
                regulation: "NS-TAST-GD-062: Visual environment requirements",
                options: [
                    { id: 'a', text: "Redesign panel angle to 30Â°", cost: 10000, score: 100, feedback: "Correct solution. Proper panel angle eliminates glare at source. Standard ergonomic practice for control room design." },
                    { id: 'b', text: "Reposition overhead lights", cost: 4000, score: 75, feedback: "Good alternative. Addresses glare by modifying environment. May affect other work areas â€” verify no knock-on effects." },
                    { id: 'c', text: "Install anti-glare film on displays", cost: 1500, score: 65, feedback: "Reasonable compromise. Film reduces glare but may affect colour accuracy. Acceptable if panel modification is impractical." },
                    { id: 'd', text: "Add adjustable hood over displays", cost: 2000, score: 55, feedback: "Partial solution. Hoods reduce glare but may obscure displays from some viewing angles. Test with operator positions." },
                    { id: 'e', text: "Issue anti-glare glasses to operators", cost: 300, score: 20, feedback: "ALARP Concern. Personal equipment reliance is administrative control. Glasses may not always be worn or available." }
                ]
            },
            {
                id: 5,
                title: "Code-Only Labelling",
                description: "Controls are labelled only with system codes (e.g., '3-RCS-V-024'). Operators must memorise codes or reference documentation to identify components during time-critical operations.",
                regulation: "NS-TAST-GD-059: HMI labelling requirements",
                options: [
                    { id: 'a', text: "Add descriptive labels (code + name)", cost: 3000, score: 100, feedback: "Correct solution. Descriptive labels ('Primary Isolation Valve') reduce cognitive load and memory requirements. HMI best practice." },
                    { id: 'b', text: "Install digital label displays", cost: 5000, score: 90, feedback: "Modern solution. Digital labels can show code, name, and current status. Allows context-sensitive labelling during procedures." },
                    { id: 'c', text: "Add colour-coded system bands", cost: 1200, score: 55, feedback: "Partial solution. Colour bands help locate components but don't identify them. Operators still need to decode or memorise." },
                    { id: 'd', text: "Create quick-reference cards at panel", cost: 500, score: 40, feedback: "Minimal help. Reference cards require operators to look away from controls. Better than nothing but not a design solution." },
                    { id: 'e', text: "Rely on operator training", cost: 0, score: 10, feedback: "ALARP Concern. Relying on memorisation is error-prone, especially for infrequent operations or under stress. Design should support, not challenge." }
                ]
            },
            {
                id: 6,
                title: "No Procedure Holder",
                description: "The panel has no provision for holding procedures during operations. Operators currently balance documents on equipment or hold them while trying to operate controls.",
                regulation: "NS-TAST-GD-060: Procedure use support",
                options: [
                    { id: 'a', text: "Integrate document holder into panel", cost: 2000, score: 100, feedback: "Correct solution. Integrated holder keeps procedures visible and hands free. Simple, effective, and inexpensive â€” no reason not to implement." },
                    { id: 'b', text: "Install tablet mount with digital procedures", cost: 3500, score: 95, feedback: "Modern upgrade. Digital procedures with integrated holder. Allows search, highlights, and automatic place-keeping." },
                    { id: 'c', text: "Provide portable lectern", cost: 400, score: 60, feedback: "Acceptable alternative. Portable lectern works but may not always be positioned correctly or available. Less reliable than integrated solution." },
                    { id: 'd', text: "Add magnetic document clips to panel", cost: 150, score: 50, feedback: "Basic improvement. Clips keep documents in place but may obscure controls. Better than holding but not ideal." },
                    { id: 'e', text: "Operators use floor/hold procedures", cost: 0, score: 5, feedback: "Not acceptable. This creates manual handling issues, contaminates procedures, and diverts attention. Basic oversight in design." }
                ]
            }
        ];

        let game2State = {
            budget: 50000,
            startBudget: 50000,
            score: 0,
            solved: 0,
            decisions: [],
            currentProblem: null,
            selectedOption: null
        };

        function startGame2() {
            document.getElementById('game2Intro').classList.add('hidden');
            document.getElementById('game2Area').classList.remove('hidden');
            resetGame2State();
        }

        function resetGame2State() {
            game2State = {
                budget: 50000,
                startBudget: 50000,
                score: 0,
                solved: 0,
                decisions: [],
                currentProblem: null,
                selectedOption: null
            };
            updateGame2Stats();
            
            // Reset all hotspots
            document.querySelectorAll('#game2Room .game-hotspot').forEach(h => {
                h.classList.remove('solved');
            });
        }

        function resetGame2() {
            document.getElementById('game2Complete').classList.add('hidden');
            document.getElementById('game2Intro').classList.remove('hidden');
            document.getElementById('game2Area').classList.add('hidden');
            resetGame2State();
        }

        function updateGame2Stats() {
            document.getElementById('game2Budget').textContent = `Â£${game2State.budget.toLocaleString()}`;
            document.getElementById('game2Solved').textContent = game2State.solved;
            document.getElementById('game2Score').textContent = game2State.score;

            // Update budget colour
            const budgetStat = document.querySelector('#game2Area .stat-budget');
            if (budgetStat) {
                budgetStat.classList.remove('low', 'critical');
                if (game2State.budget < 15000) {
                    budgetStat.classList.add('critical');
                } else if (game2State.budget < 25000) {
                    budgetStat.classList.add('low');
                }
            }
        }

        function showProblem2(problemId) {
            const problem = game2Problems.find(p => p.id === problemId);
            if (!problem) return;

            game2State.currentProblem = problem;
            game2State.selectedOption = null;

            // Populate modal
            document.getElementById('modal2ProblemNum').textContent = problem.id;
            document.getElementById('modal2Title').textContent = problem.title;
            document.getElementById('modal2Description').textContent = problem.description;
            document.getElementById('modal2Regulation').textContent = problem.regulation;
            document.getElementById('modal2Budget').textContent = `Â£${game2State.budget.toLocaleString()}`;

            // Build options
            const optionsContainer = document.getElementById('modal2Options');
            optionsContainer.innerHTML = '';

            problem.options.forEach(opt => {
                const canAfford = game2State.budget >= opt.cost;
                const optionEl = document.createElement('div');
                optionEl.className = `option-item ${!canAfford ? 'disabled' : ''}`;
                optionEl.dataset.optionId = opt.id;
                optionEl.onclick = canAfford ? () => selectOption2(opt.id) : null;

                optionEl.innerHTML = `
                    <div class="option-radio"></div>
                    <div class="option-content">
                        <span class="option-letter">${opt.id.toUpperCase()})</span>
                        <span class="option-text">${opt.text}</span>
                    </div>
                    <div class="option-cost">${opt.cost === 0 ? 'Free' : 'Â£' + opt.cost.toLocaleString()}</div>
                `;

                optionsContainer.appendChild(optionEl);
            });

            // Reset confirm button
            document.getElementById('confirm2Btn').disabled = true;

            // Show modal
            document.getElementById('problemModal2').classList.remove('hidden');
        }

        function selectOption2(optionId) {
            game2State.selectedOption = optionId;

            // Update UI
            document.querySelectorAll('#problemModal2 .option-item').forEach(el => {
                el.classList.remove('selected');
                if (el.dataset.optionId === optionId) {
                    el.classList.add('selected');
                }
            });

            // Enable confirm
            document.getElementById('confirm2Btn').disabled = false;
        }

        function closeModal2() {
            document.getElementById('problemModal2').classList.add('hidden');
            game2State.currentProblem = null;
            game2State.selectedOption = null;
        }

        function confirmSelection2() {
            if (!game2State.currentProblem || !game2State.selectedOption) return;

            const problem = game2State.currentProblem;
            const option = problem.options.find(o => o.id === game2State.selectedOption);

            // Apply decision
            game2State.budget -= option.cost;
            game2State.score += option.score;
            game2State.solved++;
            game2State.decisions.push({
                problemId: problem.id,
                problemTitle: problem.title,
                optionId: option.id,
                optionText: option.text,
                cost: option.cost,
                score: option.score,
                feedback: option.feedback,
                regulation: problem.regulation
            });

            // Mark hotspot as solved (SVG circle)
            const hotspotCircle = document.querySelector(`#game2Room circle[onclick="showProblem2(${problem.id})"]`);
            if (hotspotCircle) {
                hotspotCircle.classList.add('solved');
                hotspotCircle.style.fill = '#92d050';
                hotspotCircle.style.opacity = '0.5';
            }

            // Close modal
            closeModal2();

            // Update stats
            updateGame2Stats();

            // Show feedback toast
            showFeedback2(option);

            // Check if game complete
            if (game2State.solved >= 6) {
                setTimeout(() => {
                    completeGame2();
                }, 2500);
            }
        }

        function showFeedback2(option) {
            const toast = document.getElementById('feedbackToast2');
            const toastIcon = document.getElementById('toast2Icon');
            const toastTitle = document.getElementById('toast2Title');
            const toastMessage = document.getElementById('toast2Message');

            // Determine feedback type
            toast.classList.remove('warning', 'concern');
            if (option.score >= 80) {
                toastIcon.textContent = 'âœ“';
                toastTitle.textContent = 'Good Decision';
            } else if (option.score >= 50) {
                toast.classList.add('warning');
                toastIcon.textContent = 'âš ';
                toastTitle.textContent = 'Acceptable Compromise';
            } else {
                toast.classList.add('concern');
                toastIcon.textContent = 'âš ';
                toastTitle.textContent = 'ALARP Concern';
            }

            toastMessage.textContent = option.feedback;

            // Show toast
            toast.classList.remove('hidden');

            // Hide after delay
            setTimeout(() => {
                toast.classList.add('hidden');
            }, 4000);
        }

        function completeGame2() {
            document.getElementById('game2Area').classList.add('hidden');
            document.getElementById('game2Complete').classList.remove('hidden');

            // Populate final stats
            document.getElementById('finalScore2').textContent = game2State.score;
            document.getElementById('finalBudget2').textContent = `Â£${(game2State.startBudget - game2State.budget).toLocaleString()}`;
            document.getElementById('finalRemaining2').textContent = `Â£${game2State.budget.toLocaleString()}`;

            // Build ALARP Documentation
            const alarpDocList = document.getElementById('alarpDocList');
            alarpDocList.innerHTML = '';

            game2State.decisions.forEach(dec => {
                // Find the optimal solution for this problem
                const problem = game2Problems.find(p => p.id === dec.problemId);
                const optimalOption = problem.options.reduce((best, opt) => opt.score > best.score ? opt : best, problem.options[0]);
                
                const statusClass = dec.score >= 80 ? 'implemented' : (dec.score >= 50 ? 'partial' : 'requires-justification');
                const statusText = dec.score >= 80 ? 'âœ“ Implemented' : (dec.score >= 50 ? 'âš  Partial Implementation' : 'âš  Requires Justification');
                
                const docItem = document.createElement('div');
                docItem.className = 'alarp-doc-item';
                
                let justificationHtml = '';
                if (dec.score >= 80) {
                    justificationHtml = `
                        <div class="doc-justification">
                            <div class="doc-justification-label">ALARP Justification</div>
                            <div class="doc-justification-text">${dec.optionText} addresses the identified HF issue. Cost (Â£${dec.cost.toLocaleString()}) is not grossly disproportionate to safety benefit.</div>
                        </div>
                    `;
                } else if (dec.score >= 50) {
                    justificationHtml = `
                        <div class="doc-justification">
                            <div class="doc-justification-label">ALARP Justification</div>
                            <div class="doc-justification-text">${dec.feedback.split('.')[0]}. Further risk reduction options were considered but deemed disproportionate to residual risk.</div>
                        </div>
                        <div class="doc-optimal">
                            <div class="doc-optimal-label">ðŸ’¡ Optimal Solution</div>
                            <div class="doc-optimal-text"><strong>${optimalOption.text}</strong> (Â£${optimalOption.cost.toLocaleString()}) â€” ${optimalOption.feedback.split('.')[0]}.</div>
                        </div>
                    `;
                } else {
                    justificationHtml = `
                        <div class="doc-justification">
                            <div class="doc-justification-label">ALARP Justification</div>
                            <div class="doc-justification-text doc-justification-required">[REQUIRED] You must justify why engineering solutions were not reasonably practicable. Administrative controls alone may not satisfy ALARP requirements.</div>
                        </div>
                        <div class="doc-optimal">
                            <div class="doc-optimal-label">ðŸ’¡ Optimal Solution</div>
                            <div class="doc-optimal-text"><strong>${optimalOption.text}</strong> (Â£${optimalOption.cost.toLocaleString()}) â€” ${optimalOption.feedback.split('.')[0]}.</div>
                        </div>
                    `;
                }
                
                docItem.innerHTML = `
                    <div class="doc-item-header">
                        <span class="doc-item-title">Decision ${dec.problemId}: ${dec.problemTitle}</span>
                        <span class="doc-item-status ${statusClass}">${statusText}</span>
                    </div>
                    <div class="doc-item-body">
                        <div class="doc-row">
                            <span class="doc-label">Your Choice:</span>
                            <span class="doc-value">${dec.optionText}</span>
                        </div>
                        <div class="doc-row">
                            <span class="doc-label">Cost:</span>
                            <span class="doc-value">Â£${dec.cost.toLocaleString()}</span>
                        </div>
                        <div class="doc-row">
                            <span class="doc-label">Regulation:</span>
                            <span class="doc-value">${dec.regulation}</span>
                        </div>
                        ${justificationHtml}
                    </div>
                `;
                
                alarpDocList.appendChild(docItem);
            });

            // Generate ALARP assessment
            const concerns = game2State.decisions.filter(d => d.score < 50).length;
            const compromises = game2State.decisions.filter(d => d.score >= 50 && d.score < 80).length;

            const assessment = document.getElementById('assessmentContent2');
            if (concerns === 0 && compromises <= 1) {
                assessment.innerHTML = `<p><strong>Well-documented ALARP position.</strong> Your decisions demonstrate systematic consideration of HF improvements with appropriate implementation. The safety case documentation above shows clear alignment with Relevant Good Practice.</p>
                <p>This approach should satisfy GDA/PSR assessment with minimal challenges.</p>`;
            } else if (concerns <= 2) {
                assessment.innerHTML = `<p><strong>Documentation gaps identified.</strong> You have ${concerns} decision(s) requiring formal ALARP justification. The documentation above highlights where additional evidence is needed.</p>
                <p>Assessors will question why better options were not implemented. "Budget constraints" alone is insufficient â€” you must demonstrate gross disproportion.</p>`;
            } else {
                assessment.innerHTML = `<p><strong>Significant documentation requirements.</strong> Multiple decisions rely on administrative controls without adequate justification. The ALARP documentation shows several "[REQUIRED]" entries that must be addressed.</p>
                <p>This design is likely to generate assessment findings. Consider whether the approach can be defended when challenged on why engineering solutions were rejected.</p>`;
            }
        }

        // ==================== AUDIO PLAYER ====================
        const audioFiles = {
            1: 'audio/screen_1.mp3',
            2: 'audio/screen_2.mp3',
            3: 'audio/screen_3.mp3',
            4: 'audio/screen_4.mp3',
            5: 'audio/screen_5.mp3',
            6: 'audio/screen_6.mp3',
            7: 'audio/screen_7_intro.mp3',
            8: 'audio/screen_8_intro.mp3',
            9: 'audio/screen_9.mp3',
            10: 'audio/screen_10.mp3'
        };

        let currentAudioScreen = 0;

        function loadAudioForScreen(screenNum) {
            const narrationAudio = document.getElementById('narrationAudio');
            const audioPlayPauseBtn = document.getElementById('audioPlayPause');
            const audioProgress = document.getElementById('audioProgress');
            const audioTime = document.getElementById('audioTime');
            
            if (!narrationAudio || !audioPlayPauseBtn) {
                console.log('Audio elements not found');
                return;
            }

            // Only reload if screen changed
            if (currentAudioScreen === screenNum) return;
            currentAudioScreen = screenNum;

            // Stop any currently playing audio
            narrationAudio.pause();
            narrationAudio.currentTime = 0;
            
            // Reset UI
            audioPlayPauseBtn.classList.remove('playing');
            if (audioProgress) audioProgress.style.width = '0%';
            if (audioTime) audioTime.textContent = '0:00';
            
            // Load new audio file
            if (audioFiles[screenNum]) {
                narrationAudio.src = audioFiles[screenNum];
                narrationAudio.load();
                console.log('Loaded audio for screen ' + screenNum + ': ' + audioFiles[screenNum]);
            }
        }

        function toggleAudio() {
            const narrationAudio = document.getElementById('narrationAudio');
            const audioPlayPauseBtn = document.getElementById('audioPlayPause');
            
            if (!narrationAudio || !audioPlayPauseBtn) return;
            
            if (narrationAudio.paused) {
                narrationAudio.play().catch(e => {
                    console.log('Audio play failed:', e);
                });
                audioPlayPauseBtn.classList.add('playing');
            } else {
                narrationAudio.pause();
                audioPlayPauseBtn.classList.remove('playing');
            }
        }

        function toggleMute() {
            const narrationAudio = document.getElementById('narrationAudio');
            const audioMuteBtn = document.getElementById('audioMute');
            
            if (!narrationAudio || !audioMuteBtn) return;
            
            narrationAudio.muted = !narrationAudio.muted;
            audioMuteBtn.classList.toggle('muted', narrationAudio.muted);
            
            const unmutedIcon = audioMuteBtn.querySelector('.unmuted-icon');
            const mutedIcon = audioMuteBtn.querySelector('.muted-icon');
            
            if (narrationAudio.muted) {
                if (unmutedIcon) unmutedIcon.style.display = 'none';
                if (mutedIcon) mutedIcon.style.display = 'inline';
            } else {
                if (unmutedIcon) unmutedIcon.style.display = 'inline';
                if (mutedIcon) mutedIcon.style.display = 'none';
            }
        }

        function seekAudio(event) {
            const narrationAudio = document.getElementById('narrationAudio');
            if (!narrationAudio) return;
            
            const container = event.currentTarget;
            const clickX = event.offsetX;
            const width = container.offsetWidth;
            const seekPercent = clickX / width;
            
            if (narrationAudio.duration) {
                narrationAudio.currentTime = seekPercent * narrationAudio.duration;
            }
        }

        function formatTime(seconds) {
            if (isNaN(seconds)) return '0:00';
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        function updateAudioProgress() {
            const narrationAudio = document.getElementById('narrationAudio');
            const audioProgress = document.getElementById('audioProgress');
            const audioTime = document.getElementById('audioTime');
            
            if (!narrationAudio || !audioProgress || !audioTime) return;
            
            if (narrationAudio.duration) {
                const percent = (narrationAudio.currentTime / narrationAudio.duration) * 100;
                audioProgress.style.width = percent + '%';
                audioTime.textContent = formatTime(narrationAudio.currentTime);
            }
        }

        function initAudioPlayer() {
            const narrationAudio = document.getElementById('narrationAudio');
            const audioPlayPauseBtn = document.getElementById('audioPlayPause');
            const audioTime = document.getElementById('audioTime');
            
            if (!narrationAudio) {
                console.log('Narration audio element not found');
                return;
            }
            
            // Audio event listeners
            narrationAudio.addEventListener('timeupdate', updateAudioProgress);

            narrationAudio.addEventListener('ended', function() {
                if (audioPlayPauseBtn) audioPlayPauseBtn.classList.remove('playing');
                const audioProgress = document.getElementById('audioProgress');
                if (audioProgress) audioProgress.style.width = '0%';
                narrationAudio.currentTime = 0;
            });

            narrationAudio.addEventListener('loadedmetadata', function() {
                if (audioTime) audioTime.textContent = formatTime(narrationAudio.duration);
            });
            
            narrationAudio.addEventListener('error', function(e) {
                console.log('Audio error:', e);
                if (audioTime) audioTime.textContent = '--:--';
            });
            
            console.log('Audio player initialised');
        }

        // ==================== CHECKLIST ====================
        function toggleCategory(categoryId) {
            const category = document.querySelector(`.checklist-category[data-category="${categoryId}"]`);
            if (category) {
                category.classList.toggle('open');
            }
        }

        function initChecklist() {
            // Add click handlers to checkbox items
            document.querySelectorAll('.checklist-item').forEach(item => {
                item.addEventListener('click', function() {
                    const checkbox = this.querySelector('.check-input');
                    checkbox.checked = !checkbox.checked;
                    this.classList.toggle('checked', checkbox.checked);
                    updateChecklistProgress();
                });
            });
        }

        function updateChecklistProgress() {
            const total = document.querySelectorAll('.checklist-item').length;
            const checked = document.querySelectorAll('.checklist-item.checked').length;
            const percentage = Math.round((checked / total) * 100);
            
            document.getElementById('checkedCount').textContent = checked;
            document.getElementById('checklistProgress').style.width = percentage + '%';
            
            // Update completion page stats if available
            const checklistComplete = document.getElementById('checklistComplete');
            if (checklistComplete) {
                checklistComplete.textContent = percentage + '%';
            }
        }

        // ==================== COMPLETION SCREEN ====================
        function updateCompletionStats() {
            // Completion date
            const dateEl = document.getElementById('completionDate');
            if (dateEl) {
                const now = new Date();
                dateEl.textContent = now.toLocaleDateString('en-GB', { 
                    day: 'numeric', 
                    month: 'long', 
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            }
        }

        // ==================== INITIALISATION ====================
        document.addEventListener('DOMContentLoaded', function() {
            // Initial progress update
            updateProgress();
            
            // Initial navigation state
            updateNavigation();

            // Trigger animations for page 1
            triggerPageAnimations(1);

            // Setup scroll observer for animations
            setupScrollObserver();

            // Initialize checklist
            initChecklist();

            // Initialize audio player
            initAudioPlayer();
            
            // Load audio for first page (no auto-play)
            loadAudioForScreen(1);

            // Log ready state
            console.log('Module 5.4: ALARP & Human Factors - Initialised');
        });

        // ==================== PAGE ANIMATIONS ====================
        function triggerPageAnimations(pageNum) {
            const page = document.getElementById(`page${pageNum}`);
            if (!page) return;

            // Handle load animations (Screen 1)
            const loadAnimations = page.querySelectorAll('.animate-on-load');
            loadAnimations.forEach((el, index) => {
                const delay = parseInt(el.getAttribute('data-delay')) || (index * 150);
                setTimeout(() => {
                    el.classList.add('animated');
                }, delay);
            });

            // Trigger scroll animations immediately visible
            const scrollAnimations = page.querySelectorAll('.animate-on-scroll');
            scrollAnimations.forEach((el, index) => {
                const delay = parseInt(el.getAttribute('data-delay')) || 0;
                setTimeout(() => {
                    el.classList.add('animated');
                }, 100 + delay);
            });
        }

        function setupScrollObserver() {
            const observerOptions = {
                root: null,
                rootMargin: '0px 0px -50px 0px',
                threshold: 0.1
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const delay = parseInt(entry.target.getAttribute('data-delay')) || 0;
                        setTimeout(() => {
                            entry.target.classList.add('animated');
                        }, delay);
                    }
                });
            }, observerOptions);

            // Observe all scroll-animated elements
            document.querySelectorAll('.animate-on-scroll').forEach(el => {
                observer.observe(el);
            });
        }

        // Update goToPage to trigger animations
        const originalGoToPage = goToPage;
        goToPage = function(pageNum) {
            if (pageNum < 1 || pageNum > totalPages) return;

            // Hide current page
            const currentPageEl = document.getElementById(`page${currentPage}`);
            if (currentPageEl) {
                currentPageEl.classList.remove('active');
            }

            // Show new page
            currentPage = pageNum;
            const newPageEl = document.getElementById(`page${pageNum}`);
            if (newPageEl) {
                newPageEl.classList.add('active');
            }

            // Track visited pages
            visitedPages.add(pageNum);

            // Update progress
            updateProgress();

            // Update navigation
            updateNavigation();

            // Close menu on mobile
            closeMenu();

            // Load audio for the new page
            loadAudioForScreen(pageNum);

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'instant' });

            // Trigger page animations
            setTimeout(() => {
                triggerPageAnimations(pageNum);
            }, 50);
        };
    </script>
</body>
</html>
